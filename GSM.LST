A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN GSM.OBJ
ASSEMBLER INVOKED BY: C:\Keil\C51\BIN\A51.EXE GSM.asm SET(SMALL) DEBUG EP

LOC  OBJ            LINE     SOURCE

                       1     NAME    GSM
                       2             
                       3     ;--------------------------------------------------------------------------
                       4     ;_FUN_GSM_Insert                ²å¿¨´¦Àí³ÌÐò
                       5     ;_FUN_GSM_GetOffset             ¸ù¾Ý CellID »ñµÃÏàÓ¦µÄÆ«ÒÆÁ¿
                       6     ;_FUN_GSM_RTCDeal               RTC ÖÐ¶Ï´¦Àí
                       7     ;_FUN_GSM_ETCInputDeal          GSMÔÚETCÈë¿Ú´¦ÀíÁ÷³Ì
                       8     ;_FUN_GSM_ETCOnputDeal          GSMÔÚETC³ö¿Ú´¦ÀíÁ÷³Ì
                       9             
                      10     ;_FUN_GSM_PlayInputOutput       ²¥·Å³öÈë¿Ú×´Ì¬
                      11     ;_FUN_GSM_SerialINTRX           ´®¿ÚÖÐ¶Ï½ÓÊÕ
                      12     ;_FUN_GSM_ReportMSG             ²¥±¨¶ÌÐÅ¹¦ÄÜ
                      13     ;_FUN_GSM_LowVotage             µÍµçÑ¹±¨¾¯
                      14             
                      15     ;_FUN_GSM_RTCCtrl               
                      16     ;_Fun_GSM_RTCDis                ½ûÓÃRTC
                      17     ;_Fun_GSM_RTCEn                 ¿ªÆôRTC
                      18     ;_FUN_GSM_RTCON                 ¿ªRTC
                      19     ;_FUN_GSM_RTCOFF                ¹ØRTC
                      20     ;--------------------------------------------------------------------------
                      21     ;$include (GSM.INC)
                +1    22     ;---¶Î¶¨Òå---
                +1    23     ?pr?GSM?Mater                   SEGMENT CODE
                +1    24     ?co?GSM?FLASHSTR                SEGMENT CODE
                +1    25     
                +1    26     EXTRN   BIT(BIT_BUFADDR)
                +1    27     EXTRN   BIT(BIT_VERIFY)
                +1    28     EXTRN   BIT(BIT_SERIALOVERTIMERX)
                +1    29     
                +1    30     EXTRN   XDATA(XDATA_TXBUF)
                +1    31     EXTRN   XDATA(XDATA_HOLD)
                +1    32     EXTRN   XDATA(XDATA_CELLID)
                +1    33     EXTRN   XDATA(XDATA_UnixTime)
                +1    34     EXTRN   XDATA(XDATA_RTCTime)
                +1    35     EXTRN   XDATA(XDATA_IssueCMD)
                +1    36     EXTRN   XDATA(XDATA_RTCMode)
                +1    37     EXTRN   XDATA(XDATA_54)
                +1    38     EXTRN   XDATA(XDATA_FIX)
                +1    39             
                +1    40     EXTRN   DATA(DATA_RXBUF)
                +1    41     EXTRN   DATA(Money)
                +1    42             
                +1    43     EXTRN   BIT(BIT_HaveRecordCellID)       
                +1    44     EXTRN   BIT(BIT_GETRESULT)
                +1    45     EXTRN   BIT(BIT_PPS)
                +1    46     
                +1    47     ;EXTRN  BIT(BIT_RTC_TMP)
                +1    48     EXTRN   BIT(BIT_ESAMICC)
                +1    49     EXTRN   BIT(BIT_INSERTCARD)
                +1    50     extrn   code(STR_ErrCARD)
                +1    51     extrn   code(STR_chang)
                +1    52     EXTRN   CODE(_Func_LCD_INIT)
                +1    53     extrn   code(_FUN_LCD_DisplayExChina)
                +1    54     extrn   code(_fun_lib_beep)
                +1    55     ;EXTRN  CODE(_FUN_OBUMain_PWRLowDis)
                +1    56     EXTRN   CODE(_Fun_OBUmain_SysUNSleep)
                +1    57     EXTRN   CODE(_FUN_OBUMAIN_INITSYS)
                +1    58     EXTRN   CODE(_FUN_LIB_DELAY)
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     2

                +1    59     EXTRN   CODE(_FUN_OBUMain_BASEINIT)
                +1    60     ;EXTRN  CODE(_FUN_OBUMain_PPS)
                +1    61     EXTRN   CODE(_FUN_LIB_xDATATOXDATA)
                +1    62     EXTRN   CODE(_wrflash)
                +1    63     EXTRN   CODE(_eraseflash)
                +1    64     EXTRN   CODE(_RDFlashXR)
                +1    65     EXTRN   CODE(_FUN_CARDAPP_ReadBinary02)
                +1    66     EXTRN   CODE(_FUN_CARDAPP_UpdateBinary)
                +1    67     EXTRN   CODE(_FUN_CARDAPP_SelectFile)
                +1    68     EXTRN   CODE(_FUN_ContactIssue_INIT)
                +1    69     EXTRN   CODE(_FUN_ContactIssue_RX)
                +1    70     EXTRN   CODE(_FUN_LIB_XDATATODATA)
                +1    71     EXTRN   CODE(_FUN_SERIAL_RXHBYTE)
                +1    72     ;EXTRN  CODE(_FUN_GSM_SERIALINTRX)
                +1    73     EXTRN   CODE(_FUN_ContactIssue_Release)
                +1    74     EXTRN   CODE(_FUN_TEST_UARTDISPLAY)
                +1    75     EXTRN   CODE(_RDFlash)
                +1    76     EXTRN   CODE(ap_start)
                +1    77     EXTRN   CODE(_FUN_LIB_GetBCC)
                +1    78     EXTRN   CODE(_fun_test_Display)
                +1    79     ;EXTRN  CODE(_FUN_TEST_DISPLAY02)
                +1    80     EXTRN   CODE(_wrflashxr)
                +1    81     EXTRN   CODE(_FUN_LIB_DATATOXDATA)
                +1    82     ;EXTRN  CODE(OBUMain_RTCUP_RTCSLEEP)
                +1    83     EXTRN   CODE(_FUN_ContactIssue_RX02)
                +1    84     ;EXTRN  CODE(OBUMAIN_MASTER_MAINSleep)
                +1    85     EXTRN   CODE(_FUN_LIB_FLASHTOXDATA)
                +1    86     EXTRN   CODE(_FUN_SERIAL_AudioTXSOFT)
                +1    87     EXTRN   code(_FUN_CARDAPP_ReadRecord)
                +1    88     EXTRN   CODE(_FUN_SERIAL_TXHARD)
                +1    89     EXTRN   CODE(_FUN_ContactIssue_RX03)
                +1    90     EXTRN   CODE(_FUN_SERIAL_RXHARD)
                +1    91     extrn   code(ContactIssue_RX02_Deal)
                +1    92     EXTRN   CODE(_FUN_SERIAL_RXHARD03)
                +1    93     
                +1    94     EXTRN   XDATA(XDATA_SOFTFIRSTSCANTIME)
                +1    95     ;EXTRN  CODE(_WriteFlash)
                +1    96     PUBLIC  GSM_SerialINTRX_RXRight
                +1    97     public  _FUN_GSM_RTCEn          
                +1    98     public  _FUN_GSM_RTCDis
                +1    99     PUBLIC  _FUN_GSM_GetOffset
                +1   100     PUBLIC  _FUN_GSM_SerialINTRX
                +1   101     PUBLIC  _FUN_GSM_Insert
                +1   102     PUBLIC  _Fun_GSM_GetCellIDEN
                +1   103     ;PUBLIC _Fun_GSM_GetCellID
                +1   104     PUBLIC  _FUN_GSM_RTCON
                +1   105     PUBLIC  _FUN_GSM_RTCOFF
                +1   106     public  _Fun_GSM_Audio
                +1   107     
                +1   108     PUBLIC  STR_GSM_Input
                +1   109     PUBLIC  STR_GSM_Output
                +1   110     PUBLIC  STR_GSM_SRR
                +1   111     
                +1   112     PUBLIC  STR_GSM_RRing
                +1   113     PUBLIC  STR_GSM_VotaLow
                +1   114     
                +1   115     ;--- CC1101 ---
                +1   116     EXTRN CODE(_FUN_CC1101_RESET)           ;¸´Î»
                +1   117     EXTRN CODE(_FUN_CC1101_INIT)            ;³õÊ¼»¯ CC1101
                +1   118     EXTRN CODE(_FUN_CC1101_SetWakeUpTime)   ;³õÊ¼»¯1101»½ÐÑÊ±¼ä
                +1   119     EXTRN CODE(_FUN_CC1101_RVOn)            ;´ò¿ª½ÓÊÕ       
                +1   120     EXTRN CODE(_FUN_CC1101_RVOff)           ;¹Ø±Õ½ÓÊÕ
                +1   121     EXTRN CODE(_FUN_CC1101_RVWR)            ;»Ø¶Á
                +1   122     EXTRN CODE(_FUN_CC1101_Idle)            ;ÉèÖÃµ±Ç°Îª¿ÕÏÐ×´Ì¬
                +1   123     EXTRN CODE(_FUN_CC1101_WakeUP)          ;ÉèÖÃµ±Ç°Îª»½ÐÑ×´Ì¬
                +1   124     EXTRN CODE(_FUN_CC1101_spioSoftRXCC1101RXCC1101)
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     3

                +1   125     
----            +1   126     RSEG    ?co?GSM?FLASHSTR
                +1   127     
                +1   128     ;¿ª»ú 
                +1   129     ; FD00110100A3DBA3D6A3B1A3B5A3DDBFAABBFACE
                +1   130     ;¹Ø»ú
                +1   131     ;FD00110100A3DBA3D6A3B1A3B5A3DDB9D8BBFABA
0000            +1   132     STR_GSM_Input:  ;¿ª»ú
0000 15         +1   133             DB      21
0001 02         +1   134             DB      2
0002 FD001101   +1   135             DB      0FDH,000H,011H,001H,000H,0A3H,0DBH,0A3H,0D6H,0A3H,0B1H,0A3H,0B5H,0A3H,0DDH,
                             0BFH,0AAH,0BBH,0FAH,0CEH
0006 00A3DBA3                
000A D6A3B1A3                
000E B5A3DDBF                
0012 AABBFACE                
                +1   136     
0016            +1   137     STR_GSM_Output: ;¹Ø»ú
0016 15         +1   138             DB      21
0017 02         +1   139             DB      2       
0018 FD001101   +1   140             DB      0FDH,000H,011H,001H,000H,0A3H,0DBH,0A3H,0D6H,0A3H,0B1H,0A3H,0B5H,0A3H,0DDH,
                             0B9H,0D8H,0BBH,0FAH,0BAH
001C 00A3DBA3                
0020 D6A3B1A3                
0024 B5A3DDB9                
0028 D8BBFABA                
                +1   141                     
                +1   142     ; 1¡¢¿ªÊ¼Â·¾¶¼ÇÂ¼
002C            +1   143     STR_GSM_SRR:
002C 18         +1   144             DB      24
002D 06         +1   145             DB      6       
                +1   146             ;DB     0FDH,000H,00FH,001H,001H,0BFH,0AAH,0CAH,0BCH,0C2H,0B7H,0BEH,0B6H,0BCH,0C7H,
                             0C2H,0BCH,0E9H
002E FD001401   +1   147             DB      0FDH,000H,014H,001H,001H,05BH,076H,031H,035H,05DH,0BFH,0AAH,0CAH,0BCH,0C2H,
                             0B7H,0BEH,0B6H,0BCH,0C7H,0C2H,0BCH,086H
0032 015B7631                
0036 355DBFAA                
003A CABCC2B7                
003E BEB6BCC7                
0042 C2BC86                  
                +1   148             
                +1   149     ;2¡¢Â·¾¶¼ÇÂ¼ÖÐ  
0045            +1   150     STR_GSM_RRing:
0045 16         +1   151             DB      22
0046 05         +1   152             DB      5       
                +1   153             ;DB     0FDH,000H,00DH,001H,001H,0C2H,0B7H,0BEH,0B6H,0BCH,0C7H,0C2H,0BCH,0D6H,0D0H,
                             08EH
0047 FD001201   +1   154             DB      0FDH,000H,012H,001H,001H,05BH,076H,031H,035H,05DH,0C2H,0B7H,0BEH,0B6H,0BCH,
                             0C7H,0C2H,0BCH,0D6H,0D0H,0E5H
004B 015B7631                
004F 355DC2B7                
0053 BEB6BCC7                
0057 C2BCD6D0                
005B E5                      
                +1   155             
                +1   156     ;3¡¢½áÊøÂ·¾¶¼ÇÂ¼
005C            +1   157     STR_GSM_CRR:
005C 18         +1   158             DB      24
005D 06         +1   159             DB      6       
                +1   160             ;DB     0FDH,000H,00FH,001H,001H,0BDH,0E1H,0CAH,0F8H,0C2H,0B7H,0BEH,0B6H,0BCH,0C7H,
                             0C2H,0BCH,0E4H
005E FD001401   +1   161             DB      0FDH,000H,014H,001H,001H,05BH,076H,031H,035H,05DH,0BDH,0E1H,0CAH,0F8H,0C2H,
                             0B7H,0BEH,0B6H,0BCH,0C7H,0C2H,0BCH,08BH
0062 015B7631                
0066 355DBDE1                
006A CAF8C2B7                
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     4

006E BEB6BCC7                
0072 C2BC8B                  
                +1   162             
                +1   163     ;4¡¢ÄãÒÑ½øÈë¸ßËÙ
0075            +1   164     STR_GSM_NYJLGS:
0075 18         +1   165             DB      24
0076 06         +1   166             DB      6       
                +1   167             ; DB    0FDH,000H,00FH,001H,001H,0C4H,0E3H,0D2H,0D1H,0BDH,0F8H,0C8H,0EBH,0B8H,0DFH,
                             0CBH,0D9H,0C5H
0077 FD001401   +1   168             DB      0FDH,000H,014H,001H,001H,05BH,076H,031H,035H,05DH,0C4H,0E3H,0D2H,0D1H,0BDH,
                             0F8H,0C8H,0EBH,0B8H,0DFH,0CBH,0D9H,0AAH
007B 015B7631                
007F 355DC4E3                
0083 D2D1BDF8                
0087 C8EBB8DF                
008B CBD9AA                  
                +1   169             
                +1   170     ;5¡¢ÄãÒÑÏÂ¸ßËÙ
008E            +1   171     STR_GSM_NYXGS:
008E 16         +1   172             DB      22
008F 05         +1   173             DB      5       
                +1   174             ;DB     0FDH,000H,00DH,001H,001H,0C4H,0E3H,0D2H,0D1H,0CFH,0C2H,0B8H,0DFH,0CBH,0D9H,
                             0ACH
0090 FD001201   +1   175             DB      0FDH,000H,012H,001H,001H,05BH,076H,031H,035H,05DH,0C4H,0E3H,0D2H,0D1H,0CFH,
                             0C2H,0B8H,0DFH,0CBH,0D9H,0C7H
0094 015B7631                
0098 355DC4E3                
009C D2D1CFC2                
00A0 B8DFCBD9                
00A4 C7                      
                +1   176             
                +1   177     ;6¡¢µçÑ¹µÍÇë³äµç
00A5            +1   178     STR_GSM_VotaLow:
00A5 18         +1   179             DB      24
00A6 06         +1   180             DB      6       
00A7 FD001401   +1   181             DB      0FDH,000H,014H,001H,001H,05BH,076H,031H,035H,05DH,0B5H,0E7H,0C1H,0BFH,0B5H,
                             0CDH,0C7H,0EBH,0B3H,0E4H,0B5H,0E7H,0E0H
00AB 015B7631                
00AF 355DB5E7                
00B3 C1BFB5CD                
00B7 C7EBB3E4                
00BB B5E7E0                  
                +1   182             
00BE            +1   183     STR_GSM_GetCellID:
00BE 0F         +1   184             DB      15
00BF 55AA0000   +1   185             DB      055H,0AAH,000H,000H,008H,0F1H,011H,022H,033H,044H,055H,066H,077H,088H,071H
00C3 08F11122                
00C7 33445566                
00CB 778871                  
                +1   186             
                +1   187             
                +1   188     
                +1   189             
                +1   190             
                     191     
                     192     ;$include (COMMON.INC)
                +1   193             
  009C          +1   194     BRT                                     EQU     09CH
  009C          +1   195     Reg_Sys_BRT                             EQU     09CH
                +1   196     ;RegBit_SysBRT_S1BRS                    BIT     Reg_Sys_BRT.1
                +1   197     
  009A          +1   198     S2CON                                   EQU     09AH
  009B          +1   199     S2BUF                                   EQU     09BH
  00AF          +1   200     IE2                                     EQU     0AFH
  00EA          +1   201     RELOAD2_CONTR                           EQU     0EAH
                +1   202             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     5

  0001          +1   203     CONST_TIMEER02                          EQU     1       ;Ò»ÖÜ6Ãë
  00FE          +1   204     CONST_TIMEER03                          EQU     254;245
  0001          +1   205     CONST_TIMEER04                          EQU     1
                +1   206     
  00A2          +1   207     REG_51_AUXR1                            EQU     0A2H
  00AE          +1   208     EPCAI                                   BIT     IE.6
                +1   209     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////
                +1   210     ;NEW LCD
                +1   211     ;PIN_Sys_IsDownload                     BIT     P3.7
                +1   212     ;PIN_LCD_OLEDD1                         BIT     P1.2
                +1   213     ;PIN_LCD_OLEDD0                         BIT     P1.3
                +1   214     ;PIN_LCD_OLEDDC                         BIT     P1.4
                +1   215     ;PIN_LCD_OLEDRES                        BIT     P1.5
                +1   216     ;PIN_LCD_OLEDCS                         BIT     P4.3
                +1   217     ;PIN_LCD_BG                             BIT     P1.1
                +1   218     ;PIN_OLED_ENSY7208                      BIT     P4.0
  00C0          +1   219     P4                                      EQU     0C0H
                +1   220     ;------------------------------------------------------------------------------------------
                             -----
  0005          +1   221     CONST_MAX_RXNUM                         EQU     5
                +1   222     ;TI_CCxxx0_SRES                         EQU     30H
                +1   223     ;Configuration Registers                
  0046          +1   224     CONST_GDO2_VALUE                        EQU     46h;046H        ;06H
  0002          +1   225     CONST_GDO2_MCSM2                        EQU     2;03H
  00C0          +1   226     read_burst                              EQU     0C0H
  0000          +1   227     TI_CCxxx0_IOCFG2                        EQU     00H        ;GDO2 output pin configuration
  0001          +1   228     TI_CCxxx0_IOCFG1                        EQU     01H        ;GDO1 output pin configuration
  0002          +1   229     TI_CCxxx0_IOCFG0                        EQU     02H        ;GDO0 output pin configuration
  0003          +1   230     TI_CCxxx0_FIFOTHR                       EQU     03H        ;RX FIFO and TX FIFO thresholds
  0004          +1   231     TI_CCxxx0_SYNC1                         EQU     04H        ;Sync word, high byte
  0005          +1   232     TI_CCxxx0_SYNC0                         EQU     05H        ;Sync word, low byte
  0006          +1   233     TI_CCxxx0_PKTLEN                        EQU     06H        ;Packet length
  0007          +1   234     TI_CCxxx0_PKTCTRL1                      EQU     07H        ;Packet automation control
  0008          +1   235     TI_CCxxx0_PKTCTRL0                      EQU     08H        ;Packet automation control
  0009          +1   236     TI_CCxxx0_ADDR                          EQU     09H        ;Device address
  000A          +1   237     TI_CCxxx0_CHANNR                        EQU     0AH        ;Channel number
  000B          +1   238     TI_CCxxx0_FSCTRL1                       EQU     0BH        ;Frequency synthesizer control
  000C          +1   239     TI_CCxxx0_FSCTRL0                       EQU     0CH        ;Frequency synthesizer control
  000D          +1   240     TI_CCxxx0_FREQ2                         EQU     0DH        ;Frequency control word, high by
                             te
  000E          +1   241     TI_CCxxx0_FREQ1                         EQU     0EH        ;Frequency control word, middle 
                             byte
  000F          +1   242     TI_CCxxx0_FREQ0                         EQU     0FH        ;Frequency control word, low byt
                             e
  0010          +1   243     TI_CCxxx0_MDMCFG4                       EQU     10H        ;Modem configuration
  0011          +1   244     TI_CCxxx0_MDMCFG3                       EQU     11H        ;Modem configuration
  0012          +1   245     TI_CCxxx0_MDMCFG2                       EQU     12H        ;Modem configuration
  0013          +1   246     TI_CCxxx0_MDMCFG1                       EQU     13H        ;Modem configuration
  0014          +1   247     TI_CCxxx0_MDMCFG0                       EQU     14H        ;Modem configuration
  0015          +1   248     TI_CCxxx0_DEVIATN                       EQU     15H        ;Modem deviation setting
  0016          +1   249     TI_CCxxx0_MCSM2         EQU     16H        ;Main Radio Cntrl State Machine config
  0017          +1   250     TI_CCxxx0_MCSM1         EQU     17H        ;Main Radio Cntrl State Machine config
  0018          +1   251     TI_CCxxx0_MCSM0         EQU     18H        ;Main Radio Cntrl State Machine config
  0019          +1   252     TI_CCxxx0_FOCCFG        EQU     19H        ;Frequency Offset Compensation config
  001A          +1   253     TI_CCxxx0_BSCFG         EQU     1AH        ;Bit Synchronization configuration
  001B          +1   254     TI_CCxxx0_AGCCTRL2      EQU     1BH        ;AGC control
  001C          +1   255     TI_CCxxx0_AGCCTRL1      EQU     1CH        ;AGC control
  001D          +1   256     TI_CCxxx0_AGCCTRL0      EQU     1DH        ;AGC control
  001E          +1   257     TI_CCxxx0_WOREVT1       EQU     1EH        ;High byte Event 0 timeout
  001F          +1   258     TI_CCxxx0_WOREVT0       EQU     1FH        ;Low byte Event 0 timeout
  0020          +1   259     TI_CCxxx0_WORCTRL       EQU     20H        ;Wake On Radio control
  0021          +1   260     TI_CCxxx0_FREND1        EQU     21H        ;Front end RX configuration
  0022          +1   261     TI_CCxxx0_FREND0        EQU     22H        ;Front end TX configuration
  0023          +1   262     TI_CCxxx0_FSCAL3        EQU     23H        ;Frequency synthesizer calibration
  0024          +1   263     TI_CCxxx0_FSCAL2        EQU     24H        ;Frequency synthesizer calibration
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     6

  0025          +1   264     TI_CCxxx0_FSCAL1        EQU     25H        ;Frequency synthesizer calibration
  0026          +1   265     TI_CCxxx0_FSCAL0        EQU     26H        ;Frequency synthesizer calibration
  0027          +1   266     TI_CCxxx0_RCCTRL1       EQU     27H        ;RC oscillator configuration
  0028          +1   267     TI_CCxxx0_RCCTRL0       EQU     28H        ;RC oscillator configuration
  0029          +1   268     TI_CCxxx0_FSTEST        EQU     29H        ;Frequency synthesizer cal control
  002A          +1   269     TI_CCxxx0_PTEST         EQU     2AH        ;Production test
  002B          +1   270     TI_CCxxx0_AGCTEST       EQU     2BH        ;AGC test
  002C          +1   271     TI_CCxxx0_TEST2         EQU     2CH        ;Various test settings       
  002D          +1   272     TI_CCxxx0_TEST1         EQU     2DH        ;Various test settings
  002E          +1   273     TI_CCxxx0_TEST0         EQU     2EH        ;Various test settings
                +1   274     
                +1   275     ;Strobe commands
  0030          +1   276     TI_CCxxx0_SRES          EQU     30H        ;Reset chip.
  0032          +1   277     TI_CCxxx0_SXOFF         EQU     32H        ;Turn off crystal oscillator.
  0033          +1   278     TI_CCxxx0_SCAL          EQU     33H        ;Calibrate freq synthesizer & disable
  0034          +1   279     TI_CCxxx0_SRX           EQU     34H        ;Enable RX.
  0035          +1   280     TI_CCxxx0_STX           EQU     35H        ;Enable TX.
  0036          +1   281     TI_CCxxx0_SIDLE         EQU     36H        ;Exit RX / TX
  0037          +1   282     TI_CCxxx0_SAFC          EQU     37H        ;AFC adjustment of freq synthesizer
  0038          +1   283     TI_CCxxx0_SWOR          EQU     38H        ;Start automatic RX polling sequence
  0039          +1   284     TI_CCxxx0_SPWD          EQU     39H        ;Enter pwr down mode when CSn goes hi
  003A          +1   285     TI_CCxxx0_SFRX          EQU     3AH        ;Flush the RX FIFO buffer.
  003B          +1   286     TI_CCxxx0_SFTX          EQU     3BH        ;Flush the TX FIFO buffer.
  003C          +1   287     TI_CCxxx0_SWORRST       EQU     3CH        ;Reset real time clock.
  003D          +1   288     TI_CCxxx0_SNOP          EQU     3DH        ;No operation.
                +1   289             
                +1   290     ;Status_registers
  0030          +1   291     TI_CCxxx0_PARTNUM                       EQU     30H        ;Part number
  0031          +1   292     TI_CCxxx0_VERSION                       EQU     31H        ;Current version number
  0032          +1   293     TI_CCxxx0_FREQEST                       EQU     32H        ;Frequency offset estimate
  0033          +1   294     TI_CCxxx0_LQI                           EQU     33H        ;Demodulator estimate for link q
                             uality
  0034          +1   295     TI_CCxxx0_RSSI                          EQU     34H        ;Received signal strength indica
                             tion
  0035          +1   296     TI_CCxxx0_MARCSTATE                     EQU     35H        ;Control state machine state
  0036          +1   297     TI_CCxxx0_WORTIME1                      EQU     36H        ;High byte of WOR timer
  0037          +1   298     TI_CCxxx0_WORTIME0                      EQU     37H        ;Low byte of WOR timer
  0038          +1   299     TI_CCxxx0_PKTSTATUS                     EQU     38H        ;Current GDOx status and packet 
                             status
  0039          +1   300     TI_CCxxx0_VCO_VC_DAC                    EQU     39H        ;Current setting from PLL cal mo
                             dule
  003A          +1   301     TI_CCxxx0_TXBYTES                       EQU     3AH        ;Underflow and # of bytes in TXF
                             IFO
  003B          +1   302     TI_CCxxx0_RXBYTES                       EQU     3BH        ;Overflow and # of bytes in RXFI
                             FO
  007F          +1   303     TI_CCxxx0_NUM_RXBYTES                   EQU     7FH        ;Mask "# of bytes" field in _RXB
                             YTES
                +1   304             
                +1   305     ;Other memory locations
  003E          +1   306     TI_CCxxx0_PATABLE                       EQU     3EH
  003F          +1   307     TI_CCxxx0_TXFIFO                        EQU     3FH
  003F          +1   308     TI_CCxxx0_RXFIFO                        EQU     3FH
                +1   309             
  0082          +1   310     PIN_WAVE_RX                             BIT     p0.2;P2.0;p0.1;p1.0
  00B4          +1   311     PIN_OUTPUT_CLK                          BIT     P3.4;P1.0
  008F          +1   312     REG_WAKE_CLK0                           EQU     08FH
  000F          +1   313     CONST_DATA_VALUE1                       EQU     15;20;20;20
  00DE          +1   314     CONST_DATA_VALUE2                       EQU     208+14;14;255;208+14;14
                +1   315     ;------------------------------------------------------------------------------------------
                             -----
                +1   316     ;µçÔ´¿ØÖÆ
  0095          +1   317     PIN_PWRDWN_LCD                          BIT     p1.5;p1.3        
  00A4          +1   318     Pin_pwrdwn                              BIT     p2.4;P2.7        
  00A3          +1   319     PIN_PWR_GSM                             BIT     p2.3;P2.4        
                +1   320             
                +1   321     ;--- Active ---
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     7

  00B5          +1   322     Pin_unfix                               BIT     P3.5     
  00B3          +1   323     PIN_card_exist                          BIT     p3.3    
  00B2          +1   324     WKO_BK                                  BIT     P3.2     
  0095          +1   325     PIN_PWR_LOWIO                           BIT     p1.5;P2.1        
                +1   326             
                +1   327     ;--- ESAM ---
  0083          +1   328     PIN_ESAM_TX                             BIT     p0.3;P2.6        
  0083          +1   329     PIN_ESAM_RX                             BIT     p0.3;P2.6        
  0085          +1   330     PIN_ESAM_RST                            BIT     p0.5;P2.5        
                +1   331             
                +1   332     ;--- Éù¹â¿ØÖÆ ---
  00C5          +1   333     Pin_Red                                 BIT     p4.5;P4.1        
  00C4          +1   334     Pin_Gre                                 BIT     p4.4;P4.5
                +1   335     
  0095          +1   336     PIN_BELL_01                             BIT     p1.5;P0.3        
  0095          +1   337     PIN_BELL_02                             BIT     p1.5;P0.2        
                +1   338             
                +1   339     ;--- CC1101 ---
                +1   340     ;Pin_CC1101_SS                          BIT     p3.6     
                +1   341     ;PIN_CC1101_SCLK                                BIT     P2.2     
                +1   342     ;PIN_CC1101_MOSI                                BIT     P2.3     
                +1   343     ;PIN_CC1101_MISO                                BIT     p3.7     
                +1   344     ;PIN_CC1101_GDO2                                BIT     P1.6     
                +1   345             
                +1   346     ;--- Òº¾§Ò½Å ---
  0095          +1   347     Pin_LCD_CS                              BIT     p1.5;p1.4        
  0095          +1   348     Pin_LCD_RST                             BIT     P1.5;    
  0095          +1   349     Pin_LCD_DC                              BIT     p1.5;p1.7       
  0095          +1   350     Pin_LCD_SCL                             BIT     p1.5;p3.4       
  0095          +1   351     Pin_LCD_SDA                             BIT     p1.5;p4.3       
                +1   352             
                +1   353     ;--- 522 ---
  0087          +1   354     PIN_522_SCLK                            BIT     P0.7;P0.7        
  00C6          +1   355     PIN_522_MOSI                            BIT     p4.6;P0.5        
  00C1          +1   356     PIN_522_MISO                            BIT     p4.1;P0.4        
  0086          +1   357     Pin_522_SS                              BIT     P0.6;P0.6        
  0084          +1   358     Pin_522_RST                             BIT     p0.4;P4.6        
                +1   359             
  00B0          +1   360     PIN_SOFTSERIALRX                        BIT     P3.0     
  00B1          +1   361     PIN_SOFTSERIALTXH                       BIT     P3.1     
                +1   362             
  0095          +1   363     PIN_PWR_SE                              BIT     p1.5    ;p2.2   ; P2.4  ;       [ GSM ] 
  0095          +1   364     Pin_SW                                  BIT     p1.5    
                +1   365             
                +1   366             
                +1   367     ;fu dand wei
  00A6          +1   368     Pin_ES_Rst                              BIT     p2.6;P2.3       ;p4.0;P4.4      ; P4.4  
  00B4          +1   369     PIN_SE_IO1                              BIT     p3.4;p2.4       ;P4.4;p2.3;p4.4;P2.2    ; P
                             0.5
                +1   370             
                +1   371             
                +1   372     ;--- CC1101 ---
  0097          +1   373     PIN_UART2_TX                            BIT     p1.7    ;p3.6   ; P3.7
  0096          +1   374     PIN_UART2_RX                            BIT     P1.6    ; 
                +1   375             
  0000          +1   376     BUSY                                    BIT     20H.0
                +1   377     ;////////////////////////////////////////////////Ò½Å¶¨Òå///////////////////////////////////
                             //////////////
                +1   378     ;ÉèÎª¸ß
  0091          +1   379     PIN_BK_CE                               BIT     p1.1     
  0090          +1   380     Pin_5823BK_CS                           BIT     P1.0
                +1   381     ;Éè³ÉÊäÈëÎª¸ß                           
  0080          +1   382     Pin_5823BK_MISO                         BIT     p0.0     
  0092          +1   383     Pin_5823BK_IRQ                          BIT     p1.2      
                +1   384     ;   Éè ³É µÍ
  0081          +1   385     Pin_5823BK_MOSI                         BIT     p0.1     
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     8

  00C2          +1   386     Pin_5823BK_SCLK                         BIT     p4.2     
                +1   387      
  0082          +1   388     PIN_WAVE_CHANNEL1                       BIT     p0.2;P2.0        
                +1   389      
                +1   390     ;=====================================================================================
  008F          +1   391     Reg_WakeClk0                            EQU     08fH
  00DC          +1   392     Reg_WakeClk_04                          BIT     CCON.4  ;P3.4
  00DD          +1   393     Reg_WakeClk_05                          BIT     CCON.5  ;P3.5
                +1   394     ;ÉùÃ÷STC12C5628AD ÏµÁÐ MCU ÌØÊâ¹¦ÄÜ¼Ä´æÆ÷µØÖ·
  00B7          +1   395     IPH EQU 0B7H ;ÖÐ¶ÏÓÅÏÈ¼¶¸ßÎ»¼Ä´æÆ÷
  00AE          +1   396     EPCA_LVD EQU IE.6 ;PCA ÖÐ¶ÏºÍ LVD(µÍÑ¹¼ì²â)ÖÐ¶Ï¹²ÏíµÄ×ÜÖÐ¶Ï¿ØÖÆÎ»
  00F9          +1   397     CH EQU 0F9H ;PCA ¼ÆÊÆ÷¸ß8 Î»¡£
  00E9          +1   398     CL EQU 0E9H ;PCA ¼ÆÊÆ÷µÍ8 Î»¡£
                +1   399     
                +1   400     ;------------------------
  00D8          +1   401     CCON EQU 0D8H ;PCA ¿ØÖÆ¼Ä´æÆ÷¡£
  00D8          +1   402     CCF0 EQU CCON.0 ;PCA Ä£¿é0 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00D9          +1   403     CCF1 EQU CCON.1 ;PCA Ä£¿é1 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DA          +1   404     CCF2 EQU CCON.2 ;PCA Ä£¿é2 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DB          +1   405     CCF3 EQU CCON.3 ;PCA Ä£¿é3 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DC          +1   406     CCF4 EQU CCON.4 ;PCA Ä£¿é4 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DD          +1   407     CCF5 EQU CCON.5 ;PCA Ä£¿é5 ÖÐ¶Ï±êÖ¾, ÓÉÓ²¼þÖÃÎ», ±ØÐëÓÉÈí¼þÇå0¡£
  00DE          +1   408     CR EQU CCON.6 ;1:ÔÊÐí PCA ¼ÆÊÆ÷¼ÆÊ, ±ØÐëÓÉÈí¼þÇå0¡£
  00DF          +1   409     CF EQU CCON.7 ;PCA ¼ÆÊÆ÷Òç³ö(CH,CL ÓÉ FFFFH ±äÎª 0000H)±êÖ¾,
                +1   410     ;PCA ¼ÆÊÆ÷Òç³öºóÓÉÓ²¼þÖÃÎ»,±ØÐëÓÉÈí¼þÇå0¡£
                +1   411     ;------------------------
  00D9          +1   412     CMOD EQU 0D9H ;PCA ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   413     
                +1   414     ;CMOD.7 CIDL: idle ×´Ì¬Ê± PCA ¼ÆÊÆ÷ÊÇ·ñ¼ÌÐø¼ÆÊ, 0: ¼ÌÐø¼ÆÊ, 1: Í£Ö¹¼ÆÊ¡£
                +1   415     ;CMOD.2 CPS1: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 1¡£
                +1   416     ;CMOD.1 CPS0: PCA ¼ÆÊÆ÷¼ÆÊÂö³åÔ´Ñ¡ÔñÎ» 0¡£
                +1   417     ; CPS1 CPS0
                +1   418     ; 0 0 Íâ²¿¾§ÌåÆµÂÊ/12¡£
                +1   419     ; 0 1 Íâ²¿¾§ÌåÆµÂÊ/2¡£
                +1   420     ; 1 0 Timer 0 Òç³öÂö³å£¬
                +1   421     ; Timer 0 »¹¿ÉÍ¨¹ AUXR ¼Ä´æÆ÷ÉèÖÃ³É¹¤×÷ÔÚ 12T »ò 1T Ä£Ê½¡£
                +1   422     ; 1 1 ´Ó ECI/P3.4 ½ÅÊäÈëµÄÍâ²¿Ê±ÖÓ¡£
                +1   423     ;CMOD.0 ECF: PCA ¼ÆÊÆ÷Òç³öÖÐ¶ÏÔÊÐíÎ», 1-- ÔÊÐí CF(CCON.7) ²úÉúÖÐ¶Ï¡£
                +1   424     ;------------------------
  00FA          +1   425     CCAP0H EQU 0FAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FB          +1   426     CCAP1H EQU 0FBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FC          +1   427     CCAP2H EQU 0FCH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FD          +1   428     CCAP3H EQU 0FDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FE          +1   429     CCAP4H EQU 0FEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00FF          +1   430     CCAP5H EQU 0FFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷¸ß 8 Î»¡£
  00EA          +1   431     CCAP0L EQU 0EAH ;PCA Ä£¿é0 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EB          +1   432     CCAP1L EQU 0EBH ;PCA Ä£¿é1 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EC          +1   433     CCAP2L EQU 0ECH ;PCA Ä£¿é2 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00ED          +1   434     CCAP3L EQU 0EDH ;PCA Ä£¿é3 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EE          +1   435     CCAP4L EQU 0EEH ;PCA Ä£¿é4 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
  00EF          +1   436     CCAP5L EQU 0EFH ;PCA Ä£¿é5 µÄ²¶×½/ ±È½Ï¼Ä´æÆ÷µÍ 8 Î»¡£
                +1   437     ;------------------------
  00F2          +1   438     PCA_PWM0 EQU 0F2H ;PCA Ä£¿é0 PWM ¼Ä´æÆ÷¡£
  00F3          +1   439     PCA_PWM1 EQU 0F3H ;PCA Ä£¿é1 PWM ¼Ä´æÆ÷¡£
  00F4          +1   440     PCA_PWM2 EQU 0F4H ;PCA Ä£¿é2 PWM ¼Ä´æÆ÷¡£
  00F5          +1   441     PCA_PWM3 EQU 0F5H ;PCA Ä£¿é3 PWM ¼Ä´æÆ÷¡£
  00F6          +1   442     PCA_PWM4 EQU 0F6H ;PCA Ä£¿é4 PWM ¼Ä´æÆ÷¡£
  00F7          +1   443     PCA_PWM5 EQU 0F7H ;PCA Ä£¿é5 PWM ¼Ä´æÆ÷¡£
                +1   444     ;PCA_PWMn: 7 6 5 4 3 2 1 0
                +1   445     ; - - - - - - EPCnH EPCnL
                +1   446     ;B7-B2: ±£Áô
                +1   447     ;B1(EPCnH): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnH ×é³É 9 Î»Ê¡£
                +1   448     ;B0(EPCnL): ÔÚ PWM Ä£Ê½ÏÂ£¬Óë CCAPnL ×é³É 9 Î»Ê¡£
                +1   449     ;------------------------
  00DA          +1   450     CCAPM0 EQU 0DAH ;PCA Ä£¿é0 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DB          +1   451     CCAPM1 EQU 0DBH ;PCA Ä£¿é1 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE     9

  00DC          +1   452     CCAPM2 EQU 0DCH ;PCA Ä£¿é2 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DD          +1   453     CCAPM3 EQU 0DDH ;PCA Ä£¿é3 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DE          +1   454     CCAPM4 EQU 0DEH ;PCA Ä£¿é4 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
  00DF          +1   455     CCAPM5 EQU 0DFH ;PCA Ä£¿é5 µÄ¹¤×÷Ä£Ê½¼Ä´æÆ÷¡£
                +1   456     ;CCAPMn: 7 6 5 4 3 2 1 0
                +1   457     ; - ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   458     ;
                +1   459     ;ECOMn = 1:ÔÊÐí±È½Ï¹¦ÄÜ¡£
                +1   460     ;CAPPn = 1:ÔÊÐíÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   461     ;CAPNn = 1:ÔÊÐíÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   462     ;MATn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, ÔÊÐí CCON ÖÐµÄ CCFn ÖÃÎ»¡£
                +1   463     ;TOGn = 1:µ±Æ¥ÅäÇé¿ö·¢ÉúÊ±, CEXn ½«·­×ª¡£
                +1   464     ;PWMn = 1:½« CEXn ÉèÖÃÎª PWM Êä³ö¡£
                +1   465     ;ECCFn = 1:ÔÊÐí CCON ÖÐµÄ CCFn ´¥·¢ÖÐ¶Ï¡£
                +1   466     ;ECOMn CAPPn CAPNn MATn TOGn PWMn ECCFn
                +1   467     ; 0 0 0 0 0 0 0 00H Î´ÆôÓÃÈÎºÎ¹¦ÄÜ¡£
                +1   468     ; x 1 0 0 0 0 x 21H 16 Î»CEXn ÉÏÉÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   469     ; x 0 1 0 0 0 x 11H 16 Î»CEXn ÏÂ½µÑØ´¥·¢²¶×½¹¦ÄÜ¡£
                +1   470     ; x 1 1 0 0 0 x 31H 16 Î»CEXn ±ßÑØ(ÉÏ¡¢ÏÂÑØ)´¥·¢²¶×½¹¦ÄÜ¡£
                +1   471     ; 1 0 0 1 0 0 x 49H 16 Î»Èí¼þ¶¨Ê±Æ÷¡£
                +1   472     ; 1 0 0 1 1 0 x 4DH 16 Î»¸ßËÙÂö³åÊä³ö¡£
                +1   473     ; 1 0 0 0 0 1 0 42H 8 Î» PWM¡£
                +1   474     ;------------------------------------------------------------------------------
                +1   475     ;==============================================================================
                +1   476     ;//////////////////////////////////////////////¹«¹²¼Ä´æÆ÷ /////////////////////////////////
                             //////////
  00C7          +1   477     ISP_CONTR                               EQU     0C7h
  008F          +1   478     WAKE_CLKO                               EQU     08fh
                +1   479     ;¸½¼ÓµÄ SFR WAKE_CLKO (µØÖ·£º0x8F)
                +1   480     ;b7 - PCAWAKEUP :1, ÔÊÐí PCA ÉÏÉÑØ / ÏÂ½µÑØÖÐ¶Ï »½ÐÑ powerdown¡£
                +1   481     ;b6 - RXD_PIN_IE:1, ÔÊÐí P3.0(RXD) ÏÂ½µÑØÖÃ RI£¬Ò²ÄÜÊ¹ RXD »½ÐÑ powerdown¡£
                +1   482     ;b5 - T1_PIN_IE :1, ÔÊÐí T1/P3.5 ½ÅÏÂ½µÑØÖÃ T1 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T1 ½Å»½ÐÑ powerdown¡£
                +1   483     ;b4 - T0_PIN_IE :1, ÔÊÐí T0/P3.4 ½ÅÏÂ½µÑØÖÃ T0 ÖÐ¶Ï±êÖ¾£¬Ò²ÄÜÊ¹ T0 ½Å»½ÐÑ powerdown¡£
                +1   484     ;b3 - N/A
                +1   485     ;b2 - N/A
                +1   486     ;b1 - T1CLKO : ÔÊÐí T1 µÄÒç³öÔÚP1.1 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T1 Òç³öÂÊ
                +1   487     ;       T1 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / ( 256 - TH1 )
                +1   488     ;       T1 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT1 =( Fosc / 2 ) / 12 / ( 256 - TH1 )
                +1   489     ;b0 -   T0CLKO : ÔÊÐí T0 µÄÒç³öÔÚP1.0 ½ÅÊä³öÊ±ÖÓ£¬Êä³öÊ±ÖÓÆµÂÊ = 1/2 T0 Òç³öÂÊ
                +1   490     ;       T0 ¹¤×÷ÔÚ1T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / ( 256 - TH0)
                +1   491     ;       T0 ¹¤×÷ÔÚ12T Ä£Ê½Ê±µÄÊä³öÆµÂÊCLKOUT0 =( Fosc / 2 ) / 12 / ( 256 - TH0 )
                +1   492     ;--------------------------------------------------------
                +1   493     ;--------------------------------------------------------
  0094          +1   494     REG_5412AD_P0M0                         EQU     094h;093h
  0093          +1   495     REG_5412AD_P0M1                         EQU     093h;094h
                +1   496     
  0092          +1   497     REG_5412AD_P1M0                         EQU     092h;091h
  0091          +1   498     REG_5412AD_P1M1                         EQU     091h;092h
                +1   499     
  0096          +1   500     REG_5412AD_P2M0                         EQU     096h;095h
  0095          +1   501     REG_5412AD_P2M1                         EQU     095h;096h
                +1   502     
  00B2          +1   503     REG_5412AD_P3M0                         EQU     0b2h;0b1h
  00B1          +1   504     REG_5412AD_P3M1                         EQU     0b1h;0b2h
                +1   505     
  00B4          +1   506     REG_5412AD_P4M0                         EQU     0b4h;0b3h
  00B3          +1   507     REG_5412AD_P4M1                         EQU     0b3h;0b4h
                +1   508     ;-------------------------------------------------------------
  008E          +1   509     REG_5412AD_AUXR                         EQU     08EH            ;¸¨Öú¼Ä´æÆ÷
  0085          +1   510     REG_5412AD_spctl                        EQU     085H
  0084          +1   511     REG_5412AD_spstat                       EQU     084H
  0086          +1   512     REG_5412AD_spdat                        EQU     086H
  00C1          +1   513     REG_WDT_CONTR                           EQU     0C1H            ;0E1H;0C1H
  00BB          +1   514     REG_5412AD_P4SW                         EQU     0BBH
  00AB          +1   515     REG_MCU_WKCTH                           EQU     0ABH
  00AA          +1   516     REG_MCU_WKCTL                           EQU     0AAH    
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    10

                +1   517     ;//////////////////////////////////////////////RC522¼Ä´æÆ÷ ////////////////////////////////
                             ///////////////////
  0000          +1   518     REG_RC522_RC522PAGE                     EQU     00H
  0001          +1   519     REG_RC522_CommandReg                    EQU     01H
  0002          +1   520     REG_RC522_ComIEnReg                     EQU     02H
  0003          +1   521     REG_RC522_DivIEnReg                     EQU     03H
  0004          +1   522     REG_RC522_ComIrqReg                     EQU     04H
  0005          +1   523     REG_RC522_DivIrqReg                     EQU     05H
  0006          +1   524     REG_RC522_ErrorReg                      EQU     06h
  0007          +1   525     REG_RC522_Status1Reg                    EQU     07h
  0008          +1   526     REG_RC522_Status2Reg                    EQU     08h
  0009          +1   527     REG_RC522_FIFODataReg                   EQU     09h
  000A          +1   528     REG_RC522_FIFOLevelReg                  EQU     0ah
  000B          +1   529     REG_RC522_WaterLevelReg                 EQU     0bh
  000C          +1   530     REG_RC522_ControlReg                    EQU     0ch
  000D          +1   531     REG_RC522_BitFramingReg                 EQU     0dh
  000E          +1   532     REG_RC522_CollReg                       EQU     0eh
  000F          +1   533     REG_RC522_RFU                           EQU     0fh
  0011          +1   534     REG_RC522_ModeReg                       EQU     11h
  0012          +1   535     REG_RC522_TxModeReg                     EQU     12h
  0013          +1   536     REG_RC522_RxModeReg                     EQU     13h
  0014          +1   537     REG_RC522_TxControlReg                  EQU     14h
  0015          +1   538     REG_RC522_TxAutoReg                     EQU     15h
  0016          +1   539     REG_RC522_TxSelReg                      EQU     16h
  0017          +1   540     REG_RC522_RxSelReg                      EQU     17h
  0018          +1   541     REG_RC522_RxThresholdReg                EQU     18h
  0019          +1   542     REG_RC522_DemodReg                      EQU     19h
  001C          +1   543     REG_RC522_MifareReg                     EQU     1ch
  001F          +1   544     REG_RC522_SerialSpeedReg                EQU     1fh
  0021          +1   545     REG_RC522_CRCResultRegH                 EQU     21h
  0022          +1   546     REG_RC522_CRCResultRegL                 EQU     22h
  0024          +1   547     REG_RC522_ModWidthReg                   EQU     24h
  0026          +1   548     REG_RC522_RFCfgReg                      EQU     26h
  0027          +1   549     REG_RC522_GsNReg                        EQU     27h
  0028          +1   550     REG_RC522_CWGsPReg                      EQU     28h
  0029          +1   551     REG_RC522_ModGsPReg                     EQU     29h
  002A          +1   552     REG_RC522_TModeReg                      EQU     2ah
  002B          +1   553     REG_RC522_TPrescalerReg                 EQU     2bh
  002C          +1   554     REG_RC522_TReloadRegH                   EQU     2ch
  002D          +1   555     REG_RC522_TReloadRegL                   EQU     2dh
  002E          +1   556     REG_RC522_TCounterValueRegH             EQU     2eh
  002F          +1   557     REG_RC522_TCounterValueRegL             EQU     2fh
                +1   558             
                +1   559     ;/////////////////////////////////////////////////Ò»°ãÏµÍ³³£Á¿±í///////////////////////////
                             //////////////////////
  0001          +1   560     CONST_HOLD_5823TX                       EQU     1
  0000          +1   561     CONST_HOLD_5823RX                       EQU     0
                +1   562             
                +1   563             
  00FF          +1   564     CONST_SYS_TradeConfine                  EQU     255                             ;½»Ò×Ê±¼äÏÞ
                             ÖÆ
  000A          +1   565     CONST_SYS_PowerONTimer                  EQU     10                              ;ÉÏµç¶¨Ê±Æ÷
                                  
  0088          +1   566     CONST_SYS_PREFlag                       EQU     088H                            ;
  00AA          +1   567     CONST_SYS_AA                            EQU     0AAH
  0055          +1   568     CONST_SYS_55                            EQU     55H
  0004          +1   569     CONST_SYS_OBUIDLEN                      EQU     4                               ;obuid ³¤¶È
  0008          +1   570     CONST_BSTLIMIT                          EQU     8;20;10                 ;¼«ÏÞBST¸öÊ
  0064          +1   571     CONST_BSTLIMIT02                        EQU     100
                +1   572     
  00FF          +1   573     CONST_VSTLIMIT                          EQU     255     ;100                    ;¼«ÏÞVST¸öÊ
  00FA          +1   574     CONST_Pro_OverTime2S                    EQU     250                             ;³¬Ê±ÏÞÊ±£¬
                             196-246*30=1200MS 
                +1   575     ;/////////////////////////////////////////////////³öÈë¿Ú³£Á¿±í/////////////////////////////
                             ////////////////////
  0003          +1   576     CONST_ETC_INPUT                         EQU     3       ;ETC Èë¿Ú
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    11

  0001          +1   577     CONST_MTC_INPUT                         EQU     1       ;MTC Èë¿Ú
  0001          +1   578     CONST_INPUT_ISEnable                    EQU     1;=1²»ÆôÓÃ =0ÆôÓÃ
                +1   579     ;/////////////////////////////////////////////////×´Ì¬³£Á¿±í///////////////////////////////
                             //////////////////
  0000          +1   580     CONST_STATE_TRUE                        EQU     000H                            ;Ö´ÐÐ³É¹¦
  00FF          +1   581     CONST_STATE_FALSE                       EQU     0FFH                            ;³ÌÐòÖ´ÐÐ³ö
                             ´í
                +1   582     ;Ò»°ãÐÔ´íÎó     01      µ¼ÈëÊ§°Ü        STR_InputFail
                +1   583     ;ºÏÍ¬ºÅ²»Í¬     02      ·Ç·¨µ¼Èë¿¨      STR_IllegalInputCard
                +1   584     ;Ê¹ÓÃ´ÎÊ=FFH    03      µ¼Èë¿¨Ê§Ð§      STR_InputCardInvalid
  0001          +1   585     CONST_STATE_InputFail                   EQU     01
  0002          +1   586     CONST_STATE_IllegalInputCard            EQU     02
  0003          +1   587     CONST_STATE_InputCardInvalid            EQU     03
                +1   588     ;Ò»°ãÐÔ´íÎó     04      ¼¤»îÊ§°Ü        STR_ActiveFail
                +1   589     ;ºÏÍ¬ºÅ²»Í¬     05      ·Ç·¨¼¤»î¿¨      STR_IllegalACTCard
                +1   590     ;Ê¹ÓÃ´ÎÊ=FFH    06      ¼¤»î¿¨Ê§Ð§      STR_ACTCardInvalid
  0004          +1   591     CONST_STATE_ActiveFail                  EQU     04
  0005          +1   592     CONST_STATE_IllegalACTCard              EQU     05
  0006          +1   593     CONST_STATE_ACTCardInvalid              EQU     06
                +1   594             
  0007          +1   595     CONST_STATE_5823INIER                   EQU     07      ;5823³õÊ¼»¯³ö´í
  0008          +1   596     CONST_STATE_5823SleepEr                 EQU     08      ;5823ÐÝÃß³ö´í
  0009          +1   597     CONST_STATE_GetSecureSelFileEr          EQU     09      ;getsecureÑ¡¿¨Ä¿Â¼³ö´í
                +1   598     
  000A          +1   599     CONST_STATE_BaseNinit                   EQU     10      ;Baseinit02º¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  000B          +1   600     CONST_STATE_BaseESAMDF01                EQU     11      ;Baseinit02º¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   601             
  000C          +1   602     CONST_STATE_CARDPreDeal1001             EQU     12      ;Ô¤¶Á1001Ê§°Ü
  000D          +1   603     CONST_STATE_CARDPreDeal0002             EQU     13      ;Ô¤¶Á0002Ê§°Ü
  000E          +1   604     CONST_STATE_CARDPreDeal0012             EQU     14      ;Ô¤¶Á0012Ê§°Ü
  000F          +1   605     CONST_STATE_CARDPreDeal0015             EQU     15      ;Ô¤¶Á0015Ê§°Ü
  0010          +1   606     CONST_STATE_CARDPreDeal0019             EQU     16      ;Ô¤¶Á0019Ê§°Ü
  0011          +1   607     CONST_STATE_CARDPreDeal3f00             EQU     17      ;Ô¤¶Á3f00Ê§°Ü
  0012          +1   608     CONST_STATE_CARDPreDeal81               EQU     18      ;Ô¤¶Á81Ê§°Ü
                +1   609             
  0013          +1   610     CONST_STATE_BaseN01init                 EQU     19      ;Baseinitº¯Ê£¬³õÊ¼»¯¿¨Æ¬Ê§°Ü
  0014          +1   611     CONST_STATE_Base01ESAMDF01              EQU     20      ;Baseinitº¯Ê£¬Ñ¡ESAM¿¨DF01Ê§°Ü
                +1   612             
  0015          +1   613     CONST_STATE_Base01Contact               EQU     21      ;Baseinitº¯Ê£¬Ìøµ½½Ó´¥
  0016          +1   614     CONST_STATE_Base02Contact               EQU     22      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   615             
  0017          +1   616     CONST_STATE_test                        EQU     23      ;Baseinit02º¯Ê£¬Ìøµ½½Ó´¥        
                +1   617             
  0018          +1   618     CONST_STATE_Base02Re                    EQU     24
  0019          +1   619     CONST_STATE_Base02AntiColl              EQU     25
  001A          +1   620     CONST_STATE_Base02Sel                   EQU     26
  001B          +1   621     CONST_STATE_Base02Rats                  EQU     27
                +1   622             
  001C          +1   623     CONST_STATE_Base01Re                    EQU     28
  001D          +1   624     CONST_STATE_Base01AntiColl              EQU     29
  001E          +1   625     CONST_STATE_Base01Sel                   EQU     30
  001F          +1   626     CONST_STATE_Base01Rats                  EQU     31      
                +1   627             
  0020          +1   628     CONST_STATE_MemoryEr                    EQU     32      
  0021          +1   629     CONST_STATE_ExMemoryEr                  EQU     33      
  0022          +1   630     CONST_STATE_ExMemoryEr02                EQU     34      
                +1   631             
  0001          +1   632     CONST_STATE_SERIALACCPET                EQU     001H                            ;´®¿Ú½ÓÊÕ´í
                             Îó
  0002          +1   633     CONST_STATE_SERIALOVERTIME              EQU     CONST_STATE_SERIALACCPET + 1    ;´®¿Ú½ÓÊÕ³¬
                             Ê±
  0003          +1   634     CONST_STATE_ACCEPTOVER                  EQU     CONST_STATE_SERIALOVERTIME + 1  ;´®¿Ú½ÓÊÕÍê
                             ±Ï£¬Ã»ÓÐºóÐø×Ö½Ú 
  0004          +1   635     CONST_STATE_ACCEPTOVERLEN               EQU     CONST_STATE_ACCEPTOVER + 1      ;´®¿Ú½ÓÊÕ³¬
                             ³¤
  0005          +1   636     CONST_STATE_RSTCPUER                    EQU     CONST_STATE_ACCEPTOVERLEN + 1   ;¸´Î»´®¿Ú´í
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    12

                             Îó
  0006          +1   637     CONST_STATE_AUTHER                      EQU     CONST_STATE_RSTCPUER + 1        ;ÈÏÖ¤Ê§°Ü
                +1   638             
                +1   639     ;--- ¹¤×÷Çø³£Á¿¶¨Òå ---
  0000          +1   640     CONST_WORKSTAION_0                      EQU     00H     ;¹¤×÷Çø0
  0001          +1   641     CONST_WORKSTAION_1                      EQU     01H     ;¹¤×÷Çø1
  0002          +1   642     CONST_WORKSTAION_2                      EQU     02H     ;¹¤×÷Çø2        
  0003          +1   643     CONST_WORKSTAION_3                      EQU     03H     ;¹¤×÷Çø3
                +1   644     
                +1   645     ;//////////////////////////////////////¿¨Æ¬Âß¼­³£Á¿¶¨Òå////////////////////////////////////
                             ////////
  0017          +1   646     CONST_CARD_PASS                         EQU     23
  0016          +1   647     CONST_CARD_CONSUME                      EQU     22
                +1   648     ;//////////////////////////////////////GSM³£Á¿¶¨Òå/////////////////////////////////////////
                             /////////
  0002          +1   649     CONST_LHX_FLAG                          EQU     2 ;0-¹ú±êOBU  1-GSM OBU  2-433 OBU
                +1   650     
                +1   651     ;RTC ´ó´°Ê±¼ä                           ;6·ÖÖÓ£¬Æ½¾ùÁ½ÃëÒ»´ÎcellID
                +1   652     ;CONST_RTCOverFlow                      EQU     144;180;180
                +1   653     ;CONST_RTCUartRX                        EQU     24;4;8,12,16,20,24;142;
                +1   654     
  0090          +1   655     CONST_RTCOverFlow                       EQU     144;20;144;6;144;6;12;144
                +1   656     ;CONST_RTCUartRX                                EQU     12
                +1   657     ;CONST_RTCUartRX02                      EQU     142
  0000          +1   658     CONST_Flag_INPUT                        EQU     0
  0001          +1   659     CONST_Flag_OutPUT                       EQU     1
                +1   660     
                +1   661     ;GSM CellID ¼ÇÂ¼Ê¾ÝËùÔÚµÄÎÄ¼þÃû
  0000          +1   662     CONST_Cellfile_H                        EQU     000H
  0009          +1   663     CONST_Cellfile_L                        EQU     09h;030H
                +1   664     
  00EF          +1   665     CONST_ESAMCellfile_H                    EQU     0EFH;000H
  0007          +1   666     CONST_ESAMCellfile_L                    EQU     07H;03h;030H
                +1   667     ;CONST_Cellfile_H                       EQU     000H
                +1   668     ;CONST_Cellfile_L                       EQU     008h
                +1   669     
  00F0          +1   670     CONST_GSM_MaxNum                        EQU     240
                +1   671     ;CONST_GSM_MaxNum                       EQU     5
                +1   672     
  0014          +1   673     CONST_GSM_PJNum                         EQU     20
                +1   674     ;CONST_GSM_PJNum                        EQU     1
                +1   675     
                +1   676     ;RTC Ð¡´°Ê±¼ä;
  0008          +1   677     CONST_MCU_WKCTH                         EQU     008H;0fh;00fH;00fH;00fH
  00FF          +1   678     CONST_MCU_WKCTL                         EQU     0FFH
                +1   679     
                +1   680     ;RTC ÊÇ·ñ¿ªÆô£¬±ê¼ÇÖµ
                +1   681     ;=CONST_RTC_ON ±íÊ¾¿ªÆô
                +1   682     ;= ÆäËü Ã»ÓÐ¿ªÆô
  0055          +1   683     CONST_RTC_ON                            EQU     55H
  00FF          +1   684     CONST_RTC_off                           EQU     0ffH
  0064          +1   685     CONST_SYS_RTCOverTime                   EQU     100
                +1   686     
                +1   687     ;²å¿¨½«obuÖÐCellid¼ÇÂ¼µ¼Èëµ½¿¨Æ¬ÖÐ£¬Ò»´ÎÐ´Èëµ½¿¨Æ¬ÖÐ cellID µÄ×Ö½ÚÊ
  0008          +1   688     CONST_GSM_NUM                           EQU     8               ;40
                +1   689     ;//////////////////////////////////////MF³£Á¿¶¨Òå//////////////////////////////////////////
                             ////////
  0000          +1   690     CONST_MF_READ                           EQU     00H     ;Ö¸ÁîÀàÐÍ ¶Á¿é
  0001          +1   691     CONST_MF_WRITE                          EQU     01H     ;Ö¸ÁîÀàÐÍ Ð´¿é
  0002          +1   692     CONST_MF_DECREMENT                      EQU     02H     ;Ö¸ÁîÀàÐÍ ¿Û¿î
  0003          +1   693     CONST_MF_INCREMENT                      EQU     03H     ;Ö¸ÁîÀàÐÍ ³äÖµ
  0004          +1   694     CONST_MF_RESTOR                         EQU     04H     ;Ö¸ÁîÀàÐÍ ±¸·Ý¿é
                +1   695     
  00C0          +1   696     CONST_MF_RC500DECREMENT                 EQU     0C0H    ;RC500 ¿Û¿î
  00C1          +1   697     CONST_MF_RC500INCREMENT                 EQU     0C1H    ;RC500 ³äÖµ
                +1   698     ;//////////////////////////////////////DSRC³£Á¿¶¨Òå////////////////////////////////////////
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    13

                             //////////
  0004          +1   699     CONST_DSRC_MACCTRL                      EQU     4       ;MAC¿ØÖÆÓò
  0005          +1   700     CONST_DSRC_LLCCTRL                      EQU     5       ;LLC¿ØÖÆÓò
  0006          +1   701     CONST_DSRC_HEAD                         EQU     6       ;×Ö¶Î×ÖÍ·
  0007          +1   702     CONST_DSRC_ACTION                       EQU     7       ;Action
  0008          +1   703     CONST_DSRC_DID                          EQU     8       ;DSRC-DID
  0009          +1   704     CONST_DSRC_ACTIONTYPE                   EQU     9       ;ActionType
  000A          +1   705     CONST_DSRC_CONTAIN                      EQU     10      ;Contain
  000B          +1   706     CONST_DSRC_Fill                         EQU     11      ;Fill
  000C          +1   707     CONST_SSRC_FID                          EQU     12      ;ÎÄ¼þ±êÊ¶£¨FID£©
                +1   708     
  0000          +1   709     CONST_DSRC_FildIDAPPKey                 EQU     0       ;0¨D¨DETC Ó¦ÓÃÃÜÔ¿ÎÄ¼þ
  0001          +1   710     CONST_DSRC_FildIDVehicle                EQU     1       ;1¨D¨DETC Ó¦ÓÃ³µÁ¾ÐÅÏ¢ÎÄ¼þ
  0002          +1   711     CONST_DSRC_FildIDConsume                EQU     2       ;2-ETC Ó¦ÓÃ½»Ò×¼ÇÂ¼ÎÄ¼þ
  0003          +1   712     CONST_DSRC_FildIDHold                   EQU     3       ;3-ETC Ó¦ÓÃ±£ÁôÎÄ¼þ
                +1   713     
  0001          +1   714     CONST_DSRC_ChannelIDICC                 EQU     1
  0002          +1   715     CONST_DSRC_ChannelIDSAM                 EQU     2
                +1   716     ;//////////////////////////////////////AcionType³£Á¿¶¨Òå///////////////////////////////////
                             ////////////
  0000          +1   717     Const_ActionType_GetSecure              EQU     0       ;getSecure
  0001          +1   718     Const_ActionType_SetSecure              EQU     1       ;setSecure
  0002          +1   719     Const_ActionType_GetRand                EQU     2       ;getRand
  0003          +1   720     Const_ActionType_TransferChannel        EQU     3       ;transferChannel
  0004          +1   721     Const_ActionType_SetMMI                 EQU     4       ;SetMMI
                +1   722     ;//////////////////////////////////////Flash³£Á¿¶¨Òå///////////////////////////////////////
                             ///////////
  0058          +1   723     CONST_Flash_SysinfoLen                  EQU     88;39;38+12     ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0004          +1   724     CONST_Flash_0002Len                     EQU     4       ; 0002ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È  
  0028          +1   725     CONST_Flash_0012Len                     EQU     40      ; 0012ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
                +1   726     ;CONST_Flash_0015Len                    EQU     33      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   727     CONST_Flash_0015Len                     EQU     43      ; 0015ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  003C          +1   728     CONST_Flash_0019Len                     EQU     60;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  002B          +1   729     CONST_Flash_0019GBLen                   EQU     43;43   ; 0019ÏµÍ³ÐÅÏ¢ÎÄ¼þ³¤¶È
  0001          +1   730     CONST_Flash_CardTypeLEN                 EQU     1       ; ÉÏ´Î²å¿¨ÊÇ½Ó´¥£¬»¹ÊÇ·Ç½Ó´¥
                +1   731     ;CONST_Flash_SYSPARAMLEN                EQU     1       ; ÏµÍ³²ÎÊ
  0008          +1   732     CONST_Flash_BeaconIDUnixTimeLen         EQU     8       ; ÌìÏßID¼°unixtime
  0001          +1   733     CONST_FALSH_PREFlagLen                  EQU     1       ; Ô¤´¦Àí±ê¼Ç=88,±íÊ¾ÉÏ»ØÔ¤´¦Àí³É¹¦
                +1   734     
                +1   735     ;************************************************************************************
                +1   736     ;ÌØ±ð±¸×¢: ÓÉÓÚÔÚÔ¤¶Á0015/0012/0019Ê±ÔÝ´æÔÚÍâ´æµÄ³¤¶È³¬¹128¸ö×Ö½Ú£¬ËùÒÔ£¬Íâ´æ±äÁ¿µÄÆðÆôÎ»ÖÃ
                             £¬ÒªÔÚConst_Flash_FileLen
                +1   737     ;³¤¶ÈÖ®ºó£¬Const_Flash_FileLen = 8F£¬Èç¹ûÒÔºóConst_Flash_FileLen³¤¶È¸ÄÁË£¬ÄÇÍâ´æµÄÆôÊ¼Î»ÖÃÒ
                             ²Òª¸Ä
                +1   738     ;Íâ´æµÄÆôÊ¼Î»ÖÃ¶¨ÒåÔÚOBUmain.incÖÐXDATA_VARSTARTµÄÖµ
                +1   739     ;************************************************************************************
  00EC          +1   740     Const_Flash_FileLen                     EQU     CONST_Flash_SysinfoLen + CONST_Flash_0015Le
                             n + CONST_Flash_0019Len + CONST_Flash_0012Len + CONST_Flash_0002Len + CONST_Flash_CardTypeLEN 
                +1   741     
  0072          +1   742     CONST_FLASH_Block01                     EQU     72H
                +1   743     
  0072          +1   744     CONST_FLASH_STARTHIGH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
  0000          +1   745     CONST_FLASH_STARTLOW                    EQU     00H                                        
                                  ; FLASH´æ´¢ÇøÆðÆôµØÖ·
                +1   746     
  0072          +1   747     CONST_FLASH_SYSINFOH                    EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ESAMÏµÍ³ÐÅÏ¢ÎÄ¼þ,LEN = 38 BYTE
  0000          +1   748     CONST_FLASH_SYSINFOL                    EQU     00H
                +1   749     
  0072          +1   750     CONST_FLASH_0002H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0002,LEN = 4 BYTE
  0058          +1   751     CONST_FLASH_0002L                       EQU     CONST_FLASH_SYSINFOL + CONST_Flash_SysinfoL
                             en
                +1   752     
  0072          +1   753     CONST_FLASH_0012H                       EQU     CONST_FLASH_Block01;2EH                    
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    14

                                                  ; ÓÃ»§¿¨0012,LEN = 24 BYTE
  005C          +1   754     CONST_FLASH_0012L                       EQU     CONST_FLASH_0002L + CONST_Flash_0002Len
                +1   755     
  0072          +1   756     CONST_FLASH_0015H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0015,LEN = 33 BYTE
  0084          +1   757     CONST_FLASH_0015L                       EQU     CONST_FLASH_0012L + CONST_Flash_0012Len
                +1   758     
  0072          +1   759     CONST_FLASH_0019H                       EQU     CONST_FLASH_Block01;2EH                    
                                                  ; ÓÃ»§¿¨0019,LEN = 43 BYTE      
  00AF          +1   760     CONST_FLASH_0019L                       EQU     CONST_FLASH_0015L + CONST_Flash_0015Len
                +1   761             
                +1   762     ;CONST_FLASH_01BlockH                   EQU     6EH;2EH                                    
                                  ; MF¿¨µÚ1¿éÊ¾Ý
                +1   763     ;CONST_FLASH_01BlockL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len
                +1   764             
                +1   765     ;CONST_FLASH_04BlockH                   EQU     6EH;2EH
                +1   766     ;CONST_FLASH_04BlockL                   EQU     CONST_FLASH_01BlockL + 16                  
                                  ;MF¿¨µÚ4¿éÊ¾Ý
                +1   767             
                +1   768     ;CONST_FLASH_10BlockH                   EQU     6EH;2EH
                +1   769     ;CONST_FLASH_10BlockL                   EQU     CONST_FLASH_04BlockL + 16                  
                                  ;MF¿¨µÚ16¿éÊ¾Ý
                +1   770             
  0072          +1   771     CONST_FLASH_LASTCARDH                   EQU     CONST_FLASH_Block01;2EH                    
                                                  ;ÉÏÒ»´Î²å¿¨ÀàÐÍ
  00EB          +1   772     CONST_FLASH_LASTCARDL                   EQU     CONST_FLASH_0019L + CONST_Flash_0019Len    
                                  ;CONST_FLASH_10BlockL + 16
                +1   773             
                +1   774     ;CONST_FLASH_SYSPARAMH                  EQU     6EH;2EH                         ;ÏµÍ³²ÎÊ
                +1   775     ;CONST_FLASH_SYSPARAML                  EQU     CONST_FLASH_LASTCARDL + 1
                +1   776             
  0072          +1   777     CONST_Flash_BeaconIDUnixTimeH           EQU     CONST_FLASH_Block01;2EH
  00EC          +1   778     CONST_Flash_BeaconIDUnixTimeL           EQU     CONST_FLASH_LASTCARDL + 1       ; 8 byte Ìì
                             ÏßIDºÍunixtimeÊ±¼ä
                +1   779             
  0072          +1   780     CONST_FALSH_PREFlagH                    EQU     CONST_FLASH_Block01;2EH
  00F4          +1   781     CONST_FALSH_PREFlagL                    EQU     CONST_Flash_BeaconIDUnixTimeL + CONST_Flash
                             _BeaconIDUnixTimeLen;1 Byte
                +1   782             
  0072          +1   783     CONST_FALSH_PREFlag02H                  EQU     CONST_FLASH_Block01;2EH
  00F5          +1   784     CONST_FALSH_PREFlag02L                  EQU     CONST_FALSH_PREFlagL + 1        ;1      ;3 
                             Byte
                +1   785              
  0072          +1   786     CONST_FALSH_PREFlag03H                  EQU     CONST_FLASH_Block01;2EH
  00F6          +1   787     CONST_FALSH_PREFlag03L                  EQU     CONST_FALSH_PREFlag02L + 1      ;1      ;3 
                             Byte
                +1   788             
  0072          +1   789     CONST_FALSH_PowerH                      EQU     CONST_FLASH_Block01;2EH
  00F7          +1   790     CONST_FALSH_PowerL                      EQU     CONST_FALSH_PREFlag03L + 1      ;1      ;3 
                             Byte
                +1   791             
                +1   792     ;CONST_FLASH_SysRstH                    EQU     06CH
                +1   793     ;CONST_FLASH_SysRstL                    EQU     000H
                +1   794             
  006C          +1   795     CONST_FLASH_Sys0020H                    EQU     6ch;064H
  0000          +1   796     CONST_FLASH_Sys0020L                    EQU     000H
                +1   797             
  006A          +1   798     CONST_FLASH_Sys0020numH                 EQU     6ah;062H
  0000          +1   799     CONST_FLASH_Sys0020numL                 EQU     000H
                +1   800             
                +1   801     ;CONST_FLASH_SysHVH                     EQU     6CH;68h;062H
                +1   802     ;CONST_FLASH_SysHVL                     EQU     000H
                +1   803             
  00FF          +1   804     const_black_h                           EQU     0ffH
  00FF          +1   805     const_black_l                           EQU     0ffH
                +1   806             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    15

  0000          +1   807     const_white_h                           EQU     000H;40h                                ; 0
                             0h
  0031          +1   808     const_white_l                           EQU     031H;80h                                ; 0
                             0h
                +1   809     ;//////////////////////////////////////////////////////////////////////////////////////////
                             ///////////
                +1   810     ;(¾§Õñ*2)/(32*12*²¨ÌØÂÊ)                
                +1   811     ;CONST_SOF                              EQU     22118400                        ; 24576000
  0000          +1   812     CONST_SOF                               EQU     24576000                        ; µ±Ç°Ö÷Æµ¾
                             §ÌåÆµÂÊ
                +1   813     ;//////////////////////////////////////// PPS ³£Á¿ ¶¨Òå ///////////////////////////////////
                             ////////////
  0010          +1   814     CONST_PPS_9600                          EQU     10H                             
  0013          +1   815     CONST_PPS_38400                         EQU     13H
  0018          +1   816     CONST_PPS_115200                        EQU     18H
  0096          +1   817     CONST_PPS_230000                        EQU     96H
                +1   818     ;//////////////////////////////////////// ´®¿Ú ³£Á¿ ¶¨Òå //////////////////////////////////
                             /////////////
                +1   819             
  0000          +1   820     CONST_BAUD_9600                         EQU     00                              ; ²¨ÌØÂÊ±àÂ
                             ë
  0001          +1   821     CONST_BAUD_38400                        EQU     01
  0002          +1   822     CONST_BAUD_115200                       EQU     02
  0003          +1   823     CONST_BAUD_115200PC                     EQU     03
  0004          +1   824     CONST_BAUD_230000                       EQU     04
  0005          +1   825     CONST_BAUD_38400PC                      EQU     5
  0006          +1   826     CONST_BAUD_9600PC                       EQU     06                              ; ²¨ÌØÂÊ±àÂ
                             ë
                +1   827             
                +1   828     ;ÔÚ24.576MÏÂ´®¿ÚµÚÒ»¸ö×Ö½ÚÉè¶¨ÎªÒª¼ìË÷100MS = CONST_SOF/(10*(FF*FF) = 38 = 26H
  0010          +1   829     CONST_SOFTFIRSTSCANTIME                 EQU     16;8;32;16;8;10H        ; 10h   ;10h    ;10
                             H;0dH;10H    ;  26H
  00FF          +1   830     CONST_SOFTFIRSTSCANTIMEXX               EQU     0FFH    ; ESAM¿¨·Ç³£¹æÖ¸Áî£¬¼Ó´óËÑË÷Ê±¼äÏÞÖ
                             Æ[Èç80 E4Ö¸Áî]
  0070          +1   831     CONST_SOFTSECOND                        EQU     070H    ; 10H   ;  Èí½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼ä
                             ÏÞ³¤ CONST_SOFTSECOND*255¸öÖÜÆÚ
  0015          +1   832     CONST_HANDSECOND                        EQU     15H     ; 01AH[ÔÚ9600²¨ÌØÏÂ£¬Òª·Å¿íµ½1AH];Ó
                             ²½ÓÊÕµÚ¶þ¸ö×Ö½Ú½ÓÊÕÊ±¼äÏÞ³¤ CONST_HANDSECOND*255¸öÖÜÆÚ
                +1   833                                                     
  0014          +1   834     CONST_SOFTBYTESP                        EQU     20;50;4 ;Èí´®¿Ú·¢ËÍ³ÌÐò×Ö½Ú¼ä¾à¿ØÖÆÓë_FUN_L
                             IB_DELAYSIMPLAYº¯ÊÅäºÏÊ¹ÓÃ
                +1   835     ;//////////////////////////////////////// Èí´®¿Ú ³£Á¿ ¶¨Òå ////////////////////////////////
                             ///////////////
                +1   836     ;CONST_BAUD_FULL9600                    EQU     637     ;2560
                +1   837     ;CONST_BAUD_HALF9600                    EQU     317     ;2560
                +1   838     ;CONST_BAUD_FULL9600                    EQU     576     ;2304
                +1   839     ;CONST_BAUD_HALF9600                    EQU     285     ;1152
                +1   840     ;CONST_BAUD_FULL9600                    EQU     76      ;2304
                +1   841     ;CONST_BAUD_HALF9600                    EQU     85      ;1152
                +1   842     ;CONST_BAUD_FULL38400                   EQU     157     ;640
                +1   843     ;CONST_BAUD_HALF38400                   EQU     77      ;213
                +1   844     ;CONST_BAUD_FULL38400                   EQU     141     ;576
                +1   845     ;CONST_BAUD_HALF38400                   EQU     69      ;288
                +1   846     ;CONST_BAUD_FULL115200                  EQU     50      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   847     ;CONST_BAUD_HALF115200                  EQU     21      ;213 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   848     ;CONST_BAUD_FULL115200                  EQU     45      ;192 Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   849     ;CONST_BAUD_HALF115200                  EQU     21      ;96  Ã¿Î»²îÒ»µ½2¸öÂö³å£¬Èç¹û²»ÐÐ£¬¾
                             ÍÖ±½Ó»»ÁËÑÓÊ±º¯Ê
                +1   850             
  00B3          +1   851     CONST_BAUD_FULL9600                     EQU     179     ;[(24576000/9600)*(3.58/6)-12]/4-20
                             0=[2560*(3.59/6)-12]/4-250=(1527-12)/4-200=378.75=379-200=179
  0058          +1   852     CONST_BAUD_HALF9600                     EQU     88      ;[(24576000/9600/2)*(3.58/6)-12]/4-
                             100=[2560*(3.59/6)-12]/4=(763-12)/4-100=187.75=188-100=88
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    16

                +1   853     
  005D          +1   854     CONST_BAUD_FULL38400                    EQU     93      ;[(24576000/38400)*(3.58/6)-12]/4= 
                             [640 * (3.59/6)-12]/4 = (382-12)/4=92.5=93
  002D          +1   855     CONST_BAUD_HALF38400                    EQU     45      ;[(24576000/38400/2)*(3.58/6)-12]/4
                             = [320 * (3.59/6)-12]/4 = (191-12)/4=44.75=45
                +1   856     
  001D          +1   857     CONST_BAUD_FULL115200                   EQU     29      ;[(24576000/115200)*(3.58/6)-12]/4=
                             [213*(3.58/6)-12]/4=(127-12)/4=28.75=29
  000D          +1   858     CONST_BAUD_HALF115200                   EQU     13;     ;[(24576000/115200/2)*(3.58/6)-12]/
                             4=[115.5*(3.58/6)-12]/4=(64-12)/4=13
                +1   859     
  000F          +1   860     CONST_BAUD_FULL230000                   EQU     15;13   ;[(24576000/230000/2)*(3.58/6)]/4 =
                              64/4 = 16
  0008          +1   861     CONST_BAUD_HALF230000                   EQU     8;5     ;[(24576000/230000/2)*(3.58/6)]/4=[
                             115.5*(3.58/6)]/4=32/4=8
                +1   862             
  00B3          +1   863     CONST_BAUD_CURRENTBITFULL               EQU     CONST_BAUD_FULL9600
  0058          +1   864     CONST_BAUD_CURRENTBITHALF               EQU     CONST_BAUD_HALF9600
                +1   865     ;CONST_BAUD_BITHALF12                   EQU     CONST_BAUD_CURRENTBITHALF - 3
                +1   866     ;CONST_BAUD_BITFULL8                    EQU     CONST_BAUD_CURRENTBITFULL - 2
                +1   867     ;CONST_BAUD_BITFULL12                   EQU     CONST_BAUD_CURRENTBITFULL - 3
                +1   868     ;CONST_BAUD_BITFULL20                   EQU     CONST_BAUD_CURRENTBITFULL - 5
                +1   869     ;CONST_BAUD_BITFULL28                   EQU     CONST_BAUD_CURRENTBITFULL - 7
                +1   870             
  000C          +1   871     CONST_BAUD_BITHALF12                    EQU     3 + 9
  000B          +1   872     CONST_BAUD_BITFULL8                     EQU     2 + 9
  000C          +1   873     CONST_BAUD_BITFULL12                    EQU     3 + 9
  000E          +1   874     CONST_BAUD_BITFULL20                    EQU     5 + 9
  0010          +1   875     CONST_BAUD_BITFULL28                    EQU     7 + 9
                +1   876             
                +1   877     ;////////////////////////////////////////  Ó²´®¿Ú ³£Á¿ ¶¨Òå ///////////////////////////////
                             ////////////////
                +1   878     ;CONST_BAUD_HAND115200                  EQU     0FFH;(256 - CONST_SOF/(192*115200))     ;
                +1   879     ;CONST_BAUD_HAND38400                   EQU     0FDH;(256 - (CONST_SOF/(192*38400)))    ;
                +1   880     ;CONST_BAUD_HAND9600                    EQU     0F4H;(256 - CONST_SOF/(192*9600))       ;
                +1   881     
  00FC          +1   882     CONST_BAUD_HAND230000                   EQU     252     ;0FCH   24.576x1000000/(230000x6/3.
                             58=)/16 = 4 = F8H
  00F3          +1   883     CONST_BAUD_HAND115200PC                 EQU     243     ;243    ;24.576 / 0F3H  ;24576000 /
                              32179 = 764 / 16 = 47.7 = 48 = D0H
  00F8          +1   884     CONST_BAUD_HAND115200                   EQU     248     ;0F8H   ;24.576x1000000/(115200x6/3
                             .58=193073)/16 = 8 = F8H             
  00D8          +1   885     CONST_BAUD_HAND38400pc                  EQU     216     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  00E9          +1   886     CONST_BAUD_HAND38400                    EQU     233     ;0E8H   ;24.576x1000000/(38400x6/3.
                             58=64358)/16 = 24 = E8H
  0060          +1   887     CONST_BAUD_HAND9600pc                   EQU     96      ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   888     
  00A3          +1   889     CONST_BAUD_HAND9600                     EQU     163     ;0A1H   ;24.576x1000000/(9600x6/3.5
                             8=16089)/16 = 95 = A1H               
                +1   890     
                +1   891     ;24.576x1000000/(38400x9.6/3.58=102972)/16=15 = f1
                +1   892     ;24.576x1000000/(9600x9.6/3.58=25743)/16=60 = c4h
                +1   893     ;24.576x1000000/(230000x6/3.58=385475)/16=4 = fch
                +1   894     
                +1   895     ;////////////////////////////////////////  Ö¸Áî¼¯ /////////////////////////////////////////
                             //////
                +1   896     ;LL C2H LH 32H
                +1   897     ;ML 62H MH 12H
                +1   898     ;HL 32H HH 12H
                +1   899             
  0001          +1   900     CONST_ACT_L                             EQU     1
  0002          +1   901     CONST_ACT_M                             EQU     2
  0003          +1   902     CONST_ACT_H                             EQU     3
                +1   903             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    17

  0002          +1   904     CONST_ACT_V                             EQU     CONST_ACT_M
                +1   905             
  000A          +1   906     CONST_ACT_L_L                           EQU     0ah;0C2H
  0006          +1   907     CONST_ACT_L_H                           EQU     06h;032H
                +1   908             
  0006          +1   909     CONST_ACT_M_L                           EQU     06h;062H
  0000          +1   910     CONST_ACT_M_H                           EQU     00h;012H
                +1   911             
  0000          +1   912     CONST_ACT_H_L                           EQU     00h;032H
  0001          +1   913     CONST_ACT_H_H                           EQU     01h;012H
                +1   914     
                     915     
                     916             
----                 917             RSEG    ?pr?GSM?Mater
                     918             USING   0
                     919             
                     920     ;----------------------------------------------------------
                     921     ;ÃèÊö£º
                     922     ;       ÓÃ»§²å¿¨£¬Ê±GSMÏà¹ØµÄ´¦Àí
                     923     ;²ÎÊ    
                     924     ;       
                     925     ;Á÷³Ì
                     926     ;       ¼ì²éµ±Ç°³öÈë¿Ú×´Ì¬
                     927     ;       ³ö¿Ú(mtc etc 1,3)
                     928     ;               1.Çå GSM 0020
                     929     ;               2.Çå¿¨Æ¬ 0020
                     930     ;               3.½ûÖ¹ RTC£¬¹Ø GSM £¬¹Ø
                     931     ;       Èë¿Ú(mtc etc 2,4)
                     932     ;               ¼ì²éOBU 0020 µÄÈë¿ÚÊ±¼ä¼°Èë¿ÚµØµãÓë0019ÊÇ·ñÏàÍ¬
                     933     ;                       ÏàÍ¬
                     934     ;                               ¼ì²éOBU CellID×ÜÊÊÇ·ñÏàÍ¬
                     935     ;                                       ÏàÍ¬
                     936     ;                                               ½áÊøÁ÷³Ì
                     937     ;                                       ²»Í¬
                     938     ;                                               ¼ì²é¿¨Æ¬ÉÏ×îºóÒ»¸ö CellID Óë obu ¶ÔÓ¦Î»ÖÃµÄ
                             CelliDÊÇ·ñÏàÍ¬
                     939     ;                                                       ÏàÍ¬
                     940     ;                                                               Ð´ÈëÏà²îµÄcellID
                     941     ;                                                       ²»ÏàÍ¬
                     942     ;                                                               ÖØÐÂ½«OBU0020ÎÄ¼þÖÐµÄIDµ¼Èë
                             µ½¿¨Æ¬ÖÐÈ¥
                     943     ;                       ²»ÏàÍ¬
                     944     ;                               1.µ¼Èë0019µÄ Èë¿ÚÊ±¼ä¼°Èë¿ÚµØµãµ½OBU  0020
                     945     ;                               2.µ¼Èë0019µÄ Èë¿ÚÊ±¼ä¼°Èë¿ÚµØµãµ½¿¨Æ¬ 0020
                     946     ;                               3.½áÊøÁ÷³Ì
                     947     ;                       
                     948     ;Ê¹ÓÃÁË DATA_RXBUF XDATA_TXBUF
                     949     ;Ç°Ìá:  
                     950     ;       Ô¤¶ÁµÄÐÅÏ¢ÊÇ¶ÔµÄ
                     951     
                     952     
                     953     ;Á÷³Ì
                     954     ;¶Á³öÓÃ»§¿¨Ç°5¸öÊ¾Ý+unixtime
                     955     ;¶Á³öESAM¿¨Ç°5¸öÊ¾Ý+unixtime
                     956     ;ÓÃ»§¿¨ = ³ö¿Ú ½áÊø
                     957     ;ÓÃ»§¿¨ = Èë¿Ú 
                     958     ;       ÓÃ»§¿¨Ê±¼äÐ¡ÓÚµÈÓÚESAM
                     959     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                     960     ;                       ¸üÐÂÊ¾ÝÓò
                     961     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 5~56
                     962     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 57~108
                     963     ;                       ¸üÐÂÇ°5 0~4
                     964     ;                       ¸üÐÂunixtime 4 109~113
                     965     ;       ÓÃ»§¿¨Ê±¼ä´óÓÚESAM
                     966     ;               ESAMÖÐ±ÈÓÃ»§Ê±¼äÐÂµÄ¼ÇÂ¼Ç°ÒÆ
                     967     ;                       »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¼°ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    18

                     968     ;                       Ç°ÒÆÊ¾Ý
                     969     ;                       Ç°ÒÆunixtime
                     970     ;                       ¸üÐÂ×Ü¼ÇÂ¼Ê
                     971     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                     972     ;----------------------------------------------------------
0000                 973     _FUN_GSM_Insert:
                     974             
                     975             ;--- RET 
0000 200003   F      976             JB      BIT_INSERTCARD,GSM_Insert_ReadESAMbaseinfo
0003 020000   F      977             JMP     GSM_Insert_Over
                     978             
                     979             ;¶Á³ö ESAM Ç° 5 ¸öÊ¾Ý unixtime
                     980             ;       ¶Á³ö ESAM Ç°5¸öÊ¾Ý
                     981             ;       ¶Á³öESAM unixtime       
0006                 982     GSM_Insert_ReadESAMbaseinfo:
                     983             
                     984             ;xdata_hold [0~4] ESAMÇ°5 0~4
                     985             ;xdata_hold [5~8] ESAM unixtime  109~113
                     986             ;xdata_hold [9~13] User Ç°5 0~4
                     987             ;xdata_hold [14~17] User unixtime  109~113
0006 D200     F      988             SETB    BIT_GETRESULT
0008 C200     F      989             CLR     BIT_ESAMICC
000A 7F00     F      990             MOV     R7,#DATA_RXBUF
000C 7D00     F      991             MOV     R5,#XDATA_TXBUF
000E 7BDF            992             MOV     R3,#0DFH
0010 7A01            993             MOV     R2,#001H
0012 120000   F      994             CALL    _FUN_CARDAPP_SelectFile
                     995             
0015 D200     F      996             SETB    BIT_GETRESULT
0017 C200     F      997             CLR     BIT_ESAMICC
0019 7F00     F      998             MOV     R7,#DATA_RXBUF
001B 7D00     F      999             MOV     R5,#XDATA_TXBUF
001D 7BEF           1000             MOV     R3,#CONST_ESAMCellfile_H
001F 7A07           1001             MOV     R2,#CONST_ESAMCellfile_L
0021 120000   F     1002             CALL    _FUN_CARDAPP_SelectFile
                    1003             
                    1004             ;;xdata_hold [0~4] ESAM Ç°5 0~4
0024 C200     F     1005             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0026 D200     F     1006             SETB    BIT_GETRESULT   
0028 7F00     F     1007             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
002A 7D00     F     1008             MOV     R5,#XDATA_HOLD
002C 7C00           1009             MOV     R4,#00  
002E 7B00           1010             MOV     R3,#00  
0030 7A05           1011             MOV     R2,#05                                                  ;04;03
0032 120000   F     1012             CALL    _FUN_CARDAPP_ReadBinary02
0035 EF             1013             MOV     A,R7
                    1014             ;;---jnz        GSM_Insert_Over
0036 6003           1015             JZ      GSM_Insert_ReadESAMbaseinfo02
0038 020000   F     1016             JMP     GSM_Insert_Over
003B                1017     GSM_Insert_ReadESAMbaseinfo02:  
                    1018             
                    1019             ;xdata_hold [5~8] ESAM unixtime  109~113
003B C200     F     1020             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
003D D200     F     1021             SETB    BIT_GETRESULT   
003F 7F00     F     1022             MOV     R7,#DATA_RXBUF  
0041 7D00     F     1023             MOV     R5,#XDATA_HOLD+5
0043 7C00           1024             MOV     R4,#00                                          
0045 7B6D           1025             MOV     R3,#109                                         
0047 7A04           1026             MOV     R2,#4;04;03
0049 120000   F     1027             CALL    _FUN_CARDAPP_ReadBinary02
004C EF             1028             MOV     A,R7    
                    1029             ;---jnz GSM_Insert_Over
004D 6003           1030             JZ      GSM_Insert_ReadUserbaseinfo
004F 020000   F     1031             JMP     GSM_Insert_Over
                    1032             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    19

                    1033             ;¶Á³öÓÃ»§¿¨Ç°5¸öÊ¾Ý + unixtime
                    1034             ;       ¶Á³öÓÃ»§¿¨Ç°5¸öÊ¾Ý
                    1035             ;       ¶Á³öÓÃ»§¿¨unixtime
                    1036             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1037             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1038             ;xdata_hold [9~13] User Ç°5 0~4
                    1039             ;xdata_hold [14~17] User unixtime  109~113
0052                1040     GSM_Insert_ReadUserbaseinfo:
                    1041             
0052 D200     F     1042             SETB    BIT_GETRESULT
0054 D200     F     1043             SETB    BIT_ESAMICC
0056 7F00     F     1044             MOV     R7,#DATA_RXBUF
0058 7D00     F     1045             MOV     R5,#XDATA_TXBUF
005A 7B10           1046             MOV     R3,#010H
005C 7A01           1047             MOV     R2,#001H
005E 120000   F     1048             CALL    _FUN_CARDAPP_SelectFile
                    1049             
0061 D200     F     1050             SETB    BIT_GETRESULT
0063 D200     F     1051             SETB    BIT_ESAMICC
0065 7F00     F     1052             MOV     R7,#DATA_RXBUF
0067 7D00     F     1053             MOV     R5,#XDATA_TXBUF
0069 7B00           1054             MOV     R3,#CONST_Cellfile_H
006B 7A09           1055             MOV     R2,#CONST_Cellfile_L
006D 120000   F     1056             CALL    _FUN_CARDAPP_SelectFile
                    1057             
                    1058             ;xdata_hold [9~13] User Ç°5 0~4
0070 D200     F     1059             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0072 D200     F     1060             SETB    BIT_GETRESULT
0074 7F00     F     1061             MOV     R7,#DATA_RXBUF
0076 7D00     F     1062             MOV     R5,#XDATA_HOLD+9
0078 7C00           1063             MOV     R4,#00
007A 7B00           1064             MOV     R3,#00
007C 7A05           1065             MOV     R2,#05;04;03
007E 120000   F     1066             CALL    _FUN_CARDAPP_ReadBinary02
0081 EF             1067             MOV     A,R7
                    1068             ;---jnz GSM_Insert_Over
0082 6003           1069             JZ      GSM_Insert_ReadESAMbaseinfo3
0084 020000   F     1070             JMP     GSM_Insert_Over
0087                1071     GSM_Insert_ReadESAMbaseinfo3:
                    1072             
                    1073             ;xdata_hold [14~17] User unixtime  109~113      
0087 D200     F     1074             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0089 D200     F     1075             SETB    BIT_GETRESULT
008B 7F00     F     1076             MOV     R7,#DATA_RXBUF
008D 7D00     F     1077             MOV     R5,#XDATA_HOLD+14
008F 7C00           1078             MOV     R4,#00
0091 7B6D           1079             MOV     R3,#109
0093 7A04           1080             MOV     R2,#4;04;03
0095 120000   F     1081             CALL    _FUN_CARDAPP_ReadBinary02
0098 EF             1082             MOV     A,R7
                    1083             ;---jnz GSM_Insert_Over
0099 6003           1084             JZ      GSM_Insert_ReadESAMbaseinfo4
009B 020000   F     1085             JMP     GSM_Insert_Over
009E                1086     GSM_Insert_ReadESAMbaseinfo4:
                    1087             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1088             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1089             ;xdata_hold [9~13] User Ç°5 0~4
                    1090             ;xdata_hold [14~17] User unixtime  109~113              
                    1091             
009E 7800     F     1092             MOV     R0,#xdata_hold+11
                    1093                     ;MOVX   A,@R0
00A0 758301         1094             MOV     DPH,#1
00A3 8882           1095             MOV     DPL,R0
00A5 E0             1096             MOVX    A,@DPTR
                    1097             
                    1098             ;---CALL        _FUN_TEST_DISPLAY
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    20

00A6 6400           1099             XRL     A,#CONST_Flag_INPUT
                    1100             ;---JZ  GSM_Insert_Input
00A8 7003           1101             JNZ     GSM_Insert_Output
00AA 020000   F     1102             JMP     GSM_Insert_Input
                    1103             
                    1104     ;ÓÃ»§¿¨ = ³ö¿Ú ½áÊø
00AD                1105     GSM_Insert_Output:
                    1106             
                    1107             ;=== Çå unixtime ===
                    1108             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1109             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1110             ;xdata_hold [9~13] User Ç°5 0~4
                    1111             ;xdata_hold [14~17] User unixtime  109~113      
                    1112             ;xdata_hold [29] TMP OFFSET 01
                    1113             ;xdata_hold [30] TMP OFFSET 02
                    1114             
00AD D200     F     1115             SETB    BIT_GETRESULT
00AF C200     F     1116             CLR     BIT_ESAMICC
                    1117             
00B1 7800     F     1118             MOV     R0,#DATA_RXBUF + 5
00B3 7B34           1119             MOV     R3,#52
00B5 E4             1120             CLR     A       
00B6                1121     Insert_Output_loopclr:
00B6 F6             1122             MOV     @R0,A
00B7 08             1123             INC     R0
00B8 DBFC           1124             DJNZ    R3,Insert_Output_loopclr        
                    1125             
00BA 7800     F     1126             MOV     R0,#XDATA_HOLD+30
00BC 7471           1127             MOV     A,#71H
                    1128             ;MOVX   @R0,A
00BE 758301         1129             MOV     DPH,#1 
00C1 8882           1130             MOV     DPL,R0 
00C3 F0             1131             MOVX    @DPTR,A
00C4 E4             1132             CLR     A
00C5 18             1133             DEC     R0
                    1134                     ;MOVX   @R0,A
00C6 758301         1135             MOV     DPH,#1 
00C9 8882           1136             MOV     DPL,R0 
00CB F0             1137             MOVX    @DPTR,A
                    1138             
00CC 7E04           1139             MOV     R6,#4
00CE                1140     Insert_Output_loop:
                    1141             ;assign offset H/L into r4 / r3
00CE 7800     F     1142             MOV     R0,#XDATA_HOLD+29
                    1143                     ;MOVX   A,@R0
00D0 758301         1144             MOV     DPH,#1
00D3 8882           1145             MOV     DPL,R0
00D5 E0             1146             MOVX    A,@DPTR
00D6 FC             1147             MOV     R4,A;#0 
                    1148             
00D7 7800     F     1149             MOV     R0,#XDATA_HOLD+30
                    1150                     ;MOVX   A,@R0
00D9 758301         1151             MOV     DPH,#01
00DC 8882           1152             MOV     DPL,R0
00DE E0             1153             MOVX    A,@DPTR 
00DF FB             1154             MOV     R3,A;#1
                    1155             
00E0 7A34           1156             MOV     R2,#52;#1
                    1157             
00E2 7F00     F     1158             MOV     R7,#DATA_RXBUF
00E4 7D00     F     1159             MOV     R5,#XDATA_TXBUF
                    1160             
00E6 C006           1161             PUSH    AR6
00E8 120000   F     1162             CALL    _FUN_CARDAPP_UpdateBinary
00EB D006           1163             POP     AR6
                    1164             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    21

00ED EF             1165             MOV     A,R7    
00EE 706A           1166             JNZ     GSM_Insert_Over
                    1167             
00F0 7800     F     1168             MOV     R0,#XDATA_HOLD+30
                    1169                     ;MOVX   A,@R0
00F2 758301         1170             MOV     DPH,#1
00F5 8882           1171             MOV     DPL,R0
00F7 E0             1172             MOVX    A,@DPTR
00F8 C3             1173             CLR     C
00F9 3434           1174             ADDC    A,#52
                    1175                     ;MOVX   @R0,A
00FB 758301         1176             MOV     DPH,#1 
00FE 8882           1177             MOV     DPL,R0 
0100 F0             1178             MOVX    @DPTR,A
0101 18             1179             DEC     R0      
                    1180                     ;MOVX   A,@R0
0102 758301         1181             MOV     DPH,#1
0105 8882           1182             MOV     DPL,R0
0107 E0             1183             MOVX    A,@DPTR
0108 3400           1184             ADDC    A,#0
                    1185                     ;MOVX   @R0,A
010A 758301         1186             MOV     DPH,#1 
010D 8882           1187             MOV     DPL,R0 
010F F0             1188             MOVX    @DPTR,A 
0110 DEBC           1189             DJNZ    R6,Insert_Output_loop
                    1190     
                    1191     
                    1192             ;=== ÇåESAMÇ° 5 ×ÜÊ ===
0112 D200     F     1193             SETB    BIT_GETRESULT
0114 C200     F     1194             CLR     BIT_ESAMICC
                    1195             
0116 7800     F     1196             MOV     R0,#DATA_RXBUF + 5
0118 7400           1197             mov     a,#0
011A F6             1198             mov     @r0,a   
011B 08             1199             inc     r0
011C F6             1200             mov     @r0,a   
011D 08             1201             inc     r0
011E F6             1202             mov     @r0,a   
011F 08             1203             inc     r0
0120 F6             1204             mov     @r0,a   
0121 08             1205             inc     r0
0122 F6             1206             mov     @r0,a   
                    1207     
                    1208     
                    1209             ;assign offset H/L into r4 / r3
0123 7C00           1210             MOV     R4,#0   
0125 7B00           1211             MOV     R3,#0
0127 7A05           1212             MOV     R2,#5
                    1213             
0129 7F00     F     1214             MOV     R7,#DATA_RXBUF
012B 7D00     F     1215             MOV     R5,#XDATA_TXBUF
                    1216             
012D 120000   F     1217             CALL    _FUN_CARDAPP_UpdateBinary
0130 EF             1218             MOV     A,R7
0131 7027           1219             jnz     GSM_Insert_Over
                    1220     
                    1221     
                    1222             ;=== ÇåÓÃ»§¿¨×ÜÊ ===
0133 D200     F     1223             SETB    BIT_GETRESULT
0135 D200     F     1224             setb    BIT_ESAMICC
                    1225             
0137 7800     F     1226             MOV     R0,#DATA_RXBUF + 5
0139 7400           1227             mov     a,#0
013B F6             1228             mov     @r0,a
                    1229             
                    1230             ;assign offset H/L into r4 / r3
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    22

013C 7C00           1231             MOV     R4,#0   
013E 7B01           1232             MOV     R3,#1
0140 7A01           1233             MOV     R2,#1           
                    1234             
0142 7F00     F     1235             MOV     R7,#DATA_RXBUF
0144 7D00     F     1236             MOV     R5,#XDATA_TXBUF
                    1237             
0146 120000   F     1238             CALL    _FUN_CARDAPP_UpdateBinary
                    1239     
0149 800F           1240             JMP     GSM_Insert_Over
                    1241     
                    1242     ;ÓÃ»§¿¨ = Èë¿Ú 
                    1243     ;       ÓÃ»§¿¨Ê±¼äÐ¡ÓÚµÈÓÚESAM
                    1244     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1245     ;                       ¸üÐÂÊ¾ÝÓò
                    1246     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 5~56
                    1247     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 57~108
                    1248     ;                       ¸üÐÂÇ°5 0~4
                    1249     ;                       ¸üÐÂunixtime 4 109~113
                    1250     ;       ÓÃ»§¿¨Ê±¼ä´óÓÚESAM
                    1251     ;               ESAMÖÐ±ÈÓÃ»§Ê±¼äÐÂµÄ¼ÇÂ¼Ç°ÒÆ
                    1252     ;                       »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¼°ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1253     ;                       Ç°ÒÆÊ¾Ý
                    1254     ;                       Ç°ÒÆunixtime
                    1255     ;                       ¸üÐÂ×Ü¼ÇÂ¼Ê
                    1256     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1257             
014B                1258     GSM_Insert_Input:
                    1259     ;ÓÃ»§¿¨ = Èë¿Ú 
                    1260             
                    1261             ;±È½Ï unixtime
                    1262     ;       ÓÃ»§¿¨Ê±¼äÐ¡ÓÚµÈÓÚESAM
                    1263     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1264     ;       ÓÃ»§¿¨Ê±¼ä´óÓÚESAM
                    1265     ;               ESAMÖÐ±ÈÓÃ»§Ê±¼äÐÂµÄ¼ÇÂ¼Ç°ÒÆ
                    1266     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1267             
                    1268             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1269             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1270             ;xdata_hold [9~13] User Ç°5 0~4
                    1271             ;xdata_hold [14~17] User unixtime  109~113
014B                1272     GSM_Insert_compareunixtime:
                    1273             
                    1274             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1275             ;µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1276             ;1¡¢Ð´ÂúESAM Ç°0~4 /ËùÓÐ¼ÇÂ¼ 5~108 / unixtime 109~112
                    1277             ;2¡¢Çå¿ÕËùÓÐÓÃ»§¿¨ÐÅÏ¢
                    1278             ;user < esam
                    1279             ;>= µ¼³ö
                    1280             ;3¡¢¼ì²é 0~112 ÊÇ·ñÏàÍ¬ 
                    1281             ;CALL   _FUN_GSM_ESAMToUserCard;        r5<=r7 ·µ»Ø C=1
                    1282             ;CALL   _FUN_GSM_ESAMQY
                    1283             ;mov    a,#37
                    1284             ;call   _fun_test_display
                    1285             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1286     ;       r5<=r7 ·µ»Ø C=1
                    1287     ;       R5>r7 ·µ»ØC = 0
                    1288     
                    1289     ;       r5<r7 ·µ»Ø C=1
                    1290     ;       R5>=r7 ·µ»ØC = 0
014B 7D00     F     1291             MOV     r5,#xdata_hold+5
014D 7F00     F     1292             MOV     r7,#xdata_hold+14
014F 120000   F     1293             CALL    _fun_GSM_compareunixtime2
                    1294             
                    1295             
                    1296             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    23

                    1297             ;mov    a,#37
                    1298             ;clr    a
                    1299             ;mov    acc.0,c 
                    1300             ;call   _fun_test_display
                    1301             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       
                    1302             
0152 5003           1303             JNC     GSM_Insert_XiaoDunYu
                    1304     ;       ÓÃ»§¿¨Ê±¼ä´óÓÚESAM
                    1305     ;               ESAMÖÐ±ÈÓÃ»§Ê±¼äÐÂµÄ¼ÇÂ¼Ç°ÒÆ
                    1306     ;                       »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¼°ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1307     ;                       Ç°ÒÆÊ¾Ý
                    1308     ;                       Ç°ÒÆunixtime
                    1309     ;                       ¸üÐÂ×Ü¼ÇÂ¼Ê
                    1310     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ   
0154                1311     GSM_Insert_DaYu:
0154 120000   F     1312             CALL    _FUN_GSM_ESAMQY
                    1313             ;CALL   _FUN_GSM_ESAMToUserCard 
                    1314     ;       ÓÃ»§¿¨Ê±¼äÐ¡ÓÚµÈÓÚESAM
                    1315     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    1316     ;                       ¸üÐÂÊ¾ÝÓò
                    1317     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 5~56
                    1318     ;                               ¸üÐÂÊ¾ÝÓò52¸öbyte 57~108
                    1319     ;                       ¸üÐÂÇ°5 0~4
                    1320     ;                       ¸üÐÂunixtime 4 109 ~ 113
0157                1321     GSM_Insert_XiaoDunYu:
0157 120000   F     1322             CALL    _FUN_GSM_ESAMToUserCard
015A                1323     GSM_Insert_Over:
015A 22             1324             RET
                    1325     ;////////////////////////////////////////////////////////////////
                    1326     ;²ÎÊ
                    1327     ;       r5      xdata 4 byte
                    1328     ;       r7      xdata 4 byte
                    1329     ;       r5<=r7 ·µ»Ø C=1
                    1330     ;       R5>r7 ·µ»ØC = 0
015B                1331     _fun_GSM_compareunixtime:
                    1332             
015B 850500         1333             MOV     AR0,AR5
015E 850701         1334             MOV     AR1,AR7
                    1335             
                    1336             ;ÏàÍ¬£¬·µ»ØC=1
0161 7B04           1337             MOV     R3,#4
0163                1338     GSM_compareunixtime_LOOP1:
                    1339                     ;MOVX   A,@R0
0163 758301         1340             MOV     DPH,#1
0166 8882           1341             MOV     DPL,R0
0168 E0             1342             MOVX    A,@DPTR
0169 F5F0           1343             MOV     B,A
                    1344                     ;MOVX   A,@R1
016B 758301         1345             MOV     DPH,#1
016E 8982           1346             MOV     DPL,R1
0170 E0             1347             MOVX    A,@DPTR
0171 65F0           1348             XRL     A,B
0173 7007           1349             JNZ     GSM_compareunixtime_S
0175 08             1350             INC     R0
0176 09             1351             INC     R1      
0177 DBEA           1352             DJNZ    R3,GSM_compareunixtime_LOOP1    
                    1353                     
0179 D3             1354             SETB    C
017A 8025           1355             JMP     GSM_compareunixtime_OVER
                    1356             
                    1357             ;²»ÏàÍ¬£¬R5<r7 ·µ»Ø C=1 £¬·ñÔò£¬·µ»ØC=0
017C                1358     GSM_compareunixtime_S:
017C 850500         1359             MOV     AR0,AR5
017F 850701         1360             MOV     AR1,AR7
0182 09             1361             INC     R1
0183 08             1362             INC     R0
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    24

0184 09             1363             INC     R1
0185 08             1364             INC     R0
0186 09             1365             INC     R1
0187 08             1366             INC     R0
                    1367     
0188 C3             1368             CLR     C
0189 7B04           1369             MOV     R3,#4
018B                1370     GSM_compareunixtime_LOOP2:
                    1371                     ;MOVX   A,@R1
018B 758301         1372             MOV     DPH,#1
018E 8982           1373             MOV     DPL,R1
0190 E0             1374             MOVX    A,@DPTR
0191 F5F0           1375             MOV     B,A
                    1376                     ;MOVX   A,@R0
0193 758301         1377             MOV     DPH,#1
0196 8882           1378             MOV     DPL,R0
0198 E0             1379             MOVX    A,@DPTR 
0199 95F0           1380             SUBB    A,B
                    1381     
019B 18             1382             DEC     R0
019C 19             1383             DEC     R1
019D DBEC           1384             DJNZ    R3,GSM_compareunixtime_LOOP2
                    1385             
019F 4000           1386             JC      GSM_compareunixtime_OVER
                    1387             
01A1                1388     GSM_compareunixtime_OVER:
                    1389             
01A1 22             1390             RET
                    1391     ;--------------------------------------------------------------------------
                    1392     ;²ÎÊ
                    1393     ;       r5      xdata 4 byte
                    1394     ;       r7      xdata 4 byte
                    1395     ;       r5<r7 ·µ»Ø C=1
                    1396     ;       R5>=r7 ·µ»ØC = 0
                    1397     ;--------------------------------------------------------------------------
01A2                1398     _fun_GSM_compareunixtime2:
                    1399                     
                    1400             ;R5<r7 ·µ»Ø C=1 £¬·ñÔò£¬·µ»ØC=0
01A2                1401     GSM_compareunixtime2_S:
01A2 850500         1402             MOV     AR0,AR5
01A5 850701         1403             MOV     AR1,AR7
01A8 09             1404             INC     R1
01A9 08             1405             INC     R0
01AA 09             1406             INC     R1
01AB 08             1407             INC     R0
01AC 09             1408             INC     R1
01AD 08             1409             INC     R0
                    1410     
01AE C3             1411             CLR     C
01AF 7B04           1412             MOV     R3,#4
01B1                1413     GSM_compareunixtime2_LOOP2:
                    1414                     ;MOVX   A,@R1
01B1 758301         1415             MOV     DPH,#1
01B4 8982           1416             MOV     DPL,R1
01B6 E0             1417             MOVX    A,@DPTR
01B7 F5F0           1418             MOV     B,A
                    1419                     ;MOVX   A,@R0
01B9 758301         1420             MOV     DPH,#1
01BC 8882           1421             MOV     DPL,R0
01BE E0             1422             MOVX    A,@DPTR 
01BF 95F0           1423             SUBB    A,B
                    1424             
01C1 18             1425             DEC     R0
01C2 19             1426             DEC     R1
01C3 DBEC           1427             DJNZ    R3,GSM_compareunixtime2_LOOP2
                    1428                     
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    25

                    1429             ;JC     GSM_compareunixtime2_OVER       
01C5                1430     GSM_compareunixtime2_OVER:
                    1431     
01C5 22             1432             RET
                    1433     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1434     ;ÃèÊö
                    1435     ;       »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¼°ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1436     ;Ç°Ìá
                    1437     ;       1.ÒÑ¾ß±¸²Ù×÷ESAM usercardµÄÌõ¼þ£¬Èç´ò¿ªÍâÎ§£¬¿¨Æ¬ÒÑ¸´Î»³É¹¦
                    1438     ;       2.ÒÑÑ¡ÔñESAM df01 ef07 ¼° usercard 1001 0009 ÎÄ¼þ
                    1439     ;²ÎÊ
                    1440             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1441             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1442             ;xdata_hold [9~13] User Ç°5 0~4
                    1443             ;xdata_hold [14~17] User unixtime  109~113      
                    1444             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1445             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1446             
                    1447             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1448             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1449             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1450             
                    1451             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1452             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1453             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ      
                    1454             ;xdata_hold [26] unixtime Æ«ÒÆÁ¿ 01 lingshi
                    1455             ;xdata_hold [27] unixtime Æ«ÒÆÁ¿ 02 
                    1456             ;xdata_hold [28] unixtime×Ü³¤¶È
                    1457     ;·µ»ØÖµ£º
                    1458     ;       R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1459     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
01C6                1460     _FUN_GSM_GETRecordCode:
                    1461             
                    1462             ;unixtime Æ«ÒÆÁ¿ 01 / 02
01C6 7800     F     1463             MOV     R0,#xdata_hold + 26
01C8 E4             1464             CLR     A
                    1465                     ;MOVX   @R0,A
01C9 758301         1466             MOV     DPH,#1 
01CC 8882           1467             MOV     DPL,R0 
01CE F0             1468             MOVX    @DPTR,A
01CF 08             1469             INC     R0
01D0 7471           1470             MOV     A,#113
                    1471                     ;MOVX   @R0,A
01D2 758301         1472             MOV     DPH,#1 
01D5 8882           1473             MOV     DPL,R0 
01D7 F0             1474             MOVX    @DPTR,A
                    1475             ;unixtime×Ü³¤¶È
01D8 7800     F     1476             MOV     R0,#xdata_hold + 28
01DA 7900     F     1477             MOV     R1,#xdata_hold + 1
                    1478                     ;MOVX   A,@R1
01DC 758301         1479             MOV     DPH,#1
01DF 8982           1480             MOV     DPL,R1
01E1 E0             1481             MOVX    A,@DPTR
                    1482             ;---JZ  GSM_GETRecordCode_ER
01E2 7003           1483             JNZ     GSM_GETRecordCode_RVLOOPPre
01E4 020000   F     1484             JMP     GSM_GETRecordCode_ER
01E7                1485     GSM_GETRecordCode_RVLOOPPre:
01E7 F5F0           1486             MOV     B,A     
01E9 7404           1487             MOV     A,#4
01EB A4             1488             MUL     AB
                    1489                     ;MOVX   @R0,A
01EC 758301         1490             MOV     DPH,#1 
01EF 8882           1491             MOV     DPL,R0 
01F1 F0             1492             MOVX    @DPTR,A
                    1493             
01F2 7E01           1494             MOV     R6,#1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    26

01F4                1495     GSM_GETRecordCode_RVLOOP:
                    1496             
                    1497             ;=== ¶Á³öESAM Unixtime===
01F4 C200     F     1498             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
01F6 D200     F     1499             SETB    BIT_GETRESULT   
01F8 7F00     F     1500             MOV     R7,#DATA_RXBUF  
01FA 7D00     F     1501             MOV     R5,#XDATA_TXBUF
                    1502             
01FC 7800     F     1503             MOV     R0,#xdata_hold + 26
                    1504                     ;MOVX   A,@R0
01FE 758301         1505             MOV     DPH,#1
0201 8882           1506             MOV     DPL,R0
0203 E0             1507             MOVX    A,@DPTR
0204 FC             1508             MOV     R4,A
                    1509             
0205 7800     F     1510             MOV     R0,#xdata_hold + 27
                    1511                     ;MOVX   A,@R0
0207 758301         1512             MOV     DPH,#1
020A 8882           1513             MOV     DPL,R0
020C E0             1514             MOVX    A,@DPTR
020D FB             1515             MOV     R3,A
                    1516             
020E 7800     F     1517             MOV     R0,#xdata_hold + 28
                    1518                     ;MOVX   A,@R0
0210 758301         1519             MOV     DPH,#1
0213 8882           1520             MOV     DPL,R0
0215 E0             1521             MOVX    A,@DPTR
0216 B46800         1522             CJNE    A,#104,$+3
0219 500A           1523             JNC     GSM_GETRecordCode_ReadNum
                    1524             ;ÐèÒª¶Á³öµÄÊÁ¿
021B                1525     GSM_GETRecordCode_ReadNumSY:;¶ÁÊ£Óà²¿·Ý
021B FA             1526             MOV     R2,A
021C E4             1527             CLR     A
                    1528                     ;MOVX   @R0,A
021D 758301         1529             MOV     DPH,#1 
0220 8882           1530             MOV     DPL,R0 
0222 F0             1531             MOVX    @DPTR,A
0223 802B           1532             JMP     GSM_GETRecordCode_ReadNumOV
0225                1533     GSM_GETRecordCode_ReadNum:
0225 7A68           1534             MOV     R2,#104 
0227 C3             1535             CLR     C
0228 9468           1536             subb    a,#104
                    1537                     ;MOVX   @R0,A
022A 758301         1538             MOV     DPH,#1 
022D 8882           1539             MOV     DPL,R0 
022F F0             1540             MOVX    @DPTR,A
                    1541             
0230 7800     F     1542             MOV     R0,#xdata_hold + 27
                    1543                     ;MOVX   A,@R0
0232 758301         1544             MOV     DPH,#1
0235 8882           1545             MOV     DPL,R0
0237 E0             1546             MOVX    A,@DPTR 
0238 C3             1547             clr     c
0239 3468           1548             addc    a,#104
                    1549                     ;MOVX   @R0,A
023B 758301         1550             MOV     DPH,#1 
023E 8882           1551             MOV     DPL,R0 
0240 F0             1552             MOVX    @DPTR,A
0241 18             1553             dec     r0
                    1554                     ;MOVX   A,@R0
0242 758301         1555             MOV     DPH,#1
0245 8882           1556             MOV     DPL,R0
0247 E0             1557             MOVX    A,@DPTR
0248 3400           1558             addc    a,#0
                    1559                     ;MOVX   @R0,A
024A 758301         1560             MOV     DPH,#1 
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    27

024D 8882           1561             MOV     DPL,R0 
024F F0             1562             MOVX    @DPTR,A
                    1563             
0250                1564     GSM_GETRecordCode_ReadNumOV:
0250 C002           1565             PUSH    AR2
0252 C006           1566             PUSH    AR6
0254 120000   F     1567             CALL    _FUN_CARDAPP_ReadBinary02
0257 D006           1568             POP     AR6
0259 D002           1569             POP     AR2
025B EF             1570             MOV     A,R7
025C 704E           1571             JNZ     GSM_GETRecordCode_ER    
                    1572     ;GSM_GETRecordCode_TWORV:
                    1573             
                    1574     
025E 7D00     F     1575             MOV     r5,#XDATA_TXBUF
                    1576             
0260 7404           1577             MOV     A,#4
0262 F5F0           1578             MOV     B,A
0264 EA             1579             MOV     a,r2
0265 84             1580             DIV     ab
0266 FB             1581             MOV     R3,A
                    1582             
0267                1583     GSM_GETRecordCode_Loop:
                    1584             
                    1585     ;       r5      xdata 4 byte
                    1586     ;       r7      xdata 4 byte
                    1587     ;       r5<r7 ·µ»Ø C=1
                    1588     ;       R5>=r7 ·µ»ØC = 0
                    1589             ;xdata_hold [14~17] User unixtime  109~113      
0267 7F00     F     1590             MOV     r7,#xdata_hold+14       
0269 C006           1591             push    ar6
026B C005           1592             PUSH    AR5
026D C003           1593             push    ar3
026F 120000   F     1594             CALL    _fun_GSM_compareunixtime2
0272 D003           1595             pop     ar3
0274 D005           1596             POP     AR5
0276 D006           1597             pop     ar6
                    1598             
0278 501D           1599             JNC     GSM_GETRecordCode_over
027A 0506           1600             INC     ar6
                    1601             
                    1602             ;unixtime Ïòºó¶ÁÒ»Ìõ¼ÇÂ¼
027C 0D             1603             INC     R5
027D 0D             1604             INC     R5
027E 0D             1605             INC     R5
027F 0D             1606             INC     R5      
0280 DBE5           1607             DJNZ    R3,GSM_GETRecordCode_loop
                    1608             
                    1609             ;²é¿´ÊÇ·ñ»¹´æÃ»ÓÐÃ»¶ÁÍêµÄunixtime
0282 7800     F     1610             MOV     R0,#xdata_hold + 28
                    1611                     ;MOVX   A,@R0
0284 758301         1612             MOV     DPH,#1
0287 8882           1613             MOV     DPL,R0
0289 E0             1614             MOVX    A,@DPTR
                    1615             ;---JNZ GSM_GETRecordCode_RVLOOP
028A 6003           1616             JZ      GSM_GETRecordCode_RVLOOPZZ
028C 020000   F     1617             JMP     GSM_GETRecordCode_RVLOOP
028F                1618     GSM_GETRecordCode_RVLOOPZZ:
                    1619     
                    1620             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ
028F 74FF           1621             MOV     A,#0FFH
0291 F507           1622             MOV     AR7,A
                    1623             
                    1624             ;R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
0293 7400           1625             MOV     A,#0
0295 FD             1626             MOV     R5,A
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    28

                    1627             
0296 22             1628             RET
                    1629     
                    1630             ;JMP    GSM_GETRecordCode_ER
                    1631             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ£¬Ã»ÓÐ·ûºÏÊ±£¬Ê¹µÚÒ»¸ö¼ÇÂ¼ºÅÓë×ÜÊÒ»ÖÁ
                    1632             ;SETB   C
                    1633             ;DEC    AR6
                    1634             ;MOV    AR7,AR6 
                    1635             ;R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1636             ;mov    r5,#0
0297                1637     GSM_GETRecordCode_over:
                    1638             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ
0297 850607         1639             MOV     AR7,AR6
                    1640             
029A EF             1641             MOV     A,R7
029B 6401           1642             XRL     A,#1
029D 600D           1643             JZ      GSM_GETRecordCode_ER
                    1644             
                    1645             ;R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1646             ;CLR    C
                    1647             ;MOV    A,#1
                    1648             ;MOV    B,A
                    1649             ;MOV    A,R7
                    1650             ;SUBB   A,B
                    1651             ;MOV    R5,A
                    1652             
029F 7800     F     1653             MOV     R0,#XDATA_HOLD+1
                    1654                     ;MOVX   A,@R0
02A1 758301         1655             MOV     DPH,#1
02A4 8882           1656             MOV     DPL,R0
02A6 E0             1657             MOVX    A,@DPTR
02A7 C3             1658             clr     c
02A8 9F             1659             SUBB    A,R7
02A9 04             1660             INC     A
02AA FD             1661             MOV     R5,A
                    1662             
02AB 22             1663             RET
                    1664             
02AC                1665     GSM_GETRecordCode_ER:
                    1666             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ
02AC 7400           1667             MOV     A,#0
02AE F507           1668             MOV     AR7,A
                    1669             
                    1670             ;R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
02B0 FD             1671             MOV     R5,A
                    1672             
02B1 22             1673             RET     
                    1674     
                    1675     
                    1676     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    1677     ;ÃèÊö
                    1678     ;               ESAMÖÐ±ÈÓÃ»§Ê±¼äÐÂµÄ¼ÇÂ¼Ç°ÒÆ
                    1679     ;Ç°Ìá
                    1680     ;       1.ÒÑ¾ß±¸²Ù×÷ESAM usercardµÄÌõ¼þ£¬Èç´ò¿ªÍâÎ§£¬¿¨Æ¬ÒÑ¸´Î»³É¹¦
                    1681     ;       2.ÒÑÑ¡ÔñESAM df01 ef07 ¼° usercard 1001 0009 ÎÄ¼þ
                    1682     ;Á÷³Ì£º
                    1683     ;                       »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¼°ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1684     ;                               R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1685     ;                       Ç°ÒÆÊ¾Ý
                    1686     ;                               ÐèÒªÒÆ¶¯µÄÊ¾Ý³¤¶È>52£¬·Ö¶þ´ÎÒÆ£¬²»È»Ò»´ÎÒÆ
                    1687     ;                                       ½«ÒªÒÆ¶¯µÄÊ¾Ý£¬¶Áµ½xdata_txbufÖÐ
                    1688     ;                                       ½«ÒªÒÆ¶¯µÄÊ¾Ý£¬Ð´»ØESAMÖÐ
                    1689     ;                       Ç°ÒÆunixtime
                    1690     ;                                       ½«ÒªÒÆ¶¯µÄÊ¾Ý£¬¶Áµ½xdata_txbufÖÐ
                    1691     ;                                       ½«ÒªÒÆ¶¯µÄÊ¾Ý£¬Ð´»ØESAMÖÐ
                    1692     ;                       ¸üÐÂ×Ü¼ÇÂ¼Ê
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    29

                    1693     ;                                       
                    1694     ;²ÎÊ
                    1695             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1696             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1697             ;xdata_hold [9~13] User Ç°5 0~4
                    1698             ;xdata_hold [14~17] User unixtime  109~113      
                    1699             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1700             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1701             
                    1702             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1703             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1704             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1705             
                    1706             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1707             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1708             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ      
                    1709             ;xdata_hold [26] unixtime Æ«ÒÆÁ¿ 01 lingshi
                    1710             ;xdata_hold [27] unixtime Æ«ÒÆÁ¿ 02 lingshi
                    1711             ;xdata_hold [28] unixtime×Ü³¤¶È     lingshi
                    1712             
                    1713             ;xdata_hold [29] TMP OFFSET 01
                    1714             ;xdata_hold [30] TMP OFFSET 02
                    1715             
                    1716             
                    1717     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
02B2                1718     _FUN_GSM_ESAMQY:
                    1719             
02B2 120000   F     1720             CALL    _FUN_GSM_GETRecordCode
02B5 ED             1721             MOV     A,R5
                    1722             
                    1723             ;mov    a,r7
                    1724             ;call   _fun_test_display
                    1725             
                    1726             ;---JZ  GSM_ESAMQY_OVER
02B6 701C           1727             jnz     GSM_ESAMQY_KS
02B8 EF             1728             MOV     A,R7
02B9 6016           1729             JZ      GSM_ESAMQY_NORecord
                    1730             
                    1731             ;=== Çå×ÜÊ ===
02BB D200     F     1732             SETB    BIT_GETRESULT
02BD C200     F     1733             CLR     BIT_ESAMICC
                    1734             
02BF 7800     F     1735             MOV     R0,#DATA_RXBUF + 5
02C1 7400           1736             mov     a,#0
02C3 F6             1737             mov     @r0,a
                    1738             
                    1739             ;assign offset H/L into r4 / r3
02C4 7C00           1740             MOV     R4,#0   
02C6 7B01           1741             MOV     R3,#1
02C8 7A01           1742             MOV     R2,#1           
                    1743             
02CA 7F00     F     1744             MOV     R7,#DATA_RXBUF
02CC 7D00     F     1745             MOV     R5,#XDATA_TXBUF
                    1746             
02CE 120000   F     1747             CALL    _FUN_CARDAPP_UpdateBinary
                    1748             
                    1749             
02D1                1750     GSM_ESAMQY_NORecord:
02D1 020000   F     1751             jmp     GSM_ESAMQY_OVER
02D4                1752     GSM_ESAMQY_KS:
                    1753             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1754             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1755             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1756             
                    1757             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1758             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    30

                    1759             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1760             
                    1761             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1762             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1763             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    1764             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
02D4 7800     F     1765             MOV     R0,#xdata_hold + 18
02D6 EF             1766             MOV     A,R7
                    1767                     ;MOVX   @R0,A
02D7 758301         1768             MOV     DPH,#1 
02DA 8882           1769             MOV     DPL,R0 
02DC F0             1770             MOVX    @DPTR,A
                    1771             
02DD 7800     F     1772             MOV     R0,#xdata_hold + 19
02DF ED             1773             MOV     A,R5
                    1774                     ;MOVX   @R0,A
02E0 758301         1775             MOV     DPH,#1 
02E3 8882           1776             MOV     DPL,R0 
02E5 F0             1777             MOVX    @DPTR,A
                    1778             
                    1779             ;JNZ    GSM_ESAMQY_COMPY
                    1780             ;JMP    GSM_ESAMQY_OVER
02E6                1781     GSM_ESAMQY_COMPY:
                    1782             
                    1783             ;xdata_hold [0~4] ESAMÇ°5 0~4
                    1784             ;xdata_hold [5~8] ESAM unixtime  109~113
                    1785             ;xdata_hold [9~13] User Ç°5 0~4
                    1786             ;xdata_hold [14~17] User unixtime  109~113      
                    1787             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1788             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1789             
                    1790             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1791             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1792             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1793     
                    1794             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1795             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1796             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ      
                    1797     
02E6 7800     F     1798             MOV     R0,#xdata_hold + 18
02E8 7900     F     1799             MOV     R1,#xdata_hold + 21
                    1800                     ;MOVX   A,@R0
02EA 758301         1801             MOV     DPH,#1
02ED 8882           1802             MOV     DPL,R0
02EF E0             1803             MOVX    A,@DPTR
02F0 14             1804             DEC     A
                    1805             
02F1 C3             1806             CLR     C
02F2 F5F0           1807             MOV     B,A
02F4 7402           1808             MOV     A,#2
02F6 A4             1809             MUL     AB
                    1810                     ;MOVX   @R1,A
02F7 758301         1811             MOV     DPH,#1
02FA 8982           1812             MOV     DPL,R1
02FC F0             1813             MOVX    @DPTR,A
02FD 19             1814             DEC     R1
02FE E5F0           1815             MOV     A,B
                    1816                     ;MOVX   @R1,A
0300 758301         1817             MOV     DPH,#1
0303 8982           1818             MOV     DPL,R1
0305 F0             1819             MOVX    @DPTR,A
                    1820             
0306 C3             1821             CLR     C
0307 09             1822             INC     R1
                    1823                     ;MOVX   A,@R1
0308 758301         1824             MOV     DPH,#1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    31

030B 8982           1825             MOV     DPL,R1
030D E0             1826             MOVX    A,@DPTR
030E 3405           1827             ADDC    A,#5
                    1828                     ;MOVX   @R1,A
0310 758301         1829             MOV     DPH,#1
0313 8982           1830             MOV     DPL,R1
0315 F0             1831             MOVX    @DPTR,A
0316 19             1832             DEC     R1
                    1833                     ;MOVX   A,@R1
0317 758301         1834             MOV     DPH,#1
031A 8982           1835             MOV     DPL,R1
031C E0             1836             MOVX    A,@DPTR
031D 3400           1837             ADDC    A,#0
                    1838                     ;MOVX   @R1,A
031F 758301         1839             MOV     DPH,#1
0322 8982           1840             MOV     DPL,R1
0324 F0             1841             MOVX    @DPTR,A
                    1842             
                    1843             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
0325 7900     F     1844             MOV     R1,#xdata_hold + 22
0327 7800     F     1845             MOV     R0,#xdata_hold + 19
                    1846                     ;MOVX   A,@R0
0329 758301         1847             MOV     DPH,#1
032C 8882           1848             MOV     DPL,R0
032E E0             1849             MOVX    A,@DPTR
032F C3             1850             CLR     C
0330 F5F0           1851             MOV     B,A
0332 7402           1852             MOV     A,#2
0334 A4             1853             MUL     AB
                    1854                     ;MOVX   @R1,A
0335 758301         1855             MOV     DPH,#1
0338 8982           1856             MOV     DPL,R1
033A F0             1857             MOVX    @DPTR,A
                    1858             
                    1859             
                    1860             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1861             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1862             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
033B 7800     F     1863             MOV     R0,#xdata_hold + 18
033D 7900     F     1864             MOV     R1,#xdata_hold + 24
                    1865                     ;MOVX   A,@R0
033F 758301         1866             MOV     DPH,#1
0342 8882           1867             MOV     DPL,R0
0344 E0             1868             MOVX    A,@DPTR
0345 14             1869             DEC     A
                    1870             
0346 C3             1871             CLR     C
0347 F5F0           1872             MOV     B,A
0349 7404           1873             MOV     A,#4
034B A4             1874             MUL     AB
                    1875                     ;MOVX   @R1,A
034C 758301         1876             MOV     DPH,#1
034F 8982           1877             MOV     DPL,R1
0351 F0             1878             MOVX    @DPTR,A
0352 19             1879             DEC     R1
0353 E5F0           1880             MOV     A,B
                    1881                     ;MOVX   @R1,A
0355 758301         1882             MOV     DPH,#1
0358 8982           1883             MOV     DPL,R1
035A F0             1884             MOVX    @DPTR,A
                    1885             
035B C3             1886             CLR     C
035C 09             1887             INC     R1
                    1888                     ;MOVX   A,@R1
035D 758301         1889             MOV     DPH,#1
0360 8982           1890             MOV     DPL,R1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    32

0362 E0             1891             MOVX    A,@DPTR
0363 3471           1892             ADDC    A,#113
                    1893                     ;MOVX   @R1,A
0365 758301         1894             MOV     DPH,#1
0368 8982           1895             MOV     DPL,R1
036A F0             1896             MOVX    @DPTR,A
036B 19             1897             DEC     R1
                    1898                     ;MOVX   A,@R1
036C 758301         1899             MOV     DPH,#1
036F 8982           1900             MOV     DPL,R1
0371 E0             1901             MOVX    A,@DPTR
0372 3400           1902             ADDC    A,#0
                    1903                     ;MOVX   @R1,A
0374 758301         1904             MOV     DPH,#1
0377 8982           1905             MOV     DPL,R1
0379 F0             1906             MOVX    @DPTR,A
                    1907             
                    1908             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
037A 7900     F     1909             MOV     R1,#xdata_hold + 25
037C 7800     F     1910             MOV     R0,#xdata_hold + 19
                    1911                     ;MOVX   A,@R0
037E 758301         1912             MOV     DPH,#1
0381 8882           1913             MOV     DPL,R0
0383 E0             1914             MOVX    A,@DPTR
0384 C3             1915             CLR     C
0385 F5F0           1916             MOV     B,A
0387 7404           1917             MOV     A,#4
0389 A4             1918             MUL     AB
                    1919                     ;MOVX   @R1,A
038A 758301         1920             MOV     DPH,#1
038D 8982           1921             MOV     DPL,R1
038F F0             1922             MOVX    @DPTR,A
                    1923             
                    1924             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1925             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1926             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1927     
                    1928             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1929             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1930             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ      
                    1931     
                    1932             ;xdata_hold [29] TMP OFFSET 01 Ç°ÒÆÄ¿±êµØÖ· offset01
                    1933             ;xdata_hold [30] TMP OFFSET 02 Ç°ÒÆÄ¿±êµØÖ· offset02
                    1934             
                    1935             
                    1936             
                    1937             
0390 7800     F     1938             MOV     R0,#xdata_hold+30
0392 7405           1939             MOV     A,#5
                    1940                     ;MOVX   @R0,A
0394 758301         1941             MOV     DPH,#1 
0397 8882           1942             MOV     DPL,R0 
0399 F0             1943             MOVX    @DPTR,A
039A 18             1944             DEC     R0
039B E4             1945             CLR     A
                    1946                     ;MOVX   @R0,A
039C 758301         1947             MOV     DPH,#1 
039F 8882           1948             MOV     DPL,R0 
03A1 F0             1949             MOVX    @DPTR,A
03A2                1950     GSM_ESAMQY_ReadESAMdataS:
03A2 7800     F     1951             MOV     R0,#xdata_hold+22
                    1952                     ;MOVX   A,@R0
03A4 758301         1953             MOV     DPH,#1
03A7 8882           1954             MOV     DPL,R0
03A9 E0             1955             MOVX    A,@DPTR
                    1956             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    33

                    1957             ;CALL   _FUN_TEST_DISPLAY
                    1958             ;CJNE   A,#53,$+3
03AA B43400         1959             CJNE    A,#52,$+3
03AD 506B           1960             JNC     GSM_ESAMQY_ReadESAMdataTWO
03AF                1961     GSM_ESAMQY_ReadESAMdataOne:
                    1962     
                    1963             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1964             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    1965             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    1966             
                    1967             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1968             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1969             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    1970             
                    1971             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    1972             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    1973             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    1974     
                    1975             ;¶Á³öESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
03AF C200     F     1976             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
03B1 D200     F     1977             SETB    BIT_GETRESULT   
03B3 7F00     F     1978             MOV     R7,#DATA_RXBUF  
03B5 7D00     F     1979             MOV     R5,#XDATA_TXBUF
03B7 7800     F     1980             MOV     R0,#xdata_hold+20
                    1981                     ;MOVX   A,@R0
03B9 758301         1982             MOV     DPH,#1
03BC 8882           1983             MOV     DPL,R0
03BE E0             1984             MOVX    A,@DPTR
03BF FC             1985             MOV     R4,A    
                    1986             
03C0 7800     F     1987             MOV     R0,#xdata_hold+21
                    1988                     ;MOVX   A,@R0
03C2 758301         1989             MOV     DPH,#1
03C5 8882           1990             MOV     DPL,R0
03C7 E0             1991             MOVX    A,@DPTR
03C8 FB             1992             MOV     R3,A            
                    1993             
03C9 7800     F     1994             MOV     R0,#xdata_hold+22
                    1995                     ;MOVX   A,@R0
03CB 758301         1996             MOV     DPH,#1
03CE 8882           1997             MOV     DPL,R0
03D0 E0             1998             MOVX    A,@DPTR
03D1 FA             1999             MOV     R2,A    
                    2000             
03D2 120000   F     2001             CALL    _FUN_CARDAPP_ReadBinary02
03D5 EF             2002             MOV     A,R7    
                    2003             ;---JNZ GSM_ESAMQY_OVER
03D6 6003           2004             jz      GSM_ESAMQY_ReadESAMdataOneup
03D8 020000   F     2005             JMP     GSM_ESAMQY_OVER
                    2006             
03DB                2007     GSM_ESAMQY_ReadESAMdataOneup:
                    2008             ;Ð´ESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
03DB D200     F     2009             SETB    BIT_GETRESULT
03DD C200     F     2010             CLR     BIT_ESAMICC
                    2011             
03DF 7D00     F     2012             MOV     R5,#DATA_RXBUF + 5
03E1 7F00     F     2013             MOV     R7,#XDATA_TXBUF
                    2014             ;MOV    R3,#52
03E3 7800     F     2015             MOV     R0,#xdata_hold+22
                    2016                     ;MOVX   A,@R0
03E5 758301         2017             MOV     DPH,#1
03E8 8882           2018             MOV     DPL,R0
03EA E0             2019             MOVX    A,@DPTR
03EB FB             2020             MOV     R3,A            
03EC 120000   F     2021             CALL    _FUN_LIB_XDATATODATA
                    2022             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    34

03EF 7800     F     2023             MOV     R0,#xdata_hold+29
                    2024                     ;MOVX   A,@R0
03F1 758301         2025             MOV     DPH,#1
03F4 8882           2026             MOV     DPL,R0
03F6 E0             2027             MOVX    A,@DPTR
03F7 FC             2028             MOV     R4,A    
03F8 7800     F     2029             MOV     R0,#xdata_hold+30
                    2030                     ;MOVX   A,@R0
03FA 758301         2031             MOV     DPH,#1
03FD 8882           2032             MOV     DPL,R0
03FF E0             2033             MOVX    A,@DPTR
0400 FB             2034             MOV     R3,A            
0401 7800     F     2035             MOV     R0,#xdata_hold+22
                    2036                     ;MOVX   A,@R0
0403 758301         2037             MOV     DPH,#1
0406 8882           2038             MOV     DPL,R0
0408 E0             2039             MOVX    A,@DPTR
0409 FA             2040             MOV     R2,A
                    2041             
040A 7F00     F     2042             MOV     R7,#DATA_RXBUF
040C 7D00     F     2043             MOV     R5,#XDATA_TXBUF
                    2044             
040E 120000   F     2045             CALL    _FUN_CARDAPP_UpdateBinary
                    2046             
0411 EF             2047             MOV     A,R7    
                    2048             ;CALL   _fun_test_display
                    2049             ;---JNZ GSM_ESAMQY_OVER 
                    2050             ;---JMP GSM_ESAMQY_ReadESAMdataOVER
                    2051             ;---JZ  GSM_ESAMQY_ReadESAMdataOVER
0412 7003           2052             JNZ     GSM_ESAMQY_ReadESAMdataOVERZZ
0414 020000   F     2053             JMP     GSM_ESAMQY_ReadESAMdataOVER
0417                2054     GSM_ESAMQY_ReadESAMdataOVERZZ:
0417 020000   F     2055             JMP     GSM_ESAMQY_OVER
041A                2056     GSM_ESAMQY_ReadESAMdataTWO:
                    2057             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2058             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2059             
                    2060             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2061             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2062             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    2063             
                    2064             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2065             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2066             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    2067             ;¶Á³öESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
041A C200     F     2068             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
041C D200     F     2069             SETB    BIT_GETRESULT   
041E 7F00     F     2070             MOV     R7,#DATA_RXBUF  
0420 7D00     F     2071             MOV     R5,#XDATA_TXBUF
                    2072             
0422 7800     F     2073             MOV     R0,#xdata_hold+20
                    2074                     ;MOVX   A,@R0
0424 758301         2075             MOV     DPH,#1
0427 8882           2076             MOV     DPL,R0
0429 E0             2077             MOVX    A,@DPTR
042A FC             2078             MOV     R4,A    
                    2079             ;CALL   _FUN_TEST_DISPLAY
042B 7800     F     2080             MOV     R0,#xdata_hold+21
                    2081                     ;MOVX   A,@R0
042D 758301         2082             MOV     DPH,#1
0430 8882           2083             MOV     DPL,R0
0432 E0             2084             MOVX    A,@DPTR
0433 FB             2085             MOV     R3,A    
                    2086             ;CALL   _FUN_TEST_DISPLAY
0434 7A34           2087             MOV     R2,#52  
0436 120000   F     2088             CALL    _FUN_CARDAPP_ReadBinary02
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    35

0439 EF             2089             MOV     A,R7    
                    2090             
                    2091             ;---JNZ GSM_ESAMQY_OVER
043A 6003           2092             JZ      GSM_ESAMQY_ReadESAMdataTWOup
043C 020000   F     2093             JMP     GSM_ESAMQY_OVER
043F                2094     GSM_ESAMQY_ReadESAMdataTWOup:
                    2095             ;Ð´ESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
                    2096             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2097             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2098             
                    2099             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2100             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2101             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    2102             
                    2103             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2104             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2105             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    2106     
                    2107             ;xdata_hold [29] TMP OFFSET 01 Ç°ÒÆÄ¿±êµØÖ· offset01
                    2108             ;xdata_hold [30] TMP OFFSET 02 Ç°ÒÆÄ¿±êµØÖ· offset02
                    2109     
                    2110             ;MOV    R0,#xdata_hold+30       
043F D200     F     2111             SETB    BIT_GETRESULT
0441 C200     F     2112             CLR     BIT_ESAMICC
                    2113             
0443 7D00     F     2114             MOV     R5,#DATA_RXBUF + 5
0445 7F00     F     2115             MOV     R7,#XDATA_TXBUF
0447 7B34           2116             MOV     R3,#52  
0449 120000   F     2117             CALL    _FUN_LIB_XDATATODATA
                    2118             
                    2119             ;assign offset H/L into r4 / r3
044C 7800     F     2120             MOV     R0,#xdata_hold+29
                    2121                     ;MOVX   A,@R0
044E 758301         2122             MOV     DPH,#1
0451 8882           2123             MOV     DPL,R0
0453 E0             2124             MOVX    A,@DPTR
0454 FC             2125             MOV     R4,A    
                    2126             
0455 7800     F     2127             MOV     R0,#xdata_hold+30
                    2128                     ;MOVX   A,@R0
0457 758301         2129             MOV     DPH,#1
045A 8882           2130             MOV     DPL,R0
045C E0             2131             MOVX    A,@DPTR
045D FB             2132             MOV     R3,A            
                    2133     
045E 7A34           2134             MOV     R2,#52                                  
0460 7F00     F     2135             MOV     R7,#DATA_RXBUF
0462 7D00     F     2136             MOV     R5,#XDATA_TXBUF
0464 120000   F     2137             CALL    _FUN_CARDAPP_UpdateBinary
                    2138             
0467 EF             2139             MOV     A,R7
                    2140             ;CALL   _fun_test_display
                    2141             ;---JNZ GSM_ESAMQY_OVER
0468 6003           2142             JZ      GSM_ESAMQY_ReadESAMdataTWOJS
046A 020000   F     2143             JMP     GSM_ESAMQY_OVER
046D                2144     GSM_ESAMQY_ReadESAMdataTWOJS:
                    2145             
                    2146             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2147             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2148             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2149             
                    2150             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2151             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2152             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    2153             
                    2154             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    36

                    2155             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2156             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    2157             
                    2158             ;xdata_hold [29] TMP OFFSET 01 Ç°ÒÆÄ¿±êµØÖ· offset01
                    2159             ;xdata_hold [30] TMP OFFSET 02 Ç°ÒÆÄ¿±êµØÖ· offset02            
                    2160             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ·
046D 7800     F     2161             MOV     R0,#xdata_hold+21
                    2162             
                    2163             ;MOVX   A,@R0
046F 758301         2164             MOV     DPH,#1
0472 8882           2165             MOV     DPL,R0
0474 E0             2166             MOVX    A,@DPTR
0475 C3             2167             CLR     C
0476 3434           2168             ADDC    A,#52
                    2169             
                    2170                     ;MOVX   @R0,A
0478 758301         2171             MOV     DPH,#1 
047B 8882           2172             MOV     DPL,R0 
047D F0             2173             MOVX    @DPTR,A
047E 18             2174             DEC     R0
                    2175                     ;MOVX   A,@R0
047F 758301         2176             MOV     DPH,#1
0482 8882           2177             MOV     DPL,R0
0484 E0             2178             MOVX    A,@DPTR
0485 3400           2179             ADDC    A,#0
                    2180                     ;MOVX   @R0,A
0487 758301         2181             MOV     DPH,#1 
048A 8882           2182             MOV     DPL,R0 
048C F0             2183             MOVX    @DPTR,A
                    2184             
                    2185             ;xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
048D 7800     F     2186             MOV     R0,#xdata_hold+22
                    2187                     ;MOVX   A,@R0
048F 758301         2188             MOV     DPH,#1
0492 8882           2189             MOV     DPL,R0
0494 E0             2190             MOVX    A,@DPTR
0495 C3             2191             CLR     C
0496 9434           2192             SUBB    A,#52
                    2193                     ;MOVX   @R0,A
0498 758301         2194             MOV     DPH,#1 
049B 8882           2195             MOV     DPL,R0 
049D F0             2196             MOVX    @DPTR,A 
049E 6023           2197             JZ      GSM_ESAMQY_ReadESAMdataOVER
                    2198             
                    2199             
04A0 7800     F     2200             MOV     R0,#xdata_hold+30
                    2201                     ;MOVX   A,@R0
04A2 758301         2202             MOV     DPH,#1
04A5 8882           2203             MOV     DPL,R0
04A7 E0             2204             MOVX    A,@DPTR
04A8 C3             2205             CLR     C
04A9 3434           2206             ADDC    A,#52
                    2207                     ;MOVX   @R0,A
04AB 758301         2208             MOV     DPH,#1 
04AE 8882           2209             MOV     DPL,R0 
04B0 F0             2210             MOVX    @DPTR,A
04B1 18             2211             DEC     R0
                    2212                     ;MOVX   A,@R0
04B2 758301         2213             MOV     DPH,#1
04B5 8882           2214             MOV     DPL,R0
04B7 E0             2215             MOVX    A,@DPTR
04B8 3400           2216             ADDC    A,#0
                    2217                     ;MOVX   @R0,A
04BA 758301         2218             MOV     DPH,#1 
04BD 8882           2219             MOV     DPL,R0 
04BF F0             2220             MOVX    @DPTR,A
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    37

                    2221             
04C0 020000   F     2222             JMP     GSM_ESAMQY_ReadESAMdataS
                    2223             
04C3                2224     GSM_ESAMQY_ReadESAMdataOVER:
                    2225     
                    2226     
04C3 7800     F     2227             MOV     R0,#xdata_hold+30
04C5 7471           2228             MOV     A,#113
                    2229                     ;MOVX   @R0,A
04C7 758301         2230             MOV     DPH,#1 
04CA 8882           2231             MOV     DPL,R0 
04CC F0             2232             MOVX    @DPTR,A
04CD 18             2233             DEC     R0
04CE E4             2234             CLR     A
                    2235                     ;MOVX   @R0,A
04CF 758301         2236             MOV     DPH,#1 
04D2 8882           2237             MOV     DPL,R0 
04D4 F0             2238             MOVX    @DPTR,A
                    2239     
                    2240     ;///////////////////////////////////////////////////////////////////
                    2241     ;GSM_ESAMQY_QYESAMUnixS:
04D5                2242     GSM_ESAMQY_QYESAMUnixS2:
04D5 7800     F     2243             MOV     R0,#xdata_hold+25
                    2244                     ;MOVX   A,@R0
04D7 758301         2245             MOV     DPH,#1
04DA 8882           2246             MOV     DPL,R0
04DC E0             2247             MOVX    A,@DPTR
04DD B43400         2248             CJNE    A,#52,$+3
04E0 506B           2249             JNC     GSM_ESAMQY_QYESAMUnixTWO
04E2                2250     GSM_ESAMQY_QYESAMUnixOne:
                    2251             
                    2252             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2253             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2254             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2255             
                    2256             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2257             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2258             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    2259             
                    2260             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2261             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2262             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    2263             
                    2264             ;xdata_hold [29] TMP OFFSET 01 Ç°ÒÆÄ¿±êµØÖ· offset01
                    2265             ;xdata_hold [30] TMP OFFSET 02 Ç°ÒÆÄ¿±êµØÖ· offset02    
                    2266     
                    2267             ;¶Á³öESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
04E2 C200     F     2268             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
04E4 D200     F     2269             SETB    BIT_GETRESULT   
04E6 7F00     F     2270             MOV     R7,#DATA_RXBUF  
04E8 7D00     F     2271             MOV     R5,#XDATA_TXBUF
04EA 7800     F     2272             MOV     R0,#xdata_hold+23
                    2273                     ;MOVX   A,@R0
04EC 758301         2274             MOV     DPH,#1
04EF 8882           2275             MOV     DPL,R0
04F1 E0             2276             MOVX    A,@DPTR
04F2 FC             2277             MOV     R4,A    
                    2278             
04F3 7800     F     2279             MOV     R0,#xdata_hold+24
                    2280                     ;MOVX   A,@R0
04F5 758301         2281             MOV     DPH,#1
04F8 8882           2282             MOV     DPL,R0
04FA E0             2283             MOVX    A,@DPTR
04FB FB             2284             MOV     R3,A            
                    2285             
04FC 7800     F     2286             MOV     R0,#xdata_hold+25
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    38

                    2287                     ;MOVX   A,@R0
04FE 758301         2288             MOV     DPH,#1
0501 8882           2289             MOV     DPL,R0
0503 E0             2290             MOVX    A,@DPTR
0504 FA             2291             MOV     R2,A    
                    2292             
0505 120000   F     2293             CALL    _FUN_CARDAPP_ReadBinary02
0508 EF             2294             MOV     A,R7
                    2295             ;---JNZ GSM_ESAMQY_OVER
0509 6003           2296             JZ      GSM_ESAMQY_QYESAMUnixOneUP
050B 020000   F     2297             JMP     GSM_ESAMQY_OVER
050E                2298     GSM_ESAMQY_QYESAMUnixOneUP:
                    2299             
                    2300             ;Ð´ESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
050E D200     F     2301             SETB    BIT_GETRESULT
0510 C200     F     2302             CLR     BIT_ESAMICC
                    2303             
0512 7D00     F     2304             MOV     R5,#DATA_RXBUF + 5
0514 7F00     F     2305             MOV     R7,#XDATA_TXBUF
                    2306             ;MOV    R3,#52
0516 7800     F     2307             MOV     R0,#xdata_hold+25
                    2308                     ;MOVX   A,@R0
0518 758301         2309             MOV     DPH,#1                          
051B 8882           2310             MOV     DPL,R0                          
051D E0             2311             MOVX    A,@DPTR                         
051E FB             2312             MOV     R3,A                            
051F 120000   F     2313             CALL    _FUN_LIB_XDATATODATA            
                    2314             
0522 7800     F     2315             MOV     R0,#xdata_hold+29
                    2316                     ;MOVX   A,@R0
0524 758301         2317             MOV     DPH,#1
0527 8882           2318             MOV     DPL,R0
0529 E0             2319             MOVX    A,@DPTR
052A FC             2320             MOV     R4,A    
                    2321             
052B 7800     F     2322             MOV     R0,#xdata_hold+30
                    2323                     ;MOVX   A,@R0
052D 758301         2324             MOV     DPH,#1
0530 8882           2325             MOV     DPL,R0
0532 E0             2326             MOVX    A,@DPTR
0533 FB             2327             MOV     R3,A            
                    2328             
0534 7800     F     2329             MOV     R0,#xdata_hold+25
                    2330             ;MOVX   A,@R0
0536 758301         2331             MOV     DPH,#1
0539 8882           2332             MOV     DPL,R0
053B E0             2333             MOVX    A,@DPTR
053C FA             2334             MOV     R2,A
                    2335             
053D 7F00     F     2336             MOV     R7,#DATA_RXBUF
053F 7D00     F     2337             MOV     R5,#XDATA_TXBUF 
0541 120000   F     2338             CALL    _FUN_CARDAPP_UpdateBinary
0544 EF             2339             MOV     A,R7    
                    2340             ;CALL   _fun_test_display
                    2341             ;---JNZ GSM_ESAMQY_OVER
0545 6003           2342             JZ      GSM_ESAMQY_OVERZZ02
0547 020000   F     2343             JMP     GSM_ESAMQY_OVER
054A                2344     GSM_ESAMQY_OVERZZ02:
054A 020000   F     2345             JMP     GSM_ESAMQY_QYESAMUnixOVER
                    2346     
054D                2347     GSM_ESAMQY_QYESAMUnixTWO:
                    2348             
                    2349             ;¶Á³öESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
054D C200     F     2350             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
054F D200     F     2351             SETB    BIT_GETRESULT   
0551 7F00     F     2352             MOV     R7,#DATA_RXBUF  
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    39

0553 7D00     F     2353             MOV     R5,#XDATA_TXBUF
0555 7800     F     2354             MOV     R0,#xdata_hold+23
                    2355                     ;MOVX   A,@R0
0557 758301         2356             MOV     DPH,#1
055A 8882           2357             MOV     DPL,R0
055C E0             2358             MOVX    A,@DPTR
055D FC             2359             MOV     R4,A    
                    2360             
055E 7800     F     2361             MOV     R0,#xdata_hold+24
                    2362                     ;MOVX   A,@R0
0560 758301         2363             MOV     DPH,#1
0563 8882           2364             MOV     DPL,R0
0565 E0             2365             MOVX    A,@DPTR
0566 FB             2366             MOV     R3,A    
                    2367             
0567 7A34           2368             MOV     R2,#52  
                    2369             
0569 120000   F     2370             CALL    _FUN_CARDAPP_ReadBinary02
056C EF             2371             MOV     A,R7    
                    2372             ;---JNZ GSM_ESAMQY_OVER
056D 6003           2373             JZ      GSM_ESAMQY_OVERZZ03
056F 020000   F     2374             JMP     GSM_ESAMQY_OVER
0572                2375     GSM_ESAMQY_OVERZZ03:
                    2376     
                    2377             ;Ð´ESAM xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ¸öbyte XX~XX
0572 D200     F     2378             SETB    BIT_GETRESULT
0574 C200     F     2379             CLR     BIT_ESAMICC
                    2380             
0576 7D00     F     2381             MOV     R5,#DATA_RXBUF + 5
0578 7F00     F     2382             MOV     R7,#XDATA_TXBUF
057A 7B34           2383             MOV     R3,#52  
057C 120000   F     2384             CALL    _FUN_LIB_XDATATODATA
                    2385             
                    2386             ;assign offset H/L into r4 / r3
057F 7800     F     2387             MOV     R0,#xdata_hold+29
                    2388                     ;MOVX   A,@R0
0581 758301         2389             MOV     DPH,#1
0584 8882           2390             MOV     DPL,R0
0586 E0             2391             MOVX    A,@DPTR
0587 FC             2392             MOV     R4,A    
                    2393             
0588 7800     F     2394             MOV     R0,#xdata_hold+30
                    2395                     ;MOVX   A,@R0
058A 758301         2396             MOV     DPH,#1
058D 8882           2397             MOV     DPL,R0
058F E0             2398             MOVX    A,@DPTR
0590 FB             2399             MOV     R3,A            
                    2400     
0591 7A34           2401             MOV     R2,#52          
                    2402             
0593 7F00     F     2403             MOV     R7,#DATA_RXBUF
0595 7D00     F     2404             MOV     R5,#XDATA_TXBUF
                    2405             
0597 120000   F     2406             CALL    _FUN_CARDAPP_UpdateBinary
                    2407             
059A EF             2408             MOV     A,R7    
                    2409             ;CALL   _fun_test_display
059B 7072           2410             JNZ     GSM_ESAMQY_OVER
                    2411             
                    2412             
                    2413             ;R7=µÚÒ»¸ö¼ÇÂ¼ºÅ,R5=ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2414             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2415             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê
                    2416             
                    2417             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2418             ;xdata_hold [21] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    40

                    2419             ;xdata_hold [22] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
                    2420             
                    2421             ;xdata_hold [23] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 01
                    2422             ;xdata_hold [24] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦UNIXTIMEµÄÆðÆôÆ«ÒÆµØÖ· OFFSET 02
                    2423             ;xdata_hold [25] ÐèÒªÒÆ¶¯µÄUNIXTIMEµÄ×Ö½ÚÊ
                    2424             
                    2425             ;xdata_hold [29] TMP OFFSET 01 Ç°ÒÆÄ¿±êµØÖ· offset01
                    2426             ;xdata_hold [30] TMP OFFSET 02 Ç°ÒÆÄ¿±êµØÖ· offset02            
                    2427             ;xdata_hold [20] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ£¬¶ÔÓ¦µÄÆðÆôÆ«ÒÆµØÖ·
059D 7800     F     2428             MOV     R0,#xdata_hold+24
                    2429                     ;MOVX   A,@R0
059F 758301         2430             MOV     DPH,#1
05A2 8882           2431             MOV     DPL,R0
05A4 E0             2432             MOVX    A,@DPTR
05A5 C3             2433             CLR     C
05A6 3434           2434             ADDC    A,#52
                    2435                     ;MOVX   @R0,A
05A8 758301         2436             MOV     DPH,#1 
05AB 8882           2437             MOV     DPL,R0 
05AD F0             2438             MOVX    @DPTR,A
05AE 18             2439             DEC     R0
                    2440                     ;MOVX   A,@R0
05AF 758301         2441             MOV     DPH,#1
05B2 8882           2442             MOV     DPL,R0
05B4 E0             2443             MOVX    A,@DPTR
05B5 3400           2444             ADDC    A,#0
                    2445                     ;MOVX   @R0,A
05B7 758301         2446             MOV     DPH,#1 
05BA 8882           2447             MOV     DPL,R0 
05BC F0             2448             MOVX    @DPTR,A
                    2449             
                    2450             ;xdata_hold [21] ÐèÒªÒÆ¶¯µÄ×Ö½ÚÊ
05BD 7800     F     2451             MOV     R0,#xdata_hold+25
                    2452                     ;MOVX   A,@R0
05BF 758301         2453             MOV     DPH,#1
05C2 8882           2454             MOV     DPL,R0
05C4 E0             2455             MOVX    A,@DPTR
05C5 C3             2456             CLR     C
05C6 9434           2457             SUBB    A,#52
                    2458                     ;MOVX   @R0,A
05C8 758301         2459             MOV     DPH,#1 
05CB 8882           2460             MOV     DPL,R0 
05CD F0             2461             MOVX    @DPTR,A 
05CE 6023           2462             JZ      GSM_ESAMQY_QYESAMUnixOVER
                    2463             
05D0 7800     F     2464             MOV     R0,#xdata_hold+30
                    2465                     ;MOVX   A,@R0
05D2 758301         2466             MOV     DPH,#1
05D5 8882           2467             MOV     DPL,R0
05D7 E0             2468             MOVX    A,@DPTR
05D8 C3             2469             CLR     C
05D9 3434           2470             ADDC    A,#52
                    2471                     ;MOVX   @R0,A
05DB 758301         2472             MOV     DPH,#1 
05DE 8882           2473             MOV     DPL,R0 
05E0 F0             2474             MOVX    @DPTR,A
05E1 18             2475             DEC     R0
                    2476                     ;MOVX   A,@R0
05E2 758301         2477             MOV     DPH,#1
05E5 8882           2478             MOV     DPL,R0
05E7 E0             2479             MOVX    A,@DPTR
05E8 3400           2480             ADDC    A,#0
                    2481                     ;MOVX   @R0,A
05EA 758301         2482             MOV     DPH,#1 
05ED 8882           2483             MOV     DPL,R0 
05EF F0             2484             MOVX    @DPTR,A 
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    41

                    2485             
05F0 020000   F     2486             JMP     GSM_ESAMQY_QYESAMUnixS2
                    2487             
05F3                2488     GSM_ESAMQY_QYESAMUnixOVER:
                    2489     
                    2490             ;===¸üÐÂ×ÜµÄ¼ÇÂ¼Ê===
                    2491             ;xdata_hold [18] »ñµÃÇ°ÒÆµÄµÚÒ»¸ö¼ÇÂ¼ºÅ
                    2492             ;xdata_hold [19] ÐèÒªÇ°ÒÆµÄ¼ÇÂ¼Ê        
05F3 D200     F     2493             SETB    BIT_GETRESULT
05F5 C200     F     2494             CLR     BIT_ESAMICC
                    2495             
05F7 7800     F     2496             mov     r0,#xdata_hold+19
                    2497                     ;MOVX   A,@R0
05F9 758301         2498             MOV     DPH,#1
05FC 8882           2499             MOV     DPL,R0
05FE E0             2500             MOVX    A,@DPTR
05FF 7800     F     2501             MOV     R0,#DATA_RXBUF + 5
0601 F6             2502             mov     @r0,a
                    2503             
                    2504             ;assign offset H/L into r4 / r3
0602 7C00           2505             MOV     R4,#0   
0604 7B01           2506             MOV     R3,#1
0606 7A01           2507             MOV     R2,#1           
                    2508             
0608 7F00     F     2509             MOV     R7,#DATA_RXBUF
060A 7D00     F     2510             MOV     R5,#XDATA_TXBUF
                    2511             
060C 120000   F     2512             CALL    _FUN_CARDAPP_UpdateBinary
                    2513             
060F                2514     GSM_ESAMQY_OVER:
                    2515             
060F 22             2516             RET
                    2517     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2518     ;ÃèÊö
                    2519     ;               µ¼³öESAMÊ¾Ýµ½ÓÃ»§¿¨ÖÐ
                    2520     ;Ç°Ìá
                    2521     ;       1.ÒÑ¾ß±¸²Ù×÷ESAM usercardµÄÌõ¼þ£¬Èç´ò¿ªÍâÎ§£¬¿¨Æ¬ÒÑ¸´Î»³É¹¦
                    2522     ;       2.ÒÑÑ¡ÔñESAM df01 ef07 ¼° usercard 1001 0009 ÎÄ¼þ
                    2523     ;Á÷³Ì£º
                    2524     ;                               
                    2525     ;                               ¸üÐÂÊ¾ÝÓò
                    2526     ;                                       ¸üÐÂÊ¾ÝÓò52¸öbyte 5~56
                    2527     ;                                       ¸üÐÂÊ¾ÝÓò52¸öbyte 57~108
                    2528     ;                               ¸üÐÂÇ°5 0~4
                    2529     ;                               ¸üÐÂunixtime 4 109~113
                    2530     ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0610                2531     _FUN_GSM_ESAMToUserCard:
                    2532     
                    2533             ;===¸üÐÂÊ¾ÝÓò52¸öbyte 5~56===
                    2534             ;¶Á³öESAM 52¸öbyte 5~56
0610 C200     F     2535             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0612 D200     F     2536             SETB    BIT_GETRESULT   
0614 7F00     F     2537             MOV     R7,#DATA_RXBUF  
0616 7D00     F     2538             MOV     R5,#XDATA_TXBUF
0618 7C00           2539             MOV     R4,#00          
061A 7B05           2540             MOV     R3,#5           
061C 7A34           2541             MOV     R2,#52;04;03
061E 120000   F     2542             CALL    _FUN_CARDAPP_ReadBinary02
0621 EF             2543             MOV     A,R7    
                    2544             
                    2545             ;mov    a,#66
                    2546             ;call   _fun_test_display
                    2547             
                    2548             ;---JNZ GSM_ESAMToUserCard_OVER
0622 6003           2549             JZ      GSM_ESAMToUserCardUPDATA1
0624 020000   F     2550             JMP     GSM_ESAMToUserCard_OVER
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    42

0627                2551     GSM_ESAMToUserCardUPDATA1:
                    2552             ;Ð´ÓÃ»§¿¨ 52 byte 5~56
0627 D200     F     2553             SETB    BIT_GETRESULT
0629 D200     F     2554             SETB    BIT_ESAMICC
                    2555             
062B 7D00     F     2556             MOV     R5,#DATA_RXBUF + 5
062D 7F00     F     2557             MOV     R7,#XDATA_TXBUF
062F 7B34           2558             MOV     R3,#52
0631 120000   F     2559             CALL    _FUN_LIB_XDATATODATA
                    2560             
                    2561             ;assign offset H/L into r4 / r3
0634 7C00           2562             mov     r4,#000h        
0636 7B05           2563             mov     r3,#005h
0638 7F00     F     2564             MOV     R7,#DATA_RXBUF
063A 7D00     F     2565             MOV     R5,#XDATA_TXBUF
063C 7A34           2566             MOV     R2,#52
063E 120000   F     2567             CALL    _FUN_CARDAPP_UpdateBinary
                    2568             
                    2569             ;MOV    A,R7    
                    2570             ;CALL   _fun_test_display
                    2571             ;---JNZ GSM_SerialINTRX_OVER    
0641 6003           2572             JZ      GSM_ESAMToUserCardRVDATA2
0643 020000   F     2573             JMP     GSM_SerialINTRX_OVER
0646                2574     GSM_ESAMToUserCardRVDATA2:      
                    2575             ;===¸üÐÂÊ¾ÝÓò52¸öbyte 57~108===
                    2576             ;¶Á³öESAM 52¸öbyte 57~108
0646 C200     F     2577             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0648 D200     F     2578             SETB    BIT_GETRESULT   
064A 7F00     F     2579             MOV     R7,#DATA_RXBUF  
064C 7D00     F     2580             MOV     R5,#XDATA_TXBUF
064E 7C00           2581             MOV     R4,#00          
0650 7B39           2582             MOV     R3,#57          
0652 7A34           2583             MOV     R2,#52;04;03
0654 120000   F     2584             CALL    _FUN_CARDAPP_ReadBinary02
0657 EF             2585             MOV     A,R7    
                    2586             ;---JNZ GSM_ESAMToUserCard_OVER
0658 6003           2587             JZ      GSM_ESAMToUserCardUPDATA02
065A 020000   F     2588             JMP     GSM_ESAMToUserCard_OVER
065D                2589     GSM_ESAMToUserCardUPDATA02:
                    2590             ;Ð´ÓÃ»§¿¨ 52¸öbyte 57~108
065D D200     F     2591             SETB    BIT_GETRESULT
065F D200     F     2592             SETB    BIT_ESAMICC
                    2593             
0661 7D00     F     2594             MOV     R5,#DATA_RXBUF + 5
0663 7F00     F     2595             MOV     R7,#XDATA_TXBUF
0665 7B34           2596             MOV     R3,#52
0667 120000   F     2597             CALL    _FUN_LIB_XDATATODATA
                    2598             
                    2599             ;assign offset H/L into r4 / r3
066A 7C00           2600             mov     r4,#000h        
066C 7B39           2601             mov     r3,#57
066E 7F00     F     2602             MOV     R7,#DATA_RXBUF
0670 7D00     F     2603             MOV     R5,#XDATA_TXBUF
0672 7A34           2604             MOV     R2,#52
0674 120000   F     2605             CALL    _FUN_CARDAPP_UpdateBinary
                    2606             
0677 EF             2607             MOV     A,R7    
                    2608             ;CALL   _fun_test_display
                    2609             ;---JNZ GSM_SerialINTRX_OVER
0678 6003           2610             JZ      GSM_ESAMToUserCardRV5
067A 020000   F     2611             JMP     GSM_SerialINTRX_OVER
067D                2612     GSM_ESAMToUserCardRV5:
                    2613             ;=== ¸üÐÂÇ°5 0~4 ===
                    2614             ;¶Á³öESAM 5 byte 0~4
067D C200     F     2615             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
067F D200     F     2616             SETB    BIT_GETRESULT   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    43

0681 7F00     F     2617             MOV     R7,#DATA_RXBUF  
0683 7D00     F     2618             MOV     R5,#XDATA_TXBUF
0685 7C00           2619             MOV     R4,#00          
0687 7B00           2620             MOV     R3,#00          
0689 7A05           2621             MOV     R2,#5;04;03
068B 120000   F     2622             CALL    _FUN_CARDAPP_ReadBinary02
068E EF             2623             MOV     A,R7    
068F 704C           2624             JNZ     GSM_ESAMToUserCard_OVER
                    2625     
                    2626             ;Ð´ÓÃ»§¿¨ 5 byte 0~4
0691 D200     F     2627             SETB    BIT_GETRESULT
0693 D200     F     2628             SETB    BIT_ESAMICC
                    2629             
0695 7D00     F     2630             MOV     R5,#DATA_RXBUF + 5
0697 7F00     F     2631             MOV     R7,#XDATA_TXBUF
0699 7B05           2632             MOV     R3,#5
069B 120000   F     2633             CALL    _FUN_LIB_XDATATODATA
                    2634             
                    2635             ;assign offset H/L into r4 / r3
069E 7C00           2636             mov     r4,#000h        
06A0 7B00           2637             mov     r3,#000h
06A2 7F00     F     2638             MOV     R7,#DATA_RXBUF
06A4 7D00     F     2639             MOV     R5,#XDATA_TXBUF
06A6 7A05           2640             MOV     R2,#5
06A8 120000   F     2641             CALL    _FUN_CARDAPP_UpdateBinary
                    2642             
06AB EF             2643             MOV     A,R7    
                    2644             ;CALL   _fun_test_display
                    2645             ;----JNZ        GSM_SerialINTRX_OVER    
06AC 6003           2646             JZ      GSM_ESAMToUserCardRVUNIX
06AE 020000   F     2647             JMP     GSM_SerialINTRX_OVER
06B1                2648     GSM_ESAMToUserCardRVUNIX:                                               
                    2649             ;=== ¸üÐÂunixtime 4 109~113 ===
06B1 C200     F     2650             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
06B3 D200     F     2651             SETB    BIT_GETRESULT   
06B5 7F00     F     2652             MOV     R7,#DATA_RXBUF  
06B7 7D00     F     2653             MOV     R5,#XDATA_TXBUF
06B9 7C00           2654             MOV     R4,#00          
06BB 7B6D           2655             MOV     R3,#109         
06BD 7A04           2656             MOV     R2,#4                                                   ;04 + 03
06BF 120000   F     2657             CALL    _FUN_CARDAPP_ReadBinary02
06C2 EF             2658             MOV     A,R7
06C3 7018           2659             JNZ     GSM_ESAMToUserCard_OVER
                    2660             
                    2661             ;Ð´ÓÃ»§¿¨ 4 109~113
06C5 D200     F     2662             SETB    BIT_GETRESULT
06C7 D200     F     2663             SETB    BIT_ESAMICC
                    2664             
06C9 7D00     F     2665             MOV     R5,#DATA_RXBUF + 5
06CB 7F00     F     2666             MOV     R7,#XDATA_TXBUF
06CD 7B04           2667             MOV     R3,#4
06CF 120000   F     2668             CALL    _FUN_LIB_XDATATODATA
                    2669             
                    2670             ;assign offset H/L into r4 / r3
06D2 7C00           2671             mov     r4,#000h        
06D4 7B6D           2672             mov     r3,#109
06D6 7F00     F     2673             MOV     R7,#DATA_RXBUF
06D8 7D00     F     2674             MOV     R5,#XDATA_TXBUF
06DA 7A04           2675             MOV     R2,#4
                    2676             ;---CALL        _FUN_CARDAPP_UpdateBinary
                    2677             
06DC EF             2678             MOV     A,R7    
                    2679             ;CALL   _fun_test_display
                    2680             ;JNZ    GSM_SerialINTRX_OVER    
06DD                2681     GSM_ESAMToUserCard_OVER:
                    2682             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    44

                    2683     
                    2684             
06DD 22             2685             RET             
                    2686     ;----------------------------------------------------------
                    2687     ;ÃèÊö£º
                    2688     ;       »ñµÃÆ«ÒÆÁ¿
                    2689     ;²ÎÊ
                    2690     ;       R7      ---     CellIDÊÁ¿(Íâ´æ)
                    2691     ;       R5      ---     ·µ»ØµÄÆ«ÒÆÁ¿(Íâ´æ)r5=r7*2
                    2692     ;Á÷³Ì
                    2693     ;               
                    2694     ;----------------------------------------------------------
06DE                2695     _FUN_GSM_GetOffset:
                    2696             
06DE 850700         2697             MOV     AR0,AR7
06E1 850501         2698             MOV     AR1,AR5
                    2699             
06E4 09             2700             INC     R1
                    2701                     ;MOVX   A,@R0
06E5 758301         2702             MOV     DPH,#1
06E8 8882           2703             MOV     DPL,R0
06EA E0             2704             MOVX    A,@DPTR
06EB 75F002         2705             MOV     B,#2
06EE A4             2706             MUL     AB
                    2707                     ;MOVX   @R1,A
06EF 758301         2708             MOV     DPH,#1
06F2 8982           2709             MOV     DPL,R1
06F4 F0             2710             MOVX    @DPTR,A
                    2711             
06F5 19             2712             DEC     R1
06F6 E5F0           2713             MOV     A,B
                    2714                     ;MOVX   @R1,A
06F8 758301         2715             MOV     DPH,#1
06FB 8982           2716             MOV     DPL,R1
06FD F0             2717             MOVX    @DPTR,A
                    2718             
06FE 22             2719             RET
                    2720             
                    2721     ;----------------------------------------------------------
                    2722     ;ÃèÊö£º
                    2723     ;       »ñµÃÆ«ÒÆÁ¿
                    2724     ;²ÎÊ
                    2725     ;       R7      ---     CellIDÊÁ¿(Íâ´æ)
                    2726     ;       R5      ---     ·µ»ØµÄÆ«ÒÆÁ¿(Íâ´æ)r5=r7*4
                    2727     ;Á÷³Ì
                    2728     ;               
                    2729     ;----------------------------------------------------------
06FF                2730     _FUN_GSM_GetOffset02:
                    2731             
06FF 850700         2732             MOV     AR0,AR7
0702 850501         2733             MOV     AR1,AR5
                    2734             
0705 09             2735             INC     R1
                    2736                     ;MOVX   A,@R0
0706 758301         2737             MOV     DPH,#1
0709 8882           2738             MOV     DPL,R0
070B E0             2739             MOVX    A,@DPTR
070C 75F004         2740             MOV     B,#4
070F A4             2741             MUL     AB
                    2742                     ;MOVX   @R1,A
0710 758301         2743             MOV     DPH,#1
0713 8982           2744             MOV     DPL,R1
0715 F0             2745             MOVX    @DPTR,A
                    2746             
0716 19             2747             DEC     R1
0717 E5F0           2748             MOV     A,B
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    45

                    2749                     ;MOVX   @R1,A
0719 758301         2750             MOV     DPH,#1
071C 8982           2751             MOV     DPL,R1
071E F0             2752             MOVX    @DPTR,A
                    2753             
071F 22             2754             RET     
                    2755                     
                    2756     ;////////////////////////////////////////////////////////////   
                    2757     ;ORG
0720 850700         2758             MOV     AR0,AR7
0723 850501         2759             MOV     AR1,AR5
                    2760             
0726 09             2761             INC     R1
0727 08             2762             INC     R0
                    2763             
                    2764                     ;MOVX   A,@R0
0728 758301         2765             MOV     DPH,#1
072B 8882           2766             MOV     DPL,R0
072D E0             2767             MOVX    A,@DPTR
                    2768             ;MOV    A,@R0
072E 75F004         2769             MOV     B,#4
0731 A4             2770             MUL     AB
                    2771             
0732 85F000   F     2772             MOV     Money,B         
                    2773             ;MOV    @R1,A
                    2774                     ;MOVX   @R1,A
0735 758301         2775             MOV     DPH,#1
0738 8982           2776             MOV     DPL,R1
073A F0             2777             MOVX    @DPTR,A
                    2778             
073B 18             2779             DEC     R0
073C 19             2780             DEC     R1
                    2781             
                    2782                     ;MOVX   A,@R0
073D 758301         2783             MOV     DPH,#1
0740 8882           2784             MOV     DPL,R0
0742 E0             2785             MOVX    A,@DPTR
                    2786             ;MOV    A,@R0
0743 75F004         2787             MOV     B,#4
0746 A4             2788             MUL     AB
                    2789             
0747 C3             2790             CLR     C
0748 2500     F     2791             ADD     A,MONEY
                    2792                     ;MOVX   @R1,A
074A 758301         2793             MOV     DPH,#1
074D 8982           2794             MOV     DPL,R1
074F F0             2795             MOVX    @DPTR,A
                    2796             ;MOV    @R1,A
                    2797             
0750 22             2798             RET
                    2799     ;----------------------------------------------------------
                    2800     ;ÃèÊö£º 
                    2801     ;       ´®¿ÚÖÐ¶Ï½ÓÊÜ³ÌÐò
                    2802     ;²ÎÊ
                    2803     ;       
                    2804     ;Á÷³Ì   
                    2805     ;       1.½ÓÊÜÊ¾Ý
                    2806     ;       2.Èç¹ûµ±Ç°ÊÇCellID·µ»Ø
                    2807     ;               ¼ì²é·µ»ØµÄ cellid Óë obu 0020ÎÄ¼þÖÐ¼ÇÂ¼µÄ×îºóÒ»¸öcellidÊÇ·ñÏàÍ¬
                    2808     ;               ²»ÏàÍ¬
                    2809     ;                       1.Ð´obu0020¼°¿¨Æ¬
                    2810     ;                       2.¹Ø´®¿Ú½ÓÊÕÖÐ¶Ï
                    2811     ;                       3.¸ü¸Äcellid×ÜÊ
                    2812     ;               ÏàÍ¬
                    2813     ;                       ÍË³ö³ÌÐò
                    2814     ;       3.ÖØÐÂ³õÊ¼»¯³ÌÐò£¬½øÈë
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    46

                    2815     ;       
                    2816     ;STX(2) + RSCTL(1) + LEN(2) + CMD(1)+ DATA(XX)+ BCC(1)
                    2817     ;FA     ·µ»Ø CellIDÖ¸Áî
                    2818     ;----------------------------------------------------------     
0751                2819     _FUN_GSM_SerialINTRX:
                    2820             ;½ÓÊÕÒ»Ö¡Ê¾Ý£¬²¢ÇÒÍê³É¡£
0751                2821     GSM_SerialINTRX_RXRight:
                    2822             
                    2823             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
0751 7800     F     2824             MOV     R0,#XDATA_CELLID
0753 7900     F     2825             MOV     R1,#XDATA_HOLD
                    2826                     ;MOVX   A,@R0
0755 758301         2827             MOV     DPH,#1
0758 8882           2828             MOV     DPL,R0
075A E0             2829             MOVX    A,@DPTR
                    2830                     ;MOVX   @R1,A
075B 758301         2831             MOV     DPH,#1
075E 8982           2832             MOV     DPL,R1
0760 F0             2833             MOVX    @DPTR,A
0761 08             2834             INC     R0
0762 09             2835             INC     R1
                    2836                     ;MOVX   A,@R0
0763 758301         2837             MOV     DPH,#1
0766 8882           2838             MOV     DPL,R0
0768 E0             2839             MOVX    A,@DPTR
                    2840                     ;MOVX   @R1,A
0769 758301         2841             MOV     DPH,#1
076C 8982           2842             MOV     DPL,R1
076E F0             2843             MOVX    @DPTR,A
                    2844             
                    2845             ;Èë¿Ú ´¦Àí Á÷³Ì
076F                2846     GSM_SerialINTRX_SelectFile:
                    2847             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2848             ;»ñµÃ OBU CellID ×ÜÊ
                    2849             ;MOV    DPH,#CONST_FLASH_Sys0020numH
                    2850             ;MOV    DPL,#CONST_FLASH_Sys0020numL
                    2851             ;MOV    AR7,#XDATA_HOLD
                    2852             ;MOV    R3,#1                                   ;2
                    2853             ;CALL   _RDFlashXR
                    2854             ;MOV    R0,#XDATA_HOLD
                    2855             ;CALL   _FUN_TEST_DISPLAY
                    2856             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
076F D200     F     2857             SETB    BIT_GETRESULT
0771 C200     F     2858             CLR     BIT_ESAMICC
0773 7F00     F     2859             MOV     R7,#DATA_RXBUF
0775 7D00     F     2860             MOV     R5,#XDATA_TXBUF
0777 7BDF           2861             MOV     R3,#0DFH
0779 7A01           2862             MOV     R2,#001H
077B 120000   F     2863             CALL    _FUN_CARDAPP_SelectFile
                    2864             
077E D200     F     2865             SETB    BIT_GETRESULT
0780 C200     F     2866             CLR     BIT_ESAMICC
0782 7F00     F     2867             MOV     R7,#DATA_RXBUF
0784 7D00     F     2868             MOV     R5,#XDATA_TXBUF
0786 7BEF           2869             MOV     R3,#CONST_ESAMCellfile_H
0788 7A07           2870             MOV     R2,#CONST_ESAMCellfile_L
078A 120000   F     2871             CALL    _FUN_CARDAPP_SelectFile
                    2872             
                    2873             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    2874             ;XDATA_HOLD[2] 33
                    2875             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    2876             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    2877             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID
                    2878     
                    2879             
078D C200     F     2880             CLR     BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    47

078F D200     F     2881             SETB    BIT_GETRESULT   
0791 7F00     F     2882             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
0793 7D00     F     2883             MOV     R5,#XDATA_HOLD+2
0795 7C00           2884             MOV     R4,#00                                                  ;R4             ---
                                  ÎÄ¼þID
0797 7B00           2885             MOV     R3,#00                                                  ;R3             ---
                                  ³¤¶È
0799 7A05           2886             MOV     R2,#05;04;03
079B 120000   F     2887             CALL    _FUN_CARDAPP_ReadBinary02
079E EF             2888             MOV     A,R7
                    2889             ;~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~
                    2890             ;mov    A,#53
                    2891             ;call   _FUN_TEST_DISPLAY
                    2892             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~       
                    2893             ;---JNZ GSM_SerialINTRX_NOInput02 
                    2894             ;---JNZ GSM_SerialINTRX_OVER
079F 6003           2895             JZ      GSM_SerialINTRX_lOWvO
07A1 020000   F     2896             JMP     GSM_SerialINTRX_OVER
                    2897             
07A4                2898     GSM_SerialINTRX_lOWvO:
                    2899             
                    2900             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    2901             ;XDATA_HOLD[2] 33
                    2902             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    2903             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    2904             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID
                    2905             
07A4 7800     F     2906             MOV     R0,#XDATA_HOLD+3
                    2907                     ;MOVX   A,@R0
07A6 758301         2908             MOV     DPH,#1
07A9 8882           2909             MOV     DPL,R0
07AB E0             2910             MOVX    A,@DPTR
07AC B4F000         2911             CJNE    A,#CONST_GSM_MaxNum,$+3
07AF 4003           2912             JC      GSM_SerialINTRX_IsNotMax
                    2913             
                    2914             ;---CALL        _Fun_GSM_RTCDis
07B1 020000   F     2915             JMP     GSM_SerialINTRX_OVER
                    2916             
07B4                2917     GSM_SerialINTRX_IsNotMax:
                    2918             
                    2919             ; ±È½Ï×îºóÒ»¸öCell_IDÓë´®¿Ú¹À´µÄCellIDÊÇ·ñÏàÍ¬
                    2920             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    2921             ;XDATA_HOLD[2] 33
                    2922             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    2923             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    2924             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID          
07B4 7800     F     2925             MOV     R0,#XDATA_HOLD+3
                    2926                     ;MOVX   A,@R0
07B6 758301         2927             MOV     DPH,#1
07B9 8882           2928             MOV     DPL,R0
07BB E0             2929             MOVX    A,@DPTR
07BC 6024           2930             JZ      GSM_SerialINTRX_getoffset       
                    2931             
07BE 7800     F     2932             MOV     R0,#XDATA_HOLD          ;µ±Ç°½ÓÊÕ CellID        
07C0 7900     F     2933             MOV     R1,#XDATA_HOLD+5;4      ;ÉÏÒ»´Î×îºóÒ»¸ö CellID  
07C2 7B02           2934             MOV     R3,#2                   ;4
07C4                2935     GSM_SerialINTRX_CompareCellID:
                    2936                     ;MOVX   A,@R0
07C4 758301         2937             MOV     DPH,#1
07C7 8882           2938             MOV     DPL,R0
07C9 E0             2939             MOVX    A,@DPTR
07CA F5F0           2940             MOV     B,A
                    2941                     ;MOVX   A,@R1
07CC 758301         2942             MOV     DPH,#1
07CF 8982           2943             MOV     DPL,R1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    48

07D1 E0             2944             MOVX    A,@DPTR
07D2 65F0           2945             XRL     A,B
                    2946             ;JNZ    GSM_SerialINTRX_CompareCellIDXXX
                    2947             ;JNZ    GSM_SerialINTRX_CompareCellIDover
07D4 700C           2948             JNZ     GSM_SerialINTRX_getoffset
07D6 08             2949             INC     R0
07D7 09             2950             INC     R1
07D8 DBEA           2951             DJNZ    R3,GSM_SerialINTRX_CompareCellID
                    2952             
                    2953             ;//////////////////////////////////////////////////////////////////////////////////
                             ///////////  
                    2954             ;±È½ÏUnixTimeÊ±¼äÊÇ·ñ³¬255 S£¬¸üÐÂ ESAM ¼°ÓÃ»§¿¨Ê±¼ä
                    2955             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    2956             ;XDATA_HOLD[2] 33
                    2957             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    2958             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ = 0 Èë = 1 ³ö
                    2959             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    2960             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    2961             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿    
                    2962             ;//////////////////////////////////////////////////////////////////////////////////
                             ///////////  
07DA C200     F     2963             CLR     BIT_ESAMICC
07DC 120000   F     2964             CALL    _FUN_GSM_JSUnixtimeOff
                    2965             
07DF                2966     GSM_SerialINTRX_outputovvv:
                    2967             ;//////////////////////////////////////////////////////////////////////////////////
                             ///////////
07DF 020000   F     2968             JMP     GSM_SerialINTRX_OVER                                    ;Èç¹ûCellIDÏàÍ¬£¬½á
                             ÊøÁ÷³Ì
                    2969             ;JMP    GSM_SerialINTRX_ESAMOVER        
                    2970             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    2971             ;MOV    DPH,#CONST_FLASH_Sys0020H
                    2972             ;MOV    DPL,#CONST_FLASH_Sys0020L+2
                    2973             ;MOV    R7,#XDATA_HOLD
                    2974             ;MOV    R3,#2
                    2975             ;CALL   _rdflashxr
                    2976             
                    2977             ;SETB   BIT_BUFADDR
                    2978             ;MOV    R7,#XDATA_HOLD
                    2979             ;MOV    R3,#2
                    2980             ;MOV    A,#1
                    2981             ;CALL   _FUN_TEST_UARTDISPLAY
                    2982             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
07E2                2983     GSM_SerialINTRX_getoffset:
                    2984             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    2985             ;XDATA_HOLD[2] 33
                    2986             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    2987             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    2988             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    2989             
07E2 7800     F     2990             MOV     R0,#XDATA_HOLD+3;2
                    2991                     ;MOVX   A,@R0
07E4 758301         2992             MOV     DPH,#1
07E7 8882           2993             MOV     DPL,R0
07E9 E0             2994             MOVX    A,@DPTR
                    2995             ;call   _FUN_TEST_DISPLAY
                    2996             
07EA 7037           2997             JNZ     GSM_SerialINTRX_getLastCellIDaddrPY
                    2998             
                    2999             ;CellID ×ÜÊÎª0
07EC                3000     GSM_SerialINTRX_getLastCellIDaddr00:
                    3001             
                    3002             ; ¼ÆËã ¿¨Æ¬ µ±Ç°cellidÆ«ÒÆ
                    3003             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3004             ;XDATA_HOLD[2] 33
                    3005             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    49

                    3006             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3007             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3008             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿
                    3009             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
07EC E4             3010             CLR     A
07ED 7800     F     3011             MOV     R0,#XDATA_HOLD + 7;6
                    3012             
                    3013                     ;MOVX   @R0,A
07EF 758301         3014             MOV     DPH,#1 
07F2 8882           3015             MOV     DPL,R0 
07F4 F0             3016             MOVX    @DPTR,A
07F5 08             3017             INC     R0
07F6 7405           3018             MOV     A,#5;4 
                    3019                     ;MOVX   @R0,A
07F8 758301         3020             MOV     DPH,#1 
07FB 8882           3021             MOV     DPL,R0 
07FD F0             3022             MOVX    @DPTR,A
                    3023             
                    3024     
07FE 7900     F     3025             MOV     R1,#XDATA_HOLD+10 
0800 7800     F     3026             MOV     R0,#XDATA_HOLD+8 
                    3027             
                    3028                     ;MOVX   A,@R0
0802 758301         3029             MOV     DPH,#1
0805 8882           3030             MOV     DPL,R0
0807 E0             3031             MOVX    A,@DPTR
0808 C3             3032             CLR     C
0809 346C           3033             ADDC    A,#108;108= 52*2+4=104+4=52¸ö¼ÇÂ¼£¬Ã¿¸ö¼ÇÂ¼2¸ö×Ö½Ú£¬4¸ö×Ö½ÚÈë¿Úunixtime
                    3034                     ;MOVX   @R1,A
080B 758301         3035             MOV     DPH,#1
080E 8982           3036             MOV     DPL,R1
0810 F0             3037             MOVX    @DPTR,A
                    3038             ;---INC R0
                    3039             
0811 18             3040             dec     r0
0812 19             3041             dec     r1
                    3042             
                    3043                     ;MOVX   A,@R0
0813 758301         3044             MOV     DPH,#1
0816 8882           3045             MOV     DPL,R0
0818 E0             3046             MOVX    A,@DPTR
0819 3400           3047             ADDC    A,#0
                    3048                     ;MOVX   @R1,A
081B 758301         3049             MOV     DPH,#1
081E 8982           3050             MOV     DPL,R1
0820 F0             3051             MOVX    @DPTR,A 
                    3052     
0821 804E           3053             JMP     GSM_SerialINTRX_getLastCellIDaddrov     
                    3054             ;CellID ×ÜÊ²»Îª0
0823                3055     GSM_SerialINTRX_getLastCellIDaddrPY:
                    3056             
                    3057             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3058             ;XDATA_HOLD[2] 33
                    3059             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3060             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3061             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3062             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    3063             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
0823 7F00     F     3064             MOV     R7,#XDATA_HOLD+3         
0825 7D00     F     3065             MOV     R5,#XDATA_HOLD+7 
0827 120000   F     3066             CALL    _FUN_GSM_GetOffset
                    3067             
                    3068             
082A 7800     F     3069             MOV     R0,#XDATA_HOLD+8 
                    3070                     ;MOVX   A,@R0
082C 758301         3071             MOV     DPH,#1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    50

082F 8882           3072             MOV     DPL,R0
0831 E0             3073             MOVX    A,@DPTR
0832 C3             3074             CLR     C
0833 3405           3075             ADDC    A,#5
                    3076                     ;MOVX   @R0,A
0835 758301         3077             MOV     DPH,#1 
0838 8882           3078             MOV     DPL,R0 
083A F0             3079             MOVX    @DPTR,A
                    3080             ;---INC R0
083B 18             3081             dec     R0
                    3082                     ;MOVX   A,@R0
083C 758301         3083             MOV     DPH,#1
083F 8882           3084             MOV     DPL,R0
0841 E0             3085             MOVX    A,@DPTR
0842 3400           3086             ADDC    A,#0
                    3087                     ;MOVX   @R0,A
0844 758301         3088             MOV     DPH,#1 
0847 8882           3089             MOV     DPL,R0 
0849 F0             3090             MOVX    @DPTR,A
                    3091             
                    3092             
084A 7F00     F     3093             MOV     R7,#XDATA_HOLD+3         
084C 7D00     F     3094             MOV     R5,#XDATA_HOLD+9 
084E 120000   F     3095             CALL    _FUN_GSM_GetOffset02
                    3096             
0851 7800     F     3097             MOV     R0,#XDATA_HOLD+10 
                    3098                     ;MOVX   A,@R0
0853 758301         3099             MOV     DPH,#1
0856 8882           3100             MOV     DPL,R0
0858 E0             3101             MOVX    A,@DPTR
0859 C3             3102             CLR     C
085A 3471           3103             ADDC    A,#113
                    3104                     ;MOVX   @R0,A
085C 758301         3105             MOV     DPH,#1 
085F 8882           3106             MOV     DPL,R0 
0861 F0             3107             MOVX    @DPTR,A
                    3108             ;---INC R0
0862 18             3109             dec     r0
                    3110                     ;MOVX   A,@R0
0863 758301         3111             MOV     DPH,#1
0866 8882           3112             MOV     DPL,R0
0868 E0             3113             MOVX    A,@DPTR
0869 3400           3114             ADDC    A,#0
                    3115                     ;MOVX   @R0,A
086B 758301         3116             MOV     DPH,#1 
086E 8882           3117             MOV     DPL,R0 
0870 F0             3118             MOVX    @DPTR,A
                    3119             
                    3120             
                    3121     ;////////////////////////////////////////////////////////////////////
0871                3122     GSM_SerialINTRX_CompareCellIDover:
                    3123             
0871                3124     GSM_SerialINTRX_getLastCellIDaddrov:
                    3125     ;////////////////////////////////////////////////////////////////////
                    3126             
                    3127             ;== update binary data ==
0871 D200     F     3128             SETB    BIT_GETRESULT
0873 C200     F     3129             CLR     BIT_ESAMICC
                    3130             
                    3131             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3132             ;XDATA_HOLD[2] 33
                    3133             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3134             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3135             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3136             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿               
                    3137             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    51

0875 7D00     F     3138             MOV     R5,#DATA_RXBUF + 5
0877 7F00     F     3139             MOV     R7,#XDATA_HOLD
0879 7B02           3140             MOV     R3,#2
087B 120000   F     3141             CALL    _FUN_LIB_XDATATODATA
                    3142             
                    3143             ;MOV    R0,#XDATA_HOLD; + 5
                    3144             ;CALL   _FUN_TEST_DISPLAY
                    3145             
                    3146             ;assign offset H/L into r4 / r3
087E C3             3147             CLR     C
087F 7800     F     3148             MOV     R0,#XDATA_HOLD+8
                    3149                     ;MOVX   A,@R0
0881 758301         3150             MOV     DPH,#1
0884 8882           3151             MOV     DPL,R0
0886 E0             3152             MOVX    A,@DPTR
                    3153             ;addc   a,#11
0887 FB             3154             MOV     r3,a
                    3155             
0888 18             3156             dec     r0
                    3157             ;INC    R0
                    3158                     ;MOVX   A,@R0
0889 758301         3159             MOV     DPH,#1
088C 8882           3160             MOV     DPL,R0
088E E0             3161             MOVX    A,@DPTR
                    3162             ;addc   a,#0
088F FC             3163             MOV     r4,a
                    3164             
                    3165             ;mov    r4,#0
                    3166             ;mov    r3,#00h 
0890 7F00     F     3167             MOV     R7,#DATA_RXBUF
0892 7D00     F     3168             MOV     R5,#XDATA_TXBUF
0894 7A02           3169             MOV     R2,#2;04H
0896 120000   F     3170             CALL    _FUN_CARDAPP_UpdateBinary
                    3171             
0899 EF             3172             MOV     A,R7
                    3173             
                    3174             ;CALL   _fun_test_display
                    3175             
                    3176             ;---JNZ GSM_SerialINTRX_OVER
                    3177             ;---JZ  GSM_SerialINTRX_UPDATAESAM
089A 6003           3178             JZ      GSM_SerialINTRX_UPDATAESAMUNIX
089C 020000   F     3179             JMP     GSM_SerialINTRX_OVER
                    3180             
                    3181             ;¸üÐÂ unix time
089F                3182     GSM_SerialINTRX_UPDATAESAMUNIX:
                    3183             
                    3184             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3185             ;XDATA_HOLD[2] 33
                    3186             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3187             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3188             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3189             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    3190             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
089F D200     F     3191             SETB    BIT_GETRESULT
08A1 C200     F     3192             CLR     BIT_ESAMICC     
                    3193             
                    3194     ;R5     ---     direct
08A3 7D00     F     3195             MOV     R5,#DATA_RXBUF + 5
08A5 7F00     F     3196             MOV     R7,#XDATA_UnixTime
                    3197             
                    3198     ;MOV    R0,#XDATA_UnixTime+3
                    3199     ;call   _fun_test_display       
                    3200             
08A7 7B04           3201             MOV     R3,#4
08A9 120000   F     3202             CALL    _FUN_LIB_XDATATODATA
                    3203             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    52

                    3204             ;MOV    R0,#XDATA_HOLD; + 5
                    3205             ;CALL   _FUN_TEST_DISPLAY
                    3206             
                    3207             ;assign offset H/L into r4 / r3
                    3208             
                    3209     ;10:57  11:47
                    3210             
08AC C3             3211             CLR     c
08AD 7800     F     3212             MOV     R0,#XDATA_HOLD+10
                    3213                     ;MOVX   A,@R0
08AF 758301         3214             MOV     DPH,#1
08B2 8882           3215             MOV     DPL,R0
08B4 E0             3216             MOVX    A,@DPTR
                    3217             ;addc   a,#11
08B5 FB             3218             mov     r3,a
                    3219             
08B6 18             3220             dec     r0
                    3221             ;INC    R0
                    3222                     ;MOVX   A,@R0
08B7 758301         3223             MOV     DPH,#1
08BA 8882           3224             MOV     DPL,R0
08BC E0             3225             MOVX    A,@DPTR
                    3226             ;addc   a,#0
08BD FC             3227             mov     r4,a
                    3228             ;call   _fun_test_display
                    3229             ;mov    r4,#0
                    3230             ;mov    r3,#00h 
08BE 7F00     F     3231             MOV     R7,#DATA_RXBUF
08C0 7D00     F     3232             MOV     R5,#XDATA_TXBUF
08C2 7A04           3233             MOV     R2,#4;04H
08C4 120000   F     3234             CALL    _FUN_CARDAPP_UpdateBinary
                    3235             
08C7 EF             3236             MOV     A,R7
                    3237             
                    3238             ;CALL   _fun_test_display
                    3239                     
                    3240             ;---JNZ GSM_SerialINTRX_OVER
08C8 6003           3241             JZ      GSM_SerialINTRX_UPDATAESAM
08CA 020000   F     3242             JMP     GSM_SerialINTRX_OVER
                    3243             
                    3244             
08CD                3245     GSM_SerialINTRX_UPDATAESAM:
                    3246             
                    3247             ;== update record num ==
                    3248             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3249             ;XDATA_HOLD[2] 33
                    3250             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3251             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3252             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3253             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿               
                    3254             
                    3255             
                    3256             ;COPY  ÐÂÊÕµ½µÄ CellID
08CD 7800     F     3257             MOV     R0,#XDATA_HOLD +3
08CF 7900     F     3258             MOV     R1,#DATA_RXBUF+5
                    3259             
08D1 7421           3260             MOV     A,#33
08D3 F7             3261             mov     @r1,a
08D4 09             3262             inc     r1
                    3263             
                    3264                     ;MOVX   A,@R0
08D5 758301         3265             MOV     DPH,#1
08D8 8882           3266             MOV     DPL,R0
08DA E0             3267             MOVX    A,@DPTR
08DB 04             3268             INC     A
08DC F7             3269             MOV     @R1,A
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    53

                    3270             
08DD 08             3271             INC     R0
08DE 09             3272             INC     R1
                    3273                     ;MOVX   A,@R0
08DF 758301         3274             MOV     DPH,#1
08E2 8882           3275             MOV     DPL,R0
08E4 E0             3276             MOVX    A,@DPTR
08E5 F7             3277             MOV     @R1,A
                    3278     
                    3279             ;COPY  ESAM CellID¸öÊ
08E6 7800     F     3280             MOV     R0,#XDATA_HOLD
08E8 09             3281             INC     R1
                    3282                     ;MOVX   A,@R0
08E9 758301         3283             MOV     DPH,#1
08EC 8882           3284             MOV     DPL,R0
08EE E0             3285             MOVX    A,@DPTR
                    3286             ;INC    A
08EF F7             3287             MOV     @R1,A   
08F0 08             3288             INC     R0
08F1 09             3289             INC     R1
                    3290                     ;MOVX   A,@R0
08F2 758301         3291             MOV     DPH,#1
08F5 8882           3292             MOV     DPL,R0
08F7 E0             3293             MOVX    A,@DPTR
08F8 F7             3294             MOV     @R1,A   
                    3295             ;call   _fun_test_display
                    3296             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3297             ;mov    a,r7    
                    3298             ;call   _fun_test_display
                    3299             ;setb   BIT_BUFADDR
                    3300             ;MOV    R7,#XDATA_hold+4
                    3301             ;CLR    BIT_BUFADDR
                    3302             ;MOV    R7,#DATA_RXBUF+5        
                    3303             ;MOV    R3,#4
                    3304             ;CALL   _FUN_TEST_UARTDISPLAY
                    3305             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      
08F9 D200     F     3306             SETB    BIT_GETRESULT
08FB C200     F     3307             CLR     BIT_ESAMICC
08FD 7C00           3308             MOV     r4,#0
08FF 7B00           3309             MOV     r3,#00h 
0901 7F00     F     3310             MOV     R7,#DATA_RXBUF
0903 7D00     F     3311             MOV     R5,#XDATA_txbuf
                    3312     ;       MOV     R2,#02H
0905 7A05           3313             MOV     R2,#5
0907 120000   F     3314             CALL    _FUN_CARDAPP_UpdateBinary
                    3315             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3316             ;SETB   BIT_BUFADDR
                    3317             ;MOV    R7,#XDATA_HOLD
                    3318             ;MOV    R3,#6
                    3319             ;MOV    A,#1    
                    3320             ;CALL   _FUN_TEST_UARTDISPLAY   
                    3321             ;MOV    A,R7
                    3322             ;Call   _fun_test_display
                    3323             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      
090A EF             3324             MOV     A,R7
                    3325             ;---JNZ GSM_SerialINTRX_OVER
090B 6003           3326             JZ      GSM_SerialINTRX_ESAMOVER
090D 020000   F     3327             JMP     GSM_SerialINTRX_OVER
0910                3328     GSM_SerialINTRX_ESAMOVER:
0910 D200     F     3329             SETB    BIT_HaveRecordCellID
                    3330     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////
                    3331     
0912 200003   F     3332             JB      BIT_INSERTCARD,GSM_SerialINTRX_UserCardStart
0915 020000   F     3333             JMP     GSM_SerialINTRX_OVER
0918                3334     GSM_SerialINTRX_UserCardStart:
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    54

                    3335             
0918 D200     F     3336             SETB    BIT_GETRESULT
091A D200     F     3337             SETB    BIT_ESAMICC
091C 7F00     F     3338             MOV     R7,#DATA_RXBUF
091E 7D00     F     3339             MOV     R5,#XDATA_TXBUF
0920 7B10           3340             MOV     R3,#010H
0922 7A01           3341             MOV     R2,#001H
0924 120000   F     3342             CALL    _FUN_CARDAPP_SelectFile 
                    3343             
0927 D200     F     3344             SETB    BIT_GETRESULT
0929 D200     F     3345             SETB    BIT_ESAMICC
092B 7F00     F     3346             MOV     R7,#DATA_RXBUF
092D 7D00     F     3347             MOV     R5,#XDATA_TXBUF
092F 7B00           3348             MOV     R3,#CONST_Cellfile_H
0931 7A09           3349             MOV     R2,#CONST_Cellfile_L
0933 120000   F     3350             CALL    _FUN_CARDAPP_SelectFile
                    3351             
                    3352             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3353             ;XDATA_HOLD[2] 33
                    3354             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3355             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3356             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID
                    3357     
0936 D200     F     3358             SETB    BIT_ESAMICC                                             ;µ±Ç°¶ÔÓÃ»§¿¨²Ù×÷
0938 D200     F     3359             SETB    BIT_GETRESULT   
093A 7F00     F     3360             MOV     R7,#DATA_RXBUF                                          ;R7             ---
                                  ·¢ËÍç·³åÖ¸Õë(ÄÚ´æ)\
093C 7D00     F     3361             MOV     R5,#XDATA_HOLD+2                                        ;
093E 7C00           3362             MOV     R4,#00                                                  ;R4             ---
                                  ÎÄ¼þID
0940 7B00           3363             MOV     R3,#00                                                  ;R3             ---
                                  ³¤¶È
0942 7A05           3364             MOV     R2,#05                                                  ;03
0944 120000   F     3365             CALL    _FUN_CARDAPP_ReadBinary02
0947 EF             3366             MOV     A,R7
                    3367             ;~~~~~~~~~~ µ÷ÓÃ²âÊÔ¶Î ~~~~~~~~~~
                    3368             ;mov    A,#53
                    3369             ;call   _FUN_TEST_DISPLAY
                    3370             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3371             ;---JNZ GSM_SerialINTRX_NOInput02
0948 6003           3372             JZ      GSM_SerialINTRX_USERCARDlOWvO
                    3373             ;---JMP GSM_SerialINTRX_NOInput02
094A 020000   F     3374             JMP     GSM_SerialINTRX_OVER
                    3375             
094D                3376     GSM_SerialINTRX_USERCARDlOWvO:
094D 7800     F     3377             MOV     R0,#XDATA_HOLD+3
                    3378                     ;MOVX   A,@R0
094F 758301         3379             MOV     DPH,#1
0952 8882           3380             MOV     DPL,R0
0954 E0             3381             MOVX    A,@DPTR
0955 B4F000         3382             CJNE    A,#CONST_GSM_MaxNum,$+3
0958 4003           3383             JC      GSM_SerialINTRX_USERCARDIsNotMax
                    3384             
                    3385             ;CALL   _Fun_GSM_RTCDis
095A 020000   F     3386             JMP     GSM_SerialINTRX_OVER
                    3387             
095D                3388     GSM_SerialINTRX_USERCARDIsNotMax:
                    3389             
                    3390             ; ±È½Ï×îºóÒ»¸öCell_IDÓë´®¿Ú¹À´µÄCellIDÊÇ·ñÏàÍ¬
                    3391             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3392             ;XDATA_HOLD[2] 33
                    3393             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3394             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3395             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
095D 7800     F     3396             MOV     R0,#XDATA_HOLD+3
                    3397                     ;MOVX   A,@R0
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    55

095F 758301         3398             MOV     DPH,#1
0962 8882           3399             MOV     DPL,R0
0964 E0             3400             MOVX    A,@DPTR
0965 601F           3401             JZ      GSM_SerialINTRX_USERCARDgetoffset
                    3402             
0967 7800     F     3403             MOV     R0,#XDATA_HOLD          ;µ±Ç°½ÓÊÕ CellID        
0969 7900     F     3404             MOV     R1,#XDATA_HOLD+5        ;ÉÏÒ»´Î×îºóÒ»¸ö CellID  
096B 7B02           3405             MOV     R3,#2;4
096D                3406     GSM_SerialINTRX_USERCARDCompareCellID:
                    3407                     ;MOVX   A,@R0
096D 758301         3408             MOV     DPH,#1
0970 8882           3409             MOV     DPL,R0
0972 E0             3410             MOVX    A,@DPTR
0973 F5F0           3411             MOV     B,A
                    3412                     ;MOVX   A,@R1
0975 758301         3413             MOV     DPH,#1
0978 8982           3414             MOV     DPL,R1
097A E0             3415             MOVX    A,@DPTR
097B 65F0           3416             XRL     A,B
                    3417             ;JNZ    GSM_SerialINTRX_USERCARDCompareCellIDXXX
                    3418             ;JNZ    GSM_SerialINTRX_USERCARDCompareCellIDover
097D 7007           3419             jnz     GSM_SerialINTRX_USERCARDgetoffset
097F 08             3420             INC     R0
0980 09             3421             INC     R1
0981 DBEA           3422             DJNZ    R3,GSM_SerialINTRX_USERCARDCompareCellID
                    3423             
                    3424             
                    3425             
0983 020000   F     3426             JMP     GSM_SerialINTRX_OVER    ;Èç¹ûCellIDÏàÍ¬£¬½áÊøÁ÷³Ì
                    3427             
                    3428             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3429             ;MOV    DPH,#CONST_FLASH_Sys0020H
                    3430             ;MOV    DPL,#CONST_FLASH_Sys0020L+2
                    3431             ;MOV    R7,#XDATA_HOLD
                    3432             ;MOV    R3,#2
                    3433             ;CALL   _rdflashxr
                    3434             
                    3435             ;SETB   BIT_BUFADDR
                    3436             ;MOV    R7,#XDATA_HOLD
                    3437             ;MOV    R3,#2
                    3438             ;MOV    A,#1
                    3439             ;CALL   _FUN_TEST_UARTDISPLAY
                    3440             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0986                3441     GSM_SerialINTRX_USERCARDgetoffset:
                    3442             
                    3443             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3444             ;XDATA_HOLD[2] 33
                    3445             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3446             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3447             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
0986 7800     F     3448             MOV     R0,#XDATA_HOLD+3
                    3449                     ;MOVX   A,@R0
0988 758301         3450             MOV     DPH,#1
098B 8882           3451             MOV     DPL,R0
098D E0             3452             MOVX    A,@DPTR
                    3453             ;call   _FUN_TEST_DISPLAY
                    3454             
098E 7037           3455             JNZ     GSM_SerialINTRX_USERCARDgetLastCellIDaddrPY
                    3456             
                    3457             ;CellID ×ÜÊÎª 0 
0990                3458     GSM_SerialINTRX_USERCARDgetLastCellIDaddr00:
                    3459             
                    3460             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3461             ;XDATA_HOLD[2] 33
                    3462             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3463             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    56

                    3464             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3465             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿
                    3466             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
                    3467             
0990 E4             3468             CLR     A
0991 7800     F     3469             MOV     R0,#XDATA_HOLD + 7;6
                    3470             
                    3471                     ;MOVX   @R0,A
0993 758301         3472             MOV     DPH,#1 
0996 8882           3473             MOV     DPL,R0 
0998 F0             3474             MOVX    @DPTR,A
0999 08             3475             INC     R0
099A 7405           3476             MOV     A,#5;4 
                    3477                     ;MOVX   @R0,A
099C 758301         3478             MOV     DPH,#1 
099F 8882           3479             MOV     DPL,R0 
09A1 F0             3480             MOVX    @DPTR,A
                    3481     
09A2 7900     F     3482             MOV     R1,#XDATA_HOLD+10 
09A4 7800     F     3483             MOV     R0,#XDATA_HOLD+8 
                    3484             
                    3485                     ;MOVX   A,@R0
09A6 758301         3486             MOV     DPH,#1
09A9 8882           3487             MOV     DPL,R0
09AB E0             3488             MOVX    A,@DPTR
09AC C3             3489             CLR     C
09AD 346C           3490             ADDC    A,#108;108= 52*2+4=104+4=52¸ö¼ÇÂ¼£¬Ã¿¸ö¼ÇÂ¼2¸ö×Ö½Ú£¬4¸ö×Ö½ÚÈë¿Úunixtime
                    3491                     ;MOVX   @R1,A
09AF 758301         3492             MOV     DPH,#1
09B2 8982           3493             MOV     DPL,R1
09B4 F0             3494             MOVX    @DPTR,A
                    3495             ;---INC R0
                    3496             
09B5 18             3497             dec     r0
09B6 19             3498             dec     r1
                    3499             
                    3500                     ;MOVX   A,@R0
09B7 758301         3501             MOV     DPH,#1
09BA 8882           3502             MOV     DPL,R0
09BC E0             3503             MOVX    A,@DPTR
09BD 3400           3504             ADDC    A,#0
                    3505                     ;MOVX   @R1,A
09BF 758301         3506             MOV     DPH,#1
09C2 8982           3507             MOV     DPL,R1
09C4 F0             3508             MOVX    @DPTR,A 
                    3509             
                    3510             ;CellID ×ÜÊ²»Îª0
09C5 804E           3511             JMP     GSM_SerialINTRX_USERCARDgetLastCellIDaddrov     
                    3512             ;CellID ×ÜÊ²»Îª0
09C7                3513     GSM_SerialINTRX_USERCARDgetLastCellIDaddrPY:
                    3514             
                    3515             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3516             ;XDATA_HOLD[2] 33
                    3517             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3518             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3519             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3520             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    3521             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
09C7 7F00     F     3522             MOV     R7,#XDATA_HOLD+3         
09C9 7D00     F     3523             MOV     R5,#XDATA_HOLD+7 
09CB 120000   F     3524             CALL    _FUN_GSM_GetOffset
                    3525             
                    3526             
09CE 7800     F     3527             MOV     R0,#XDATA_HOLD+8 
                    3528                     ;MOVX   A,@R0
09D0 758301         3529             MOV     DPH,#1
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    57

09D3 8882           3530             MOV     DPL,R0
09D5 E0             3531             MOVX    A,@DPTR
09D6 C3             3532             CLR     C
09D7 3405           3533             ADDC    A,#5
                    3534                     ;MOVX   @R0,A
09D9 758301         3535             MOV     DPH,#1 
09DC 8882           3536             MOV     DPL,R0 
09DE F0             3537             MOVX    @DPTR,A
                    3538             ;---INC R0
09DF 18             3539             dec     r0
                    3540                     ;MOVX   A,@R0
09E0 758301         3541             MOV     DPH,#1
09E3 8882           3542             MOV     DPL,R0
09E5 E0             3543             MOVX    A,@DPTR
09E6 3400           3544             ADDC    A,#0
                    3545                     ;MOVX   @R0,A
09E8 758301         3546             MOV     DPH,#1 
09EB 8882           3547             MOV     DPL,R0 
09ED F0             3548             MOVX    @DPTR,A
                    3549             
09EE 7F00     F     3550             MOV     R7,#XDATA_HOLD+3         
09F0 7D00     F     3551             MOV     R5,#XDATA_HOLD+9 
09F2 120000   F     3552             CALL    _FUN_GSM_GetOffset02
                    3553             
09F5 7800     F     3554             MOV     R0,#XDATA_HOLD+10 
                    3555                     ;MOVX   A,@R0
09F7 758301         3556             MOV     DPH,#1
09FA 8882           3557             MOV     DPL,R0
09FC E0             3558             MOVX    A,@DPTR
09FD C3             3559             CLR     C
09FE 3471           3560             ADDC    A,#113
                    3561                     ;MOVX   @R0,A
0A00 758301         3562             MOV     DPH,#1 
0A03 8882           3563             MOV     DPL,R0 
0A05 F0             3564             MOVX    @DPTR,A
                    3565             ;---INC R0
0A06 18             3566             dec     r0
                    3567                     ;MOVX   A,@R0
0A07 758301         3568             MOV     DPH,#1
0A0A 8882           3569             MOV     DPL,R0
0A0C E0             3570             MOVX    A,@DPTR
0A0D 3400           3571             ADDC    A,#0
                    3572                     ;MOVX   @R0,A
0A0F 758301         3573             MOV     DPH,#1 
0A12 8882           3574             MOV     DPL,R0 
0A14 F0             3575             MOVX    @DPTR,A
                    3576             
0A15                3577     GSM_SerialINTRX_USERCARDCompareCellIDover:
                    3578             
0A15                3579     GSM_SerialINTRX_USERCARDgetLastCellIDaddrov: 
                    3580             
                    3581             ;== update binary data ==
0A15 D200     F     3582             SETB    BIT_GETRESULT
0A17 D200     F     3583             SETB    BIT_ESAMICC
                    3584             
                    3585             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3586             ;XDATA_HOLD[2] 33
                    3587             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3588             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3589             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3590             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿
0A19 7D00     F     3591             MOV     R5,#DATA_RXBUF + 5
0A1B 7F00     F     3592             MOV     R7,#XDATA_HOLD
0A1D 7B02           3593             MOV     R3,#2
0A1F 120000   F     3594             CALL    _FUN_LIB_XDATATODATA
                    3595             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    58

                    3596             ;MOV    R0,#XDATA_HOLD; + 5
                    3597             ;CALL   _FUN_TEST_DISPLAY
                    3598             
                    3599             ;assign offset H/L into r4 / r3
0A22 C3             3600             CLR     c
0A23 7800     F     3601             MOV     R0,#XDATA_HOLD+8
                    3602                     ;MOVX   A,@R0
0A25 758301         3603             MOV     DPH,#1
0A28 8882           3604             MOV     DPL,R0
0A2A E0             3605             MOVX    A,@DPTR
                    3606             ;addc   a,#11
0A2B FB             3607             mov     r3,a
                    3608             
0A2C 18             3609             dec     r0
                    3610             ;INC    R0
                    3611                     ;MOVX   A,@R0
0A2D 758301         3612             MOV     DPH,#1
0A30 8882           3613             MOV     DPL,R0
0A32 E0             3614             MOVX    A,@DPTR
                    3615             ;addc   a,#0
0A33 FC             3616             mov     r4,a
                    3617             
                    3618             ;mov    r4,#0
                    3619             ;mov    r3,#00h 
0A34 7F00     F     3620             MOV     R7,#DATA_RXBUF
0A36 7D00     F     3621             MOV     R5,#XDATA_TXBUF
0A38 7A02           3622             MOV     R2,#2;04H
0A3A 120000   F     3623             CALL    _FUN_CARDAPP_UpdateBinary
                    3624             
0A3D EF             3625             MOV     A,R7
                    3626             
                    3627             ;CALL   _fun_test_display
                    3628             
0A3E 7043           3629             JNZ     GSM_SerialINTRX_OVER
                    3630             
                    3631             ;== update record num ==
                    3632             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3633             ;XDATA_HOLD[2] 33
                    3634             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3635             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3636             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3637             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿
                    3638             
                    3639             ;COPY  ÐÂÊÕµ½µÄ CellID
0A40 7800     F     3640             MOV     R0,#XDATA_HOLD +3
0A42 7900     F     3641             MOV     R1,#DATA_RXBUF+5
                    3642             
0A44 7421           3643             MOV     A,#33
0A46 F7             3644             mov     @r1,a
0A47 09             3645             inc     r1
                    3646             
                    3647                     ;MOVX   A,@R0
0A48 758301         3648             MOV     DPH,#1
0A4B 8882           3649             MOV     DPL,R0
0A4D E0             3650             MOVX    A,@DPTR
0A4E 04             3651             INC     A
0A4F F7             3652             MOV     @R1,A
0A50 08             3653             INC     R0
0A51 09             3654             INC     R1
                    3655                     ;MOVX   A,@R0
0A52 758301         3656             MOV     DPH,#1
0A55 8882           3657             MOV     DPL,R0
0A57 E0             3658             MOVX    A,@DPTR
0A58 F7             3659             MOV     @R1,A
                    3660     
                    3661             ;COPY  ESAM CellID¸öÊ
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    59

0A59 7800     F     3662             MOV     R0,#XDATA_HOLD
0A5B 09             3663             INC     R1
                    3664                     ;MOVX   A,@R0
0A5C 758301         3665             MOV     DPH,#1
0A5F 8882           3666             MOV     DPL,R0
0A61 E0             3667             MOVX    A,@DPTR
                    3668             ;INC    A
0A62 F7             3669             MOV     @R1,A   
0A63 08             3670             INC     R0
0A64 09             3671             INC     R1
                    3672                     ;MOVX   A,@R0
0A65 758301         3673             MOV     DPH,#1
0A68 8882           3674             MOV     DPL,R0
0A6A E0             3675             MOVX    A,@DPTR
0A6B F7             3676             MOV     @R1,A   
                    3677             ;call   _fun_test_display
                    3678             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3679             ;mov    a,r7    
                    3680             ;call   _fun_test_display
                    3681             ;setb   BIT_BUFADDR
                    3682             ;MOV    R7,#XDATA_hold+4
                    3683             ;CLR    BIT_BUFADDR
                    3684             ;MOV    R7,#DATA_RXBUF+5        
                    3685             ;MOV    R3,#4
                    3686             ;CALL   _FUN_TEST_UARTDISPLAY
                    3687             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~      
0A6C D200     F     3688             SETB    BIT_GETRESULT
0A6E D200     F     3689             SETB    BIT_ESAMICC
0A70 7C00           3690             MOV     r4,#0
0A72 7B00           3691             MOV     r3,#00h 
0A74 7F00     F     3692             MOV     R7,#DATA_RXBUF
0A76 7D00     F     3693             MOV     R5,#XDATA_txbuf
                    3694             ;MOV    R2,#02H
0A78 7A05           3695             MOV     R2,#5
0A7A 120000   F     3696             CALL    _FUN_CARDAPP_UpdateBinary
                    3697             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                    3698             ;SETB   BIT_BUFADDR
                    3699             ;MOV    R7,#XDATA_HOLD
                    3700             ;MOV    R3,#6
                    3701             ;MOV    A,#1
                    3702             ;CALL   _FUN_TEST_UARTDISPLAY
                    3703             ;MOV    A,R7
                    3704             ;call   _fun_test_display
                    3705             ;~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
0A7D EF             3706             MOV     A,R7
0A7E 7003           3707             JNZ     GSM_SerialINTRX_OVER
                    3708             
0A80                3709     GSM_SerialINTRX_USERCARDESAM:
                    3710     
                    3711     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////////////                
0A80 120000   F     3712             CALL    _FUN_ContactIssue_INIT                          
                    3713             
0A83                3714     GSM_SerialINTRX_OVER:
                    3715             ;CALL   _FUN_ContactIssue_Release
                    3716             
                    3717             ;---JMP AP_satrt
                    3718             
0A83 22             3719             RET
                    3720             
                    3721     
                    3722     ;----------------------------------------------------------
                    3723     ;²¥±¨¶ÌÐÅ¹¦ÄÜ
                    3724     ;R7     ---     ¶ÌÐÅç·³å
                    3725     ;R7+5   ---     ¶ÌÐÅç·³åÊ¾Ý
                    3726     ;R3     ---     ¶ÌÐÅ³¤¶È
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    60

                    3727     ;head(1) + len(2) + cmd(1) + cmdPara(1) + data(n) + bcc(1)[from head to data xor]
                    3728     ;fd + xx xx + 01 + 03(unicode) + bcc
                    3729     ;Á÷³Ì
                    3730     ;       ¿ªÆôÓïÒôÄ£¿éµçÔ´
                    3731     ;       ·¢ËÍ¶ÌÐÅÏûÏ¢¸øÄ£¿é
                    3732     ;       ¿ª±ÕÓïÒôÄ£¿éµçÔ´
                    3733     ;----------------------------------------------------------
0A84                3734     _FUN_GSM_ReportMSG:
                    3735             
0A84 850700         3736             MOV     AR0,AR7         ;[head]
0A87 74FD           3737             MOV     A,#0FDH
                    3738                     ;MOVX   @R0,A
0A89 758301         3739             MOV     DPH,#1 
0A8C 8882           3740             MOV     DPL,R0 
0A8E F0             3741             MOVX    @DPTR,A
                    3742             
0A8F 08             3743             INC     R0              ;len[0]
0A90 08             3744             INC     R0              ;len[1]
0A91 EB             3745             MOV     A,R3
                    3746                     ;MOVX   @R0,A
0A92 758301         3747             MOV     DPH,#1 
0A95 8882           3748             MOV     DPL,R0 
0A97 F0             3749             MOVX    @DPTR,A
                    3750             
0A98 08             3751             INC     R0
0A99 7401           3752             MOV     A,#001H         ;CMD
                    3753                     ;MOVX   @R0,A
0A9B 758301         3754             MOV     DPH,#1 
0A9E 8882           3755             MOV     DPL,R0 
0AA0 F0             3756             MOVX    @DPTR,A
                    3757             
0AA1 08             3758             INC     R0
0AA2 7403           3759             MOV     A,#003H         ;CMD Para
                    3760                     ;MOVX   @R0,A
0AA4 758301         3761             MOV     DPH,#1 
0AA7 8882           3762             MOV     DPL,R0 
0AA9 F0             3763             MOVX    @DPTR,A
                    3764             
0AAA 08             3765             INC     R0              ;DATA[0]
                    3766             
0AAB E8             3767             MOV     A,R0
0AAC 2B             3768             ADD     A,R3
0AAD F8             3769             MOV     R0,A
                    3770             
0AAE C003           3771             PUSH    AR3
0AB0 C007           3772             PUSH    AR7
                    3773             
0AB2 EB             3774             MOV     A,R3
0AB3 2405           3775             ADD     A,#5    
0AB5 FB             3776             MOV     R3,A    
0AB6 C200     F     3777             CLR     BIT_BUFADDR     
0AB8 120000   F     3778             CALL    _FUN_LIB_GetBCC
                    3779             
0ABB D007           3780             POP     AR7
0ABD D003           3781             POP     AR3
                    3782             
0ABF 7000           3783             JNZ     GSM_ReportMSG_OVER
                    3784             
                    3785             ;·¢ËÍÓïÒôÐÅÏ¢
                    3786             
0AC1                3787     GSM_ReportMSG_OVER:
0AC1 22             3788             RET
                    3789             
                    3790     ;----------------------------------------------------------
                    3791     ;ÃèÊö:
                    3792     ;       ¿ªÆôRTC 
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    61

                    3793     ;----------------------------------------------------------
0AC2                3794     _Fun_GSM_RTCEn:
                    3795             
                    3796     ;clr    es
                    3797             ;ÉèÖÃ RTC ¿ªÆôÔËÐÐ±ê¼Ç
0AC2 7800     F     3798             MOV     R0,#XDATA_RTCMode
0AC4 7455           3799             MOV     A,#CONST_RTC_ON
                    3800                     ;MOVX   @R0,A
0AC6 758301         3801             MOV     DPH,#1 
0AC9 8882           3802             MOV     DPL,R0 
0ACB F0             3803             MOVX    @DPTR,A
                    3804             
                    3805             ;³õÊ¼»¯RTC¼ÇÊ±Æ÷
0ACC 7800     F     3806             MOV     R0,#XDATA_RTCTime
0ACE E4             3807             CLR     A
                    3808                     ;MOVX   @R0,A
0ACF 758301         3809             MOV     DPH,#1 
0AD2 8882           3810             MOV     DPL,R0 
0AD4 F0             3811             MOVX    @DPTR,A
                    3812             
                    3813             ;¿ªÆôRTC [h0~3 L0~7]fffh = 6s
                    3814             ;MOV    REG_MCU_WKCTH,#CONST_MCU_WKCTH
                    3815             ;ORL    REG_MCU_WKCTH,#10000000B
                    3816             ;MOV    REG_MCU_WKCTL,#CONST_MCU_WKCTL
0AD5 120000   F     3817             CALL    _FUN_GSM_RTCON
                    3818             ;CALL   _Fun_GSM_GetCellIDEN
                    3819             
0AD8 53923F         3820             Anl     REG_5412AD_P1M0,#00111111B       ;
0ADB 439140         3821             Orl     REG_5412AD_P1M1,#01000000B       ; MISO ÎªÊäÈë(¸ß×è)
                    3822             
0ADE C2A3           3823             CLR     PIN_PWR_GSM                      ; [GSM] 
                    3824     ;               SETB    Pin_CC1101_SS
                    3825     ;       CLR     PIN_CC1101_SCLK
                    3826     ;       CLR     PIN_CC1101_MOSI
                    3827     ;       setb    PIN_CC1101_MISO
                    3828             ;setb   PIN_CC1101_GDO2 
                    3829             ;MOV    r7,#10
                    3830             ;CALL   _fun_lib_delay
                    3831             
0AE0 120000   F     3832             CALL    _FUN_CC1101_RESET
0AE3 120000   F     3833             CALL    _FUN_CC1101_INIT
                    3834     ;       A                       ---     µØÖ·
                    3835     ;       R7                      ---     Ê¾Ý
                    3836     ;       R6                      ---     Íâ´æ
                    3837     ;       R4                      ---     ×ÜÊ
                    3838             ;MOV    R4,#8
                    3839             ;MOV    A,#7EH
                    3840             ;MOV    R6,#XDATA_TXBUF
                    3841             ;MOV    R7,#0C0H
                    3842             ;CALL   _FUN_CC1101_spioSoftRXCC1101RXCC1101
                    3843             ;34
0AE6 120000   F     3844             CALL    _FUN_CC1101_RVOn
0AE9 C007           3845             PUSH    AR7
0AEB 7FFF           3846             MOV     R7,#255
0AED DFFE           3847             DJNZ    R7,$    
0AEF DFFE           3848             DJNZ    R7,$    
0AF1 DFFE           3849             DJNZ    R7,$    
0AF3 DFFE           3850             DJNZ    R7,$            
0AF5 DFFE           3851             DJNZ    R7,$    
0AF7 DFFE           3852             DJNZ    R7,$    
0AF9 DFFE           3853             DJNZ    R7,$    
0AFB DFFE           3854             DJNZ    R7,$            
0AFD DFFE           3855             DJNZ    R7,$    
0AFF DFFE           3856             DJNZ    R7,$            
                    3857     
0B01 D007           3858             POP     AR7
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    62

                    3859             ;36 3A
0B03 120000   F     3860             CALL    _FUN_CC1101_RVOff
0B06 120000   F     3861             CALL    _FUN_CC1101_SetWakeUpTime
0B09 120000   F     3862             CALL    _FUN_CC1101_RVWR
0B0C 120000   F     3863             CALL    _FUN_CC1101_Idle
0B0F 120000   F     3864             CALL    _FUN_CC1101_WakeUP
                    3865             
0B12 22             3866             RET
                    3867     ;----------------------------------------------------------
                    3868     ;ÃèÊö:
                    3869     ;       ½ûÓÃRTC 
                    3870     ;----------------------------------------------------------     
0B13                3871     _Fun_GSM_RTCDis:
                    3872                     
                    3873             ;ÉèÖÃ RTC ¿ªÆôÔËÐÐ±ê¼Ç
0B13 7800     F     3874             MOV     R0,#XDATA_RTCMode
0B15 E4             3875             CLR     A
                    3876                     ;MOVX   @R0,A
0B16 758301         3877             MOV     DPH,#1 
0B19 8882           3878             MOV     DPL,R0 
0B1B F0             3879             MOVX    @DPTR,A
                    3880             
                    3881             ;³õÊ¼»¯ RTC ¼ÇÊ±Æ÷
0B1C 7800     F     3882             MOV     R0,#XDATA_RTCTime
0B1E E4             3883             CLR     A
                    3884                     ;MOVX   @R0,A
0B1F 758301         3885             MOV     DPH,#1 
0B22 8882           3886             MOV     DPL,R0 
0B24 F0             3887             MOVX    @DPTR,A
                    3888             
                    3889             ;¹Ø±Õ RTC [h0~3 L0~7]fffh = 6s
                    3890             ;MOV    REG_MCU_WKCTH,#CONST_MCU_WKCTH
                    3891             ;MOV    REG_MCU_WKCTL,#CONST_MCU_WKCTL
0B25 120000   F     3892             CALL    _FUN_GSM_RTCOFF
                    3893             
0B28 53927F         3894             Anl     REG_5412AD_P1M0,#01111111B       ;
0B2B 53917F         3895             Anl     REG_5412AD_P1M1,#01111111B       ; MISO ÆÕÍ¨    
                    3896             
0B2E D2A3           3897             SETB    PIN_PWR_GSM                      ; [GSM] 
                    3898     ;               CLR     Pin_CC1101_SS
                    3899     ;       CLR     PIN_CC1101_SCLK
                    3900     ;       CLR     PIN_CC1101_MOSI
                    3901             ;PIN_CC1101_MISO
                    3902     ;       CLR     PIN_CC1101_GDO2 
                    3903             
0B30 22             3904             RET
                    3905     ;----------------------------------------------------------
                    3906     ;ÃèÊö:
                    3907     ;       ¿ªRTC
                    3908     ;----------------------------------------------------------     
0B31                3909     _FUN_GSM_RTCON:
                    3910                     
0B31 75AB08         3911             MOV     REG_MCU_WKCTH,#CONST_MCU_WKCTH
                    3912             ;---ORL REG_MCU_WKCTH,#10000000B
0B34 75AAFF         3913             MOV     REG_MCU_WKCTL,#CONST_MCU_WKCTL  
0B37 22             3914             RET     
                    3915     ;----------------------------------------------------------
                    3916     ;ÃèÊö:
                    3917     ;       ¹ØRTC   
                    3918     ;----------------------------------------------------------     
0B38                3919     _FUN_GSM_RTCOFF:
                    3920             
                    3921             ;ORL    REG_5412AD_P3M0,#01000000B
                    3922             ;MOV    A,#39
                    3923             ;CALL   _FUN_TEST_DISPLAY
                    3924             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    63

0B38 75AB08         3925             MOV     REG_MCU_WKCTH,#CONST_MCU_WKCTH
0B3B 75AAFF         3926             MOV     REG_MCU_WKCTL,#CONST_MCU_WKCTL
                    3927             
0B3E 22             3928             RET     
                    3929     ;----------------------------------------------------------
                    3930     ;ÃèÊö:
                    3931     ;       »ñµÃcellid
                    3932     ;       1. ÉèÖÃ GSMIO ÎªÆÕÍ¨½Å  3.7
                    3933     ;       2. GSMPow ioÍÆ»»½Å      2.0
                    3934     ;       3. set gsmio L
                    3935     ;       4. set GSM Power H
                    3936     ;       5. sleep
                    3937     ;----------------------------------------------------------     
0B3F                3938     _Fun_GSM_GetCellIDEN:
                    3939             
                    3940     
                    3941             
0B3F 22             3942             RET
                    3943     ;----------------------------------------------------------
                    3944     ;_FUN_GSM_LowVotage             µÍµçÑ¹±¨¾¯
                    3945     ;_FUN_GSM_ETCInputDeal          GSMÔÚETCÈë¿Ú´¦ÀíÁ÷³Ì
                    3946     ;_FUN_GSM_ETCOnputDeal          GSMÔÚETC³ö¿Ú´¦ÀíÁ÷³Ì
                    3947     ;----------------------------------------------------------
                    3948     ;DPTR   
                    3949     ;R7(Íâ´æ)
                    3950     ;BIT_BUFADDR
                    3951     ;----------------------------------------------------------
0B40                3952     _Fun_GSM_Audio:
                    3953             
0B40 22             3954             RET
                    3955     
                    3956     
                    3957     ;----------------------------------------------------------
                    3958             ;±È½ÏUnixTimeÊ±¼äÊÇ·ñ³¬255 S£¬¸üÐÂ ESAM ¼°ÓÃ»§¿¨Ê±¼ä
                    3959             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3960             ;XDATA_HOLD[2] 33
                    3961             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3962             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ = 0 Èë = 1 ³ö
                    3963             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3964     ;----------------------------------------------------------
0B41                3965     _FUN_GSM_JSUnixtimeOff:
                    3966             
                    3967             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    3968             ;XDATA_HOLD[2] 33
                    3969             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    3970             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    3971             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    3972             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    3973             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿    
0B41 7800     F     3974             MOV     R0,#XDATA_HOLD + 3;2
                    3975                     ;MOVX   A,@R0
0B43 758301         3976             MOV     DPH,#1
0B46 8882           3977             MOV     DPL,R0
0B48 E0             3978             MOVX    A,@DPTR
                    3979             ;CALL   _FUN_TEST_DISPLAY
                    3980             
0B49 7037           3981             JNZ     GSM_JSUnixtimeOff_getLastCellIDaddrPY
                    3982             
0B4B E4             3983             CLR     A
0B4C 7800     F     3984             MOV     R0,#XDATA_HOLD + 7;6
                    3985             
                    3986                     ;MOVX   @R0,A
0B4E 758301         3987             MOV     DPH,#1 
0B51 8882           3988             MOV     DPL,R0 
0B53 F0             3989             MOVX    @DPTR,A
0B54 08             3990             INC     R0
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    64

0B55 7405           3991             MOV     A,#5;4 
                    3992                     ;MOVX   @R0,A
0B57 758301         3993             MOV     DPH,#1 
0B5A 8882           3994             MOV     DPL,R0 
0B5C F0             3995             MOVX    @DPTR,A
                    3996             
0B5D 7900     F     3997             MOV     R1,#XDATA_HOLD+10 
0B5F 7800     F     3998             MOV     R0,#XDATA_HOLD+8 
                    3999             
                    4000                     ;MOVX   A,@R0
0B61 758301         4001             MOV     DPH,#1
0B64 8882           4002             MOV     DPL,R0
0B66 E0             4003             MOVX    A,@DPTR
0B67 C3             4004             CLR     C
0B68 346C           4005             ADDC    A,#108;108= 52*2+4=104+4=52¸ö¼ÇÂ¼£¬Ã¿¸ö¼ÇÂ¼2¸ö×Ö½Ú£¬4¸ö×Ö½ÚÈë¿Úunixtime
                    4006                     ;MOVX   @R1,A
0B6A 758301         4007             MOV     DPH,#1
0B6D 8982           4008             MOV     DPL,R1
0B6F F0             4009             MOVX    @DPTR,A
                    4010             ;---INC R0
                    4011             
0B70 18             4012             dec     r0
0B71 19             4013             dec     r1
                    4014             
                    4015                     ;MOVX   A,@R0
0B72 758301         4016             MOV     DPH,#1
0B75 8882           4017             MOV     DPL,R0
0B77 E0             4018             MOVX    A,@DPTR
0B78 3400           4019             ADDC    A,#0
                    4020                     ;MOVX   @R1,A
0B7A 758301         4021             MOV     DPH,#1
0B7D 8982           4022             MOV     DPL,R1
0B7F F0             4023             MOVX    @DPTR,A 
                    4024             
0B80 804E           4025             JMP     GSM_JSUnixtimeOff_UPDATEUNIXTIME        
                    4026             ;CellID ×ÜÊ²»Îª0
0B82                4027     GSM_JSUnixtimeOff_getLastCellIDaddrPY:
                    4028             
                    4029             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    4030             ;XDATA_HOLD[2] 33
                    4031             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    4032             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    4033             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID  
                    4034             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    4035             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿
0B82 7F00     F     4036             MOV     R7,#XDATA_HOLD+3         
0B84 7D00     F     4037             MOV     R5,#XDATA_HOLD+7 
0B86 120000   F     4038             CALL    _FUN_GSM_GetOffset
                    4039             
0B89 7800     F     4040             MOV     R0,#XDATA_HOLD+8 
                    4041                     ;MOVX   A,@R0
0B8B 758301         4042             MOV     DPH,#1
0B8E 8882           4043             MOV     DPL,R0
0B90 E0             4044             MOVX    A,@DPTR
0B91 C3             4045             CLR     C
0B92 3405           4046             ADDC    A,#5
                    4047                     ;MOVX   @R0,A
0B94 758301         4048             MOV     DPH,#1 
0B97 8882           4049             MOV     DPL,R0 
0B99 F0             4050             MOVX    @DPTR,A
                    4051             
                    4052             ;---INC R0
0B9A 18             4053             DEC     R0
                    4054                     ;MOVX   A,@R0
0B9B 758301         4055             MOV     DPH,#1
0B9E 8882           4056             MOV     DPL,R0
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    65

0BA0 E0             4057             MOVX    A,@DPTR
0BA1 3400           4058             ADDC    A,#0
                    4059                     ;MOVX   @R0,A
0BA3 758301         4060             MOV     DPH,#1 
0BA6 8882           4061             MOV     DPL,R0 
0BA8 F0             4062             MOVX    @DPTR,A
                    4063                             
0BA9 7F00     F     4064             MOV     R7,#XDATA_HOLD+3         
0BAB 7D00     F     4065             MOV     R5,#XDATA_HOLD+9 
0BAD 120000   F     4066             CALL    _FUN_GSM_GetOffset02
                    4067             
0BB0 7800     F     4068             MOV     R0,#XDATA_HOLD+10 
                    4069                     ;MOVX   A,@R0
0BB2 758301         4070             MOV     DPH,#1
0BB5 8882           4071             MOV     DPL,R0
0BB7 E0             4072             MOVX    A,@DPTR
0BB8 C3             4073             CLR     C
0BB9 346D           4074             ADDC    A,#109;113
                    4075                     ;MOVX   @R0,A
0BBB 758301         4076             MOV     DPH,#1 
0BBE 8882           4077             MOV     DPL,R0 
0BC0 F0             4078             MOVX    @DPTR,A
                    4079             ;---INC R0
0BC1 18             4080             DEC     R0
                    4081                     ;MOVX   A,@R0
0BC2 758301         4082             MOV     DPH,#1
0BC5 8882           4083             MOV     DPL,R0
0BC7 E0             4084             MOVX    A,@DPTR
0BC8 3400           4085             ADDC    A,#0
                    4086                     ;MOVX   @R0,A
0BCA 758301         4087             MOV     DPH,#1 
0BCD 8882           4088             MOV     DPL,R0 
0BCF F0             4089             MOVX    @DPTR,A
                    4090             
0BD0                4091     GSM_JSUnixtimeOff_UPDATEUNIXTIME:
                    4092             
                    4093             ;XDATA_HOLD[0~1] ÐÂÊÕµ½µÄ CellID
                    4094             ;XDATA_HOLD[2] 33
                    4095             ;XDATA_HOLD[3] ESAM CellID ¸öÊ
                    4096             ;XDATA_HOLD[4] ×î½ü³ö¿Ú¡¢Èë¿Ú³µµÀÀàÐÍ =0 Èë =1 ³ö
                    4097             ;XDATA_HOLD[5~6] ÉÏÒ»´Î×îºóÒ»¸ö CellID
                    4098             ;XDATA_HOLD[7~8] ÉÏÒ»´Î×îºóÒ»¸ö esam CellIDÆ«³ÌÁ¿       
                    4099             ;XDATA_HOLD[9~10] ÉÏÒ»´Î×îºóÒ»¸ö esam CellID unix timeÆ«³ÌÁ¿    
0BD0 D200     F     4100             SETB    BIT_GETRESULT
0BD2 C200     F     4101             CLR     BIT_ESAMICC     
                    4102             
                    4103     ;R5             ---     direct
0BD4 7D00     F     4104             MOV     R5,#DATA_RXBUF + 5
0BD6 7F00     F     4105             MOV     R7,#XDATA_UnixTime
                    4106             
                    4107     ;MOV    R0,#XDATA_UnixTime+3
                    4108     ;call   _fun_test_display       
                    4109             
0BD8 7B04           4110             MOV     R3,#4
0BDA 120000   F     4111             CALL    _FUN_LIB_XDATATODATA
                    4112             
                    4113             ;MOV    R0,#XDATA_HOLD; + 5
                    4114             ;CALL   _FUN_TEST_DISPLAY
                    4115             
                    4116             ;assign offset H/L into r4 / r3
                    4117             
0BDD C3             4118             CLR     c
0BDE 7800     F     4119             MOV     R0,#XDATA_HOLD+10
                    4120                     ;MOVX   A,@R0
0BE0 758301         4121             MOV     DPH,#1
0BE3 8882           4122             MOV     DPL,R0
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    66

0BE5 E0             4123             MOVX    A,@DPTR
                    4124             ;addc   a,#11
0BE6 FB             4125             mov     r3,a
                    4126     
0BE7 18             4127             dec     r0
                    4128             ;INC    R0
                    4129                     ;MOVX   A,@R0
0BE8 758301         4130             MOV     DPH,#1
0BEB 8882           4131             MOV     DPL,R0
0BED E0             4132             MOVX    A,@DPTR
                    4133             ;addc   a,#0
0BEE FC             4134             mov     r4,a
                    4135             ;call   _fun_test_display
                    4136             ;mov    r4,#0
                    4137             ;mov    r3,#00h 
0BEF 7F00     F     4138             MOV     R7,#DATA_RXBUF
0BF1 7D00     F     4139             MOV     R5,#XDATA_TXBUF
0BF3 7A04           4140             MOV     R2,#4;04H
0BF5 120000   F     4141             CALL    _FUN_CARDAPP_UpdateBinary
                    4142             
0BF8 EF             4143             MOV     A,R7
                    4144     
                    4145     
                    4146     
0BF9 22             4147             RET
                    4148     
                    4149     
                    4150     ;----------------------------------------------------------
                    4151     ;_Fun_GSM_GetCellID:
                    4152     
                    4153     ;//////////////////////////////////////////////////////////////////////////////////////////
                             /////
                    4154     ;----------------------------------------------------------
                    4155     
                    4156             END     
                             
                             
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    67

SYMBOL TABLE LISTING
------ ----- -------


N A M E                                    T Y P E  V A L U E   ATTRIBUTES

?CO?GSM?FLASHSTR. . . . . . . . . . . .    C SEG    00CEH       REL=UNIT
?PR?GSM?MATER . . . . . . . . . . . . .    C SEG    0BFAH       REL=UNIT
AP_START. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
AR0 . . . . . . . . . . . . . . . . . .    D ADDR   0000H   A   
AR1 . . . . . . . . . . . . . . . . . .    D ADDR   0001H   A   
AR2 . . . . . . . . . . . . . . . . . .    D ADDR   0002H   A   
AR3 . . . . . . . . . . . . . . . . . .    D ADDR   0003H   A   
AR5 . . . . . . . . . . . . . . . . . .    D ADDR   0005H   A   
AR6 . . . . . . . . . . . . . . . . . .    D ADDR   0006H   A   
AR7 . . . . . . . . . . . . . . . . . .    D ADDR   0007H   A   
B . . . . . . . . . . . . . . . . . . .    D ADDR   00F0H   A   
BIT_BUFADDR . . . . . . . . . . . . . .    B ADDR   -----       EXT
BIT_ESAMICC . . . . . . . . . . . . . .    B ADDR   -----       EXT
BIT_GETRESULT . . . . . . . . . . . . .    B ADDR   -----       EXT
BIT_HAVERECORDCELLID. . . . . . . . . .    B ADDR   -----       EXT
BIT_INSERTCARD. . . . . . . . . . . . .    B ADDR   -----       EXT
BIT_PPS . . . . . . . . . . . . . . . .    B ADDR   -----       EXT
BIT_SERIALOVERTIMERX. . . . . . . . . .    B ADDR   -----       EXT
BIT_VERIFY. . . . . . . . . . . . . . .    B ADDR   -----       EXT
BRT . . . . . . . . . . . . . . . . . .    N NUMB   009CH   A   
BUSY. . . . . . . . . . . . . . . . . .    B ADDR   0020H.0 A   
CCAP0H. . . . . . . . . . . . . . . . .    N NUMB   00FAH   A   
CCAP0L. . . . . . . . . . . . . . . . .    N NUMB   00EAH   A   
CCAP1H. . . . . . . . . . . . . . . . .    N NUMB   00FBH   A   
CCAP1L. . . . . . . . . . . . . . . . .    N NUMB   00EBH   A   
CCAP2H. . . . . . . . . . . . . . . . .    N NUMB   00FCH   A   
CCAP2L. . . . . . . . . . . . . . . . .    N NUMB   00ECH   A   
CCAP3H. . . . . . . . . . . . . . . . .    N NUMB   00FDH   A   
CCAP3L. . . . . . . . . . . . . . . . .    N NUMB   00EDH   A   
CCAP4H. . . . . . . . . . . . . . . . .    N NUMB   00FEH   A   
CCAP4L. . . . . . . . . . . . . . . . .    N NUMB   00EEH   A   
CCAP5H. . . . . . . . . . . . . . . . .    N NUMB   00FFH   A   
CCAP5L. . . . . . . . . . . . . . . . .    N NUMB   00EFH   A   
CCAPM0. . . . . . . . . . . . . . . . .    N NUMB   00DAH   A   
CCAPM1. . . . . . . . . . . . . . . . .    N NUMB   00DBH   A   
CCAPM2. . . . . . . . . . . . . . . . .    N NUMB   00DCH   A   
CCAPM3. . . . . . . . . . . . . . . . .    N NUMB   00DDH   A   
CCAPM4. . . . . . . . . . . . . . . . .    N NUMB   00DEH   A   
CCAPM5. . . . . . . . . . . . . . . . .    N NUMB   00DFH   A   
CCF0. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.0 A   
CCF1. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.1 A   
CCF2. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.2 A   
CCF3. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.3 A   
CCF4. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.4 A   
CCF5. . . . . . . . . . . . . . . . . .    B ADDR   00D8H.5 A   
CCON. . . . . . . . . . . . . . . . . .    N NUMB   00D8H   A   
CF. . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.7 A   
CH. . . . . . . . . . . . . . . . . . .    N NUMB   00F9H   A   
CL. . . . . . . . . . . . . . . . . . .    N NUMB   00E9H   A   
CMOD. . . . . . . . . . . . . . . . . .    N NUMB   00D9H   A   
CONST_ACTIONTYPE_GETRAND. . . . . . . .    N NUMB   0002H   A   
CONST_ACTIONTYPE_GETSECURE. . . . . . .    N NUMB   0000H   A   
CONST_ACTIONTYPE_SETMMI . . . . . . . .    N NUMB   0004H   A   
CONST_ACTIONTYPE_SETSECURE. . . . . . .    N NUMB   0001H   A   
CONST_ACTIONTYPE_TRANSFERCHANNEL. . . .    N NUMB   0003H   A   
CONST_ACT_H . . . . . . . . . . . . . .    N NUMB   0003H   A   
CONST_ACT_H_H . . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_H_L . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_L . . . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_ACT_L_H . . . . . . . . . . . . .    N NUMB   0006H   A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    68

CONST_ACT_L_L . . . . . . . . . . . . .    N NUMB   000AH   A   
CONST_ACT_M . . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_ACT_M_H . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_ACT_M_L . . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_ACT_V . . . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200 . . . . . . . . . . .    N NUMB   0002H   A   
CONST_BAUD_115200PC . . . . . . . . . .    N NUMB   0003H   A   
CONST_BAUD_230000 . . . . . . . . . . .    N NUMB   0004H   A   
CONST_BAUD_38400. . . . . . . . . . . .    N NUMB   0001H   A   
CONST_BAUD_38400PC. . . . . . . . . . .    N NUMB   0005H   A   
CONST_BAUD_9600 . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_BAUD_9600PC . . . . . . . . . . .    N NUMB   0006H   A   
CONST_BAUD_BITFULL12. . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_BITFULL20. . . . . . . . . .    N NUMB   000EH   A   
CONST_BAUD_BITFULL28. . . . . . . . . .    N NUMB   0010H   A   
CONST_BAUD_BITFULL8 . . . . . . . . . .    N NUMB   000BH   A   
CONST_BAUD_BITHALF12. . . . . . . . . .    N NUMB   000CH   A   
CONST_BAUD_CURRENTBITFULL . . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_CURRENTBITHALF . . . . . . .    N NUMB   0058H   A   
CONST_BAUD_FULL115200 . . . . . . . . .    N NUMB   001DH   A   
CONST_BAUD_FULL230000 . . . . . . . . .    N NUMB   000FH   A   
CONST_BAUD_FULL38400. . . . . . . . . .    N NUMB   005DH   A   
CONST_BAUD_FULL9600 . . . . . . . . . .    N NUMB   00B3H   A   
CONST_BAUD_HALF115200 . . . . . . . . .    N NUMB   000DH   A   
CONST_BAUD_HALF230000 . . . . . . . . .    N NUMB   0008H   A   
CONST_BAUD_HALF38400. . . . . . . . . .    N NUMB   002DH   A   
CONST_BAUD_HALF9600 . . . . . . . . . .    N NUMB   0058H   A   
CONST_BAUD_HAND115200 . . . . . . . . .    N NUMB   00F8H   A   
CONST_BAUD_HAND115200PC . . . . . . . .    N NUMB   00F3H   A   
CONST_BAUD_HAND230000 . . . . . . . . .    N NUMB   00FCH   A   
CONST_BAUD_HAND38400. . . . . . . . . .    N NUMB   00E9H   A   
CONST_BAUD_HAND38400PC. . . . . . . . .    N NUMB   00D8H   A   
CONST_BAUD_HAND9600 . . . . . . . . . .    N NUMB   00A3H   A   
CONST_BAUD_HAND9600PC . . . . . . . . .    N NUMB   0060H   A   
CONST_BLACK_H . . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BLACK_L . . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_BSTLIMIT. . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_BSTLIMIT02. . . . . . . . . . . .    N NUMB   0064H   A   
CONST_CARD_CONSUME. . . . . . . . . . .    N NUMB   0016H   A   
CONST_CARD_PASS . . . . . . . . . . . .    N NUMB   0017H   A   
CONST_CELLFILE_H. . . . . . . . . . . .    N NUMB   0000H   A   
CONST_CELLFILE_L. . . . . . . . . . . .    N NUMB   0009H   A   
CONST_DATA_VALUE1 . . . . . . . . . . .    N NUMB   000FH   A   
CONST_DATA_VALUE2 . . . . . . . . . . .    N NUMB   00DEH   A   
CONST_DSRC_ACTION . . . . . . . . . . .    N NUMB   0007H   A   
CONST_DSRC_ACTIONTYPE . . . . . . . . .    N NUMB   0009H   A   
CONST_DSRC_CHANNELIDICC . . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_CHANNELIDSAM . . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_CONTAIN. . . . . . . . . . .    N NUMB   000AH   A   
CONST_DSRC_DID. . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_DSRC_FILDIDAPPKEY . . . . . . . .    N NUMB   0000H   A   
CONST_DSRC_FILDIDCONSUME. . . . . . . .    N NUMB   0002H   A   
CONST_DSRC_FILDIDHOLD . . . . . . . . .    N NUMB   0003H   A   
CONST_DSRC_FILDIDVEHICLE. . . . . . . .    N NUMB   0001H   A   
CONST_DSRC_FILL . . . . . . . . . . . .    N NUMB   000BH   A   
CONST_DSRC_HEAD . . . . . . . . . . . .    N NUMB   0006H   A   
CONST_DSRC_LLCCTRL. . . . . . . . . . .    N NUMB   0005H   A   
CONST_DSRC_MACCTRL. . . . . . . . . . .    N NUMB   0004H   A   
CONST_ESAMCELLFILE_H. . . . . . . . . .    N NUMB   00EFH   A   
CONST_ESAMCELLFILE_L. . . . . . . . . .    N NUMB   0007H   A   
CONST_ETC_INPUT . . . . . . . . . . . .    N NUMB   0003H   A   
CONST_FALSH_POWERH. . . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_POWERL. . . . . . . . . . .    N NUMB   00F7H   A   
CONST_FALSH_PREFLAG02H. . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAG02L. . . . . . . . .    N NUMB   00F5H   A   
CONST_FALSH_PREFLAG03H. . . . . . . . .    N NUMB   0072H   A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    69

CONST_FALSH_PREFLAG03L. . . . . . . . .    N NUMB   00F6H   A   
CONST_FALSH_PREFLAGH. . . . . . . . . .    N NUMB   0072H   A   
CONST_FALSH_PREFLAGL. . . . . . . . . .    N NUMB   00F4H   A   
CONST_FALSH_PREFLAGLEN. . . . . . . . .    N NUMB   0001H   A   
CONST_FLAG_INPUT. . . . . . . . . . . .    N NUMB   0000H   A   
CONST_FLAG_OUTPUT . . . . . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_0002H . . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0002L . . . . . . . . . . .    N NUMB   0058H   A   
CONST_FLASH_0002LEN . . . . . . . . . .    N NUMB   0004H   A   
CONST_FLASH_0012H . . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0012L . . . . . . . . . . .    N NUMB   005CH   A   
CONST_FLASH_0012LEN . . . . . . . . . .    N NUMB   0028H   A   
CONST_FLASH_0015H . . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0015L . . . . . . . . . . .    N NUMB   0084H   A   
CONST_FLASH_0015LEN . . . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019GBLEN . . . . . . . . .    N NUMB   002BH   A   
CONST_FLASH_0019H . . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_0019L . . . . . . . . . . .    N NUMB   00AFH   A   
CONST_FLASH_0019LEN . . . . . . . . . .    N NUMB   003CH   A   
CONST_FLASH_BEACONIDUNIXTIMEH . . . . .    N NUMB   0072H   A   
CONST_FLASH_BEACONIDUNIXTIMEL . . . . .    N NUMB   00ECH   A   
CONST_FLASH_BEACONIDUNIXTIMELEN . . . .    N NUMB   0008H   A   
CONST_FLASH_BLOCK01 . . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_CARDTYPELEN . . . . . . . .    N NUMB   0001H   A   
CONST_FLASH_FILELEN . . . . . . . . . .    N NUMB   00ECH   A   
CONST_FLASH_LASTCARDH . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_LASTCARDL . . . . . . . . .    N NUMB   00EBH   A   
CONST_FLASH_STARTHIGH . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_STARTLOW. . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020H. . . . . . . . . .    N NUMB   006CH   A   
CONST_FLASH_SYS0020L. . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYS0020NUMH . . . . . . . .    N NUMB   006AH   A   
CONST_FLASH_SYS0020NUML . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOH. . . . . . . . . .    N NUMB   0072H   A   
CONST_FLASH_SYSINFOL. . . . . . . . . .    N NUMB   0000H   A   
CONST_FLASH_SYSINFOLEN. . . . . . . . .    N NUMB   0058H   A   
CONST_GDO2_MCSM2. . . . . . . . . . . .    N NUMB   0002H   A   
CONST_GDO2_VALUE. . . . . . . . . . . .    N NUMB   0046H   A   
CONST_GSM_MAXNUM. . . . . . . . . . . .    N NUMB   00F0H   A   
CONST_GSM_NUM . . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_GSM_PJNUM . . . . . . . . . . . .    N NUMB   0014H   A   
CONST_HANDSECOND. . . . . . . . . . . .    N NUMB   0015H   A   
CONST_HOLD_5823RX . . . . . . . . . . .    N NUMB   0000H   A   
CONST_HOLD_5823TX . . . . . . . . . . .    N NUMB   0001H   A   
CONST_INPUT_ISENABLE. . . . . . . . . .    N NUMB   0001H   A   
CONST_LHX_FLAG. . . . . . . . . . . . .    N NUMB   0002H   A   
CONST_MAX_RXNUM . . . . . . . . . . . .    N NUMB   0005H   A   
CONST_MCU_WKCTH . . . . . . . . . . . .    N NUMB   0008H   A   
CONST_MCU_WKCTL . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_MF_DECREMENT. . . . . . . . . . .    N NUMB   0002H   A   
CONST_MF_INCREMENT. . . . . . . . . . .    N NUMB   0003H   A   
CONST_MF_RC500DECREMENT . . . . . . . .    N NUMB   00C0H   A   
CONST_MF_RC500INCREMENT . . . . . . . .    N NUMB   00C1H   A   
CONST_MF_READ . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_MF_RESTOR . . . . . . . . . . . .    N NUMB   0004H   A   
CONST_MF_WRITE. . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_MTC_INPUT . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_PPS_115200. . . . . . . . . . . .    N NUMB   0018H   A   
CONST_PPS_230000. . . . . . . . . . . .    N NUMB   0096H   A   
CONST_PPS_38400 . . . . . . . . . . . .    N NUMB   0013H   A   
CONST_PPS_9600. . . . . . . . . . . . .    N NUMB   0010H   A   
CONST_PRO_OVERTIME2S. . . . . . . . . .    N NUMB   00FAH   A   
CONST_RTCOVERFLOW . . . . . . . . . . .    N NUMB   0090H   A   
CONST_RTC_OFF . . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_RTC_ON. . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SOF . . . . . . . . . . . . . . .    N NUMB   0000H   A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    70

CONST_SOFTBYTESP. . . . . . . . . . . .    N NUMB   0014H   A   
CONST_SOFTFIRSTSCANTIME . . . . . . . .    N NUMB   0010H   A   
CONST_SOFTFIRSTSCANTIMEXX . . . . . . .    N NUMB   00FFH   A   
CONST_SOFTSECOND. . . . . . . . . . . .    N NUMB   0070H   A   
CONST_SSRC_FID. . . . . . . . . . . . .    N NUMB   000CH   A   
CONST_STATE_5823INIER . . . . . . . . .    N NUMB   0007H   A   
CONST_STATE_5823SLEEPER . . . . . . . .    N NUMB   0008H   A   
CONST_STATE_ACCEPTOVER. . . . . . . . .    N NUMB   0003H   A   
CONST_STATE_ACCEPTOVERLEN . . . . . . .    N NUMB   0004H   A   
CONST_STATE_ACTCARDINVALID. . . . . . .    N NUMB   0006H   A   
CONST_STATE_ACTIVEFAIL. . . . . . . . .    N NUMB   0004H   A   
CONST_STATE_AUTHER. . . . . . . . . . .    N NUMB   0006H   A   
CONST_STATE_BASE01ANTICOLL. . . . . . .    N NUMB   001DH   A   
CONST_STATE_BASE01CONTACT . . . . . . .    N NUMB   0015H   A   
CONST_STATE_BASE01ESAMDF01. . . . . . .    N NUMB   0014H   A   
CONST_STATE_BASE01RATS. . . . . . . . .    N NUMB   001FH   A   
CONST_STATE_BASE01RE. . . . . . . . . .    N NUMB   001CH   A   
CONST_STATE_BASE01SEL . . . . . . . . .    N NUMB   001EH   A   
CONST_STATE_BASE02ANTICOLL. . . . . . .    N NUMB   0019H   A   
CONST_STATE_BASE02CONTACT . . . . . . .    N NUMB   0016H   A   
CONST_STATE_BASE02RATS. . . . . . . . .    N NUMB   001BH   A   
CONST_STATE_BASE02RE. . . . . . . . . .    N NUMB   0018H   A   
CONST_STATE_BASE02SEL . . . . . . . . .    N NUMB   001AH   A   
CONST_STATE_BASEESAMDF01. . . . . . . .    N NUMB   000BH   A   
CONST_STATE_BASEN01INIT . . . . . . . .    N NUMB   0013H   A   
CONST_STATE_BASENINIT . . . . . . . . .    N NUMB   000AH   A   
CONST_STATE_CARDPREDEAL0002 . . . . . .    N NUMB   000DH   A   
CONST_STATE_CARDPREDEAL0012 . . . . . .    N NUMB   000EH   A   
CONST_STATE_CARDPREDEAL0015 . . . . . .    N NUMB   000FH   A   
CONST_STATE_CARDPREDEAL0019 . . . . . .    N NUMB   0010H   A   
CONST_STATE_CARDPREDEAL1001 . . . . . .    N NUMB   000CH   A   
CONST_STATE_CARDPREDEAL3F00 . . . . . .    N NUMB   0011H   A   
CONST_STATE_CARDPREDEAL81 . . . . . . .    N NUMB   0012H   A   
CONST_STATE_EXMEMORYER. . . . . . . . .    N NUMB   0021H   A   
CONST_STATE_EXMEMORYER02. . . . . . . .    N NUMB   0022H   A   
CONST_STATE_FALSE . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_STATE_GETSECURESELFILEER. . . . .    N NUMB   0009H   A   
CONST_STATE_ILLEGALACTCARD. . . . . . .    N NUMB   0005H   A   
CONST_STATE_ILLEGALINPUTCARD. . . . . .    N NUMB   0002H   A   
CONST_STATE_INPUTCARDINVALID. . . . . .    N NUMB   0003H   A   
CONST_STATE_INPUTFAIL . . . . . . . . .    N NUMB   0001H   A   
CONST_STATE_MEMORYER. . . . . . . . . .    N NUMB   0020H   A   
CONST_STATE_RSTCPUER. . . . . . . . . .    N NUMB   0005H   A   
CONST_STATE_SERIALACCPET. . . . . . . .    N NUMB   0001H   A   
CONST_STATE_SERIALOVERTIME. . . . . . .    N NUMB   0002H   A   
CONST_STATE_TEST. . . . . . . . . . . .    N NUMB   0017H   A   
CONST_STATE_TRUE. . . . . . . . . . . .    N NUMB   0000H   A   
CONST_SYS_55. . . . . . . . . . . . . .    N NUMB   0055H   A   
CONST_SYS_AA. . . . . . . . . . . . . .    N NUMB   00AAH   A   
CONST_SYS_OBUIDLEN. . . . . . . . . . .    N NUMB   0004H   A   
CONST_SYS_POWERONTIMER. . . . . . . . .    N NUMB   000AH   A   
CONST_SYS_PREFLAG . . . . . . . . . . .    N NUMB   0088H   A   
CONST_SYS_RTCOVERTIME . . . . . . . . .    N NUMB   0064H   A   
CONST_SYS_TRADECONFINE. . . . . . . . .    N NUMB   00FFH   A   
CONST_TIMEER02. . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_TIMEER03. . . . . . . . . . . . .    N NUMB   00FEH   A   
CONST_TIMEER04. . . . . . . . . . . . .    N NUMB   0001H   A   
CONST_VSTLIMIT. . . . . . . . . . . . .    N NUMB   00FFH   A   
CONST_WHITE_H . . . . . . . . . . . . .    N NUMB   0000H   A   
CONST_WHITE_L . . . . . . . . . . . . .    N NUMB   0031H   A   
CONST_WORKSTAION_0. . . . . . . . . . .    N NUMB   0000H   A   
CONST_WORKSTAION_1. . . . . . . . . . .    N NUMB   0001H   A   
CONST_WORKSTAION_2. . . . . . . . . . .    N NUMB   0002H   A   
CONST_WORKSTAION_3. . . . . . . . . . .    N NUMB   0003H   A   
CONTACTISSUE_RX02_DEAL. . . . . . . . .    C ADDR   -----       EXT
CR. . . . . . . . . . . . . . . . . . .    B ADDR   00D8H.6 A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    71

DATA_RXBUF. . . . . . . . . . . . . . .    D ADDR   -----       EXT
DPH . . . . . . . . . . . . . . . . . .    D ADDR   0083H   A   
DPL . . . . . . . . . . . . . . . . . .    D ADDR   0082H   A   
EPCAI . . . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
EPCA_LVD. . . . . . . . . . . . . . . .    B ADDR   00A8H.6 A   
GSM . . . . . . . . . . . . . . . . . .    N NUMB   -----       
GSM_COMPAREUNIXTIME2_LOOP2. . . . . . .    C ADDR   01B1H   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME2_OVER . . . . . . .    C ADDR   01C5H   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME2_S. . . . . . . . .    C ADDR   01A2H   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME_LOOP1 . . . . . . .    C ADDR   0163H   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME_LOOP2 . . . . . . .    C ADDR   018BH   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME_OVER. . . . . . . .    C ADDR   01A1H   R   SEG=?PR?GSM?MATER
GSM_COMPAREUNIXTIME_S . . . . . . . . .    C ADDR   017CH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_COMPY. . . . . . . . . . . .    C ADDR   02E6H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_KS . . . . . . . . . . . . .    C ADDR   02D4H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_NORECORD . . . . . . . . . .    C ADDR   02D1H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_OVER . . . . . . . . . . . .    C ADDR   060FH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_OVERZZ02 . . . . . . . . . .    C ADDR   054AH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_OVERZZ03 . . . . . . . . . .    C ADDR   0572H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_QYESAMUNIXONE. . . . . . . .    C ADDR   04E2H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_QYESAMUNIXONEUP. . . . . . .    C ADDR   050EH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_QYESAMUNIXOVER . . . . . . .    C ADDR   05F3H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_QYESAMUNIXS2 . . . . . . . .    C ADDR   04D5H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_QYESAMUNIXTWO. . . . . . . .    C ADDR   054DH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATAONE. . . . . . .    C ADDR   03AFH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATAONEUP. . . . . .    C ADDR   03DBH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATAOVER . . . . . .    C ADDR   04C3H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATAOVERZZ . . . . .    C ADDR   0417H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATAS. . . . . . . .    C ADDR   03A2H   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATATWO. . . . . . .    C ADDR   041AH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATATWOJS. . . . . .    C ADDR   046DH   R   SEG=?PR?GSM?MATER
GSM_ESAMQY_READESAMDATATWOUP. . . . . .    C ADDR   043FH   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARDRV5 . . . . . . . . .    C ADDR   067DH   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARDRVDATA2 . . . . . . .    C ADDR   0646H   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARDRVUNIX. . . . . . . .    C ADDR   06B1H   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARDUPDATA02. . . . . . .    C ADDR   065DH   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARDUPDATA1 . . . . . . .    C ADDR   0627H   R   SEG=?PR?GSM?MATER
GSM_ESAMTOUSERCARD_OVER . . . . . . . .    C ADDR   06DDH   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_ER. . . . . . . . . .    C ADDR   02ACH   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_LOOP. . . . . . . . .    C ADDR   0267H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_OVER. . . . . . . . .    C ADDR   0297H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_READNUM . . . . . . .    C ADDR   0225H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_READNUMOV . . . . . .    C ADDR   0250H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_READNUMSY . . . . . .    C ADDR   021BH   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_RVLOOP. . . . . . . .    C ADDR   01F4H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_RVLOOPPRE . . . . . .    C ADDR   01E7H   R   SEG=?PR?GSM?MATER
GSM_GETRECORDCODE_RVLOOPZZ. . . . . . .    C ADDR   028FH   R   SEG=?PR?GSM?MATER
GSM_INSERT_COMPAREUNIXTIME. . . . . . .    C ADDR   014BH   R   SEG=?PR?GSM?MATER
GSM_INSERT_DAYU . . . . . . . . . . . .    C ADDR   0154H   R   SEG=?PR?GSM?MATER
GSM_INSERT_INPUT. . . . . . . . . . . .    C ADDR   014BH   R   SEG=?PR?GSM?MATER
GSM_INSERT_OUTPUT . . . . . . . . . . .    C ADDR   00ADH   R   SEG=?PR?GSM?MATER
GSM_INSERT_OVER . . . . . . . . . . . .    C ADDR   015AH   R   SEG=?PR?GSM?MATER
GSM_INSERT_READESAMBASEINFO . . . . . .    C ADDR   0006H   R   SEG=?PR?GSM?MATER
GSM_INSERT_READESAMBASEINFO02 . . . . .    C ADDR   003BH   R   SEG=?PR?GSM?MATER
GSM_INSERT_READESAMBASEINFO3. . . . . .    C ADDR   0087H   R   SEG=?PR?GSM?MATER
GSM_INSERT_READESAMBASEINFO4. . . . . .    C ADDR   009EH   R   SEG=?PR?GSM?MATER
GSM_INSERT_READUSERBASEINFO . . . . . .    C ADDR   0052H   R   SEG=?PR?GSM?MATER
GSM_INSERT_XIAODUNYU. . . . . . . . . .    C ADDR   0157H   R   SEG=?PR?GSM?MATER
GSM_JSUNIXTIMEOFF_GETLASTCELLIDADDRPY .    C ADDR   0B82H   R   SEG=?PR?GSM?MATER
GSM_JSUNIXTIMEOFF_UPDATEUNIXTIME. . . .    C ADDR   0BD0H   R   SEG=?PR?GSM?MATER
GSM_REPORTMSG_OVER. . . . . . . . . . .    C ADDR   0AC1H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_COMPARECELLID . . . . .    C ADDR   07C4H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_COMPARECELLIDOVER . . .    C ADDR   0871H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_ESAMOVER. . . . . . . .    C ADDR   0910H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_GETLASTCELLIDADDR00 . .    C ADDR   07ECH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_GETLASTCELLIDADDROV . .    C ADDR   0871H   R   SEG=?PR?GSM?MATER
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    72

GSM_SERIALINTRX_GETLASTCELLIDADDRPY . .    C ADDR   0823H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_GETOFFSET . . . . . . .    C ADDR   07E2H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_ISNOTMAX. . . . . . . .    C ADDR   07B4H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_LOWVO . . . . . . . . .    C ADDR   07A4H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_OUTPUTOVVV. . . . . . .    C ADDR   07DFH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_OVER. . . . . . . . . .    C ADDR   0A83H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_RXRIGHT . . . . . . . .    C ADDR   0751H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_SELECTFILE. . . . . . .    C ADDR   076FH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_UPDATAESAM. . . . . . .    C ADDR   08CDH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_UPDATAESAMUNIX. . . . .    C ADDR   089FH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDCOMPARECELLID .    C ADDR   096DH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDCOMPARECELLIDOVER  C ADDR   0A15H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDESAM. . . . . .    C ADDR   0A80H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDGETLASTCELLIDADDR00C ADDR   0990H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDGETLASTCELLIDADDROVC ADDR   0A15H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDGETLASTCELLIDADDRPYC ADDR   09C7H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDGETOFFSET . . .    C ADDR   0986H   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDISNOTMAX. . . .    C ADDR   095DH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDLOWVO . . . . .    C ADDR   094DH   R   SEG=?PR?GSM?MATER
GSM_SERIALINTRX_USERCARDSTART . . . . .    C ADDR   0918H   R   SEG=?PR?GSM?MATER
IE. . . . . . . . . . . . . . . . . . .    D ADDR   00A8H   A   
IE2 . . . . . . . . . . . . . . . . . .    N NUMB   00AFH   A   
INSERT_OUTPUT_LOOP. . . . . . . . . . .    C ADDR   00CEH   R   SEG=?PR?GSM?MATER
INSERT_OUTPUT_LOOPCLR . . . . . . . . .    C ADDR   00B6H   R   SEG=?PR?GSM?MATER
IPH . . . . . . . . . . . . . . . . . .    N NUMB   00B7H   A   
ISP_CONTR . . . . . . . . . . . . . . .    N NUMB   00C7H   A   
MONEY . . . . . . . . . . . . . . . . .    D ADDR   -----       EXT
P0. . . . . . . . . . . . . . . . . . .    D ADDR   0080H   A   
P1. . . . . . . . . . . . . . . . . . .    D ADDR   0090H   A   
P2. . . . . . . . . . . . . . . . . . .    D ADDR   00A0H   A   
P3. . . . . . . . . . . . . . . . . . .    D ADDR   00B0H   A   
P4. . . . . . . . . . . . . . . . . . .    N NUMB   00C0H   A   
PCA_PWM0. . . . . . . . . . . . . . . .    N NUMB   00F2H   A   
PCA_PWM1. . . . . . . . . . . . . . . .    N NUMB   00F3H   A   
PCA_PWM2. . . . . . . . . . . . . . . .    N NUMB   00F4H   A   
PCA_PWM3. . . . . . . . . . . . . . . .    N NUMB   00F5H   A   
PCA_PWM4. . . . . . . . . . . . . . . .    N NUMB   00F6H   A   
PCA_PWM5. . . . . . . . . . . . . . . .    N NUMB   00F7H   A   
PIN_522_MISO. . . . . . . . . . . . . .    B ADDR   00C0H.1 A   
PIN_522_MOSI. . . . . . . . . . . . . .    B ADDR   00C0H.6 A   
PIN_522_RST . . . . . . . . . . . . . .    B ADDR   0080H.4 A   
PIN_522_SCLK. . . . . . . . . . . . . .    B ADDR   0080H.7 A   
PIN_522_SS. . . . . . . . . . . . . . .    B ADDR   0080H.6 A   
PIN_5823BK_CS . . . . . . . . . . . . .    B ADDR   0090H.0 A   
PIN_5823BK_IRQ. . . . . . . . . . . . .    B ADDR   0090H.2 A   
PIN_5823BK_MISO . . . . . . . . . . . .    B ADDR   0080H.0 A   
PIN_5823BK_MOSI . . . . . . . . . . . .    B ADDR   0080H.1 A   
PIN_5823BK_SCLK . . . . . . . . . . . .    B ADDR   00C0H.2 A   
PIN_BELL_01 . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BELL_02 . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_BK_CE . . . . . . . . . . . . . . .    B ADDR   0090H.1 A   
PIN_CARD_EXIST. . . . . . . . . . . . .    B ADDR   00B0H.3 A   
PIN_ESAM_RST. . . . . . . . . . . . . .    B ADDR   0080H.5 A   
PIN_ESAM_RX . . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ESAM_TX . . . . . . . . . . . . . .    B ADDR   0080H.3 A   
PIN_ES_RST. . . . . . . . . . . . . . .    B ADDR   00A0H.6 A   
PIN_GRE . . . . . . . . . . . . . . . .    B ADDR   00C0H.4 A   
PIN_LCD_CS. . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_DC. . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_RST . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SCL . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_LCD_SDA . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_OUTPUT_CLK. . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_PWRDWN. . . . . . . . . . . . . . .    B ADDR   00A0H.4 A   
PIN_PWRDWN_LCD. . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_PWR_GSM . . . . . . . . . . . . . .    B ADDR   00A0H.3 A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    73

PIN_PWR_LOWIO . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_PWR_SE. . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_RED . . . . . . . . . . . . . . . .    B ADDR   00C0H.5 A   
PIN_SE_IO1. . . . . . . . . . . . . . .    B ADDR   00B0H.4 A   
PIN_SOFTSERIALRX. . . . . . . . . . . .    B ADDR   00B0H.0 A   
PIN_SOFTSERIALTXH . . . . . . . . . . .    B ADDR   00B0H.1 A   
PIN_SW. . . . . . . . . . . . . . . . .    B ADDR   0090H.5 A   
PIN_UART2_RX. . . . . . . . . . . . . .    B ADDR   0090H.6 A   
PIN_UART2_TX. . . . . . . . . . . . . .    B ADDR   0090H.7 A   
PIN_UNFIX . . . . . . . . . . . . . . .    B ADDR   00B0H.5 A   
PIN_WAVE_CHANNEL1 . . . . . . . . . . .    B ADDR   0080H.2 A   
PIN_WAVE_RX . . . . . . . . . . . . . .    B ADDR   0080H.2 A   
READ_BURST. . . . . . . . . . . . . . .    N NUMB   00C0H   A   
REG_51_AUXR1. . . . . . . . . . . . . .    N NUMB   00A2H   A   
REG_5412AD_AUXR . . . . . . . . . . . .    N NUMB   008EH   A   
REG_5412AD_P0M0 . . . . . . . . . . . .    N NUMB   0094H   A   
REG_5412AD_P0M1 . . . . . . . . . . . .    N NUMB   0093H   A   
REG_5412AD_P1M0 . . . . . . . . . . . .    N NUMB   0092H   A   
REG_5412AD_P1M1 . . . . . . . . . . . .    N NUMB   0091H   A   
REG_5412AD_P2M0 . . . . . . . . . . . .    N NUMB   0096H   A   
REG_5412AD_P2M1 . . . . . . . . . . . .    N NUMB   0095H   A   
REG_5412AD_P3M0 . . . . . . . . . . . .    N NUMB   00B2H   A   
REG_5412AD_P3M1 . . . . . . . . . . . .    N NUMB   00B1H   A   
REG_5412AD_P4M0 . . . . . . . . . . . .    N NUMB   00B4H   A   
REG_5412AD_P4M1 . . . . . . . . . . . .    N NUMB   00B3H   A   
REG_5412AD_P4SW . . . . . . . . . . . .    N NUMB   00BBH   A   
REG_5412AD_SPCTL. . . . . . . . . . . .    N NUMB   0085H   A   
REG_5412AD_SPDAT. . . . . . . . . . . .    N NUMB   0086H   A   
REG_5412AD_SPSTAT . . . . . . . . . . .    N NUMB   0084H   A   
REG_MCU_WKCTH . . . . . . . . . . . . .    N NUMB   00ABH   A   
REG_MCU_WKCTL . . . . . . . . . . . . .    N NUMB   00AAH   A   
REG_RC522_BITFRAMINGREG . . . . . . . .    N NUMB   000DH   A   
REG_RC522_COLLREG . . . . . . . . . . .    N NUMB   000EH   A   
REG_RC522_COMIENREG . . . . . . . . . .    N NUMB   0002H   A   
REG_RC522_COMIRQREG . . . . . . . . . .    N NUMB   0004H   A   
REG_RC522_COMMANDREG. . . . . . . . . .    N NUMB   0001H   A   
REG_RC522_CONTROLREG. . . . . . . . . .    N NUMB   000CH   A   
REG_RC522_CRCRESULTREGH . . . . . . . .    N NUMB   0021H   A   
REG_RC522_CRCRESULTREGL . . . . . . . .    N NUMB   0022H   A   
REG_RC522_CWGSPREG. . . . . . . . . . .    N NUMB   0028H   A   
REG_RC522_DEMODREG. . . . . . . . . . .    N NUMB   0019H   A   
REG_RC522_DIVIENREG . . . . . . . . . .    N NUMB   0003H   A   
REG_RC522_DIVIRQREG . . . . . . . . . .    N NUMB   0005H   A   
REG_RC522_ERRORREG. . . . . . . . . . .    N NUMB   0006H   A   
REG_RC522_FIFODATAREG . . . . . . . . .    N NUMB   0009H   A   
REG_RC522_FIFOLEVELREG. . . . . . . . .    N NUMB   000AH   A   
REG_RC522_GSNREG. . . . . . . . . . . .    N NUMB   0027H   A   
REG_RC522_MIFAREREG . . . . . . . . . .    N NUMB   001CH   A   
REG_RC522_MODEREG . . . . . . . . . . .    N NUMB   0011H   A   
REG_RC522_MODGSPREG . . . . . . . . . .    N NUMB   0029H   A   
REG_RC522_MODWIDTHREG . . . . . . . . .    N NUMB   0024H   A   
REG_RC522_RC522PAGE . . . . . . . . . .    N NUMB   0000H   A   
REG_RC522_RFCFGREG. . . . . . . . . . .    N NUMB   0026H   A   
REG_RC522_RFU . . . . . . . . . . . . .    N NUMB   000FH   A   
REG_RC522_RXMODEREG . . . . . . . . . .    N NUMB   0013H   A   
REG_RC522_RXSELREG. . . . . . . . . . .    N NUMB   0017H   A   
REG_RC522_RXTHRESHOLDREG. . . . . . . .    N NUMB   0018H   A   
REG_RC522_SERIALSPEEDREG. . . . . . . .    N NUMB   001FH   A   
REG_RC522_STATUS1REG. . . . . . . . . .    N NUMB   0007H   A   
REG_RC522_STATUS2REG. . . . . . . . . .    N NUMB   0008H   A   
REG_RC522_TCOUNTERVALUEREGH . . . . . .    N NUMB   002EH   A   
REG_RC522_TCOUNTERVALUEREGL . . . . . .    N NUMB   002FH   A   
REG_RC522_TMODEREG. . . . . . . . . . .    N NUMB   002AH   A   
REG_RC522_TPRESCALERREG . . . . . . . .    N NUMB   002BH   A   
REG_RC522_TRELOADREGH . . . . . . . . .    N NUMB   002CH   A   
REG_RC522_TRELOADREGL . . . . . . . . .    N NUMB   002DH   A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    74

REG_RC522_TXAUTOREG . . . . . . . . . .    N NUMB   0015H   A   
REG_RC522_TXCONTROLREG. . . . . . . . .    N NUMB   0014H   A   
REG_RC522_TXMODEREG . . . . . . . . . .    N NUMB   0012H   A   
REG_RC522_TXSELREG. . . . . . . . . . .    N NUMB   0016H   A   
REG_RC522_WATERLEVELREG . . . . . . . .    N NUMB   000BH   A   
REG_SYS_BRT . . . . . . . . . . . . . .    N NUMB   009CH   A   
REG_WAKECLK0. . . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WAKECLK_04. . . . . . . . . . . . .    B ADDR   00D8H.4 A   
REG_WAKECLK_05. . . . . . . . . . . . .    B ADDR   00D8H.5 A   
REG_WAKE_CLK0 . . . . . . . . . . . . .    N NUMB   008FH   A   
REG_WDT_CONTR . . . . . . . . . . . . .    N NUMB   00C1H   A   
RELOAD2_CONTR . . . . . . . . . . . . .    N NUMB   00EAH   A   
S2BUF . . . . . . . . . . . . . . . . .    N NUMB   009BH   A   
S2CON . . . . . . . . . . . . . . . . .    N NUMB   009AH   A   
STR_CHANG . . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_ERRCARD . . . . . . . . . . . . . .    C ADDR   -----       EXT
STR_GSM_CRR . . . . . . . . . . . . . .    C ADDR   005CH   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_GETCELLID . . . . . . . . . . .    C ADDR   00BEH   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_INPUT . . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_NYJLGS. . . . . . . . . . . . .    C ADDR   0075H   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_NYXGS . . . . . . . . . . . . .    C ADDR   008EH   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_OUTPUT. . . . . . . . . . . . .    C ADDR   0016H   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_RRING . . . . . . . . . . . . .    C ADDR   0045H   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_SRR . . . . . . . . . . . . . .    C ADDR   002CH   R   SEG=?CO?GSM?FLASHSTR
STR_GSM_VOTALOW . . . . . . . . . . . .    C ADDR   00A5H   R   SEG=?CO?GSM?FLASHSTR
TI_CCXXX0_ADDR. . . . . . . . . . . . .    N NUMB   0009H   A   
TI_CCXXX0_AGCCTRL0. . . . . . . . . . .    N NUMB   001DH   A   
TI_CCXXX0_AGCCTRL1. . . . . . . . . . .    N NUMB   001CH   A   
TI_CCXXX0_AGCCTRL2. . . . . . . . . . .    N NUMB   001BH   A   
TI_CCXXX0_AGCTEST . . . . . . . . . . .    N NUMB   002BH   A   
TI_CCXXX0_BSCFG . . . . . . . . . . . .    N NUMB   001AH   A   
TI_CCXXX0_CHANNR. . . . . . . . . . . .    N NUMB   000AH   A   
TI_CCXXX0_DEVIATN . . . . . . . . . . .    N NUMB   0015H   A   
TI_CCXXX0_FIFOTHR . . . . . . . . . . .    N NUMB   0003H   A   
TI_CCXXX0_FOCCFG. . . . . . . . . . . .    N NUMB   0019H   A   
TI_CCXXX0_FREND0. . . . . . . . . . . .    N NUMB   0022H   A   
TI_CCXXX0_FREND1. . . . . . . . . . . .    N NUMB   0021H   A   
TI_CCXXX0_FREQ0 . . . . . . . . . . . .    N NUMB   000FH   A   
TI_CCXXX0_FREQ1 . . . . . . . . . . . .    N NUMB   000EH   A   
TI_CCXXX0_FREQ2 . . . . . . . . . . . .    N NUMB   000DH   A   
TI_CCXXX0_FREQEST . . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_FSCAL0. . . . . . . . . . . .    N NUMB   0026H   A   
TI_CCXXX0_FSCAL1. . . . . . . . . . . .    N NUMB   0025H   A   
TI_CCXXX0_FSCAL2. . . . . . . . . . . .    N NUMB   0024H   A   
TI_CCXXX0_FSCAL3. . . . . . . . . . . .    N NUMB   0023H   A   
TI_CCXXX0_FSCTRL0 . . . . . . . . . . .    N NUMB   000CH   A   
TI_CCXXX0_FSCTRL1 . . . . . . . . . . .    N NUMB   000BH   A   
TI_CCXXX0_FSTEST. . . . . . . . . . . .    N NUMB   0029H   A   
TI_CCXXX0_IOCFG0. . . . . . . . . . . .    N NUMB   0002H   A   
TI_CCXXX0_IOCFG1. . . . . . . . . . . .    N NUMB   0001H   A   
TI_CCXXX0_IOCFG2. . . . . . . . . . . .    N NUMB   0000H   A   
TI_CCXXX0_LQI . . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_MARCSTATE . . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_MCSM0 . . . . . . . . . . . .    N NUMB   0018H   A   
TI_CCXXX0_MCSM1 . . . . . . . . . . . .    N NUMB   0017H   A   
TI_CCXXX0_MCSM2 . . . . . . . . . . . .    N NUMB   0016H   A   
TI_CCXXX0_MDMCFG0 . . . . . . . . . . .    N NUMB   0014H   A   
TI_CCXXX0_MDMCFG1 . . . . . . . . . . .    N NUMB   0013H   A   
TI_CCXXX0_MDMCFG2 . . . . . . . . . . .    N NUMB   0012H   A   
TI_CCXXX0_MDMCFG3 . . . . . . . . . . .    N NUMB   0011H   A   
TI_CCXXX0_MDMCFG4 . . . . . . . . . . .    N NUMB   0010H   A   
TI_CCXXX0_NUM_RXBYTES . . . . . . . . .    N NUMB   007FH   A   
TI_CCXXX0_PARTNUM . . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_PATABLE . . . . . . . . . . .    N NUMB   003EH   A   
TI_CCXXX0_PKTCTRL0. . . . . . . . . . .    N NUMB   0008H   A   
TI_CCXXX0_PKTCTRL1. . . . . . . . . . .    N NUMB   0007H   A   
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    75

TI_CCXXX0_PKTLEN. . . . . . . . . . . .    N NUMB   0006H   A   
TI_CCXXX0_PKTSTATUS . . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_PTEST . . . . . . . . . . . .    N NUMB   002AH   A   
TI_CCXXX0_RCCTRL0 . . . . . . . . . . .    N NUMB   0028H   A   
TI_CCXXX0_RCCTRL1 . . . . . . . . . . .    N NUMB   0027H   A   
TI_CCXXX0_RSSI. . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_RXBYTES . . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_RXFIFO. . . . . . . . . . . .    N NUMB   003FH   A   
TI_CCXXX0_SAFC. . . . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_SCAL. . . . . . . . . . . . .    N NUMB   0033H   A   
TI_CCXXX0_SFRX. . . . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_SFTX. . . . . . . . . . . . .    N NUMB   003BH   A   
TI_CCXXX0_SIDLE . . . . . . . . . . . .    N NUMB   0036H   A   
TI_CCXXX0_SNOP. . . . . . . . . . . . .    N NUMB   003DH   A   
TI_CCXXX0_SPWD. . . . . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_SRES. . . . . . . . . . . . .    N NUMB   0030H   A   
TI_CCXXX0_SRX . . . . . . . . . . . . .    N NUMB   0034H   A   
TI_CCXXX0_STX . . . . . . . . . . . . .    N NUMB   0035H   A   
TI_CCXXX0_SWOR. . . . . . . . . . . . .    N NUMB   0038H   A   
TI_CCXXX0_SWORRST . . . . . . . . . . .    N NUMB   003CH   A   
TI_CCXXX0_SXOFF . . . . . . . . . . . .    N NUMB   0032H   A   
TI_CCXXX0_SYNC0 . . . . . . . . . . . .    N NUMB   0005H   A   
TI_CCXXX0_SYNC1 . . . . . . . . . . . .    N NUMB   0004H   A   
TI_CCXXX0_TEST0 . . . . . . . . . . . .    N NUMB   002EH   A   
TI_CCXXX0_TEST1 . . . . . . . . . . . .    N NUMB   002DH   A   
TI_CCXXX0_TEST2 . . . . . . . . . . . .    N NUMB   002CH   A   
TI_CCXXX0_TXBYTES . . . . . . . . . . .    N NUMB   003AH   A   
TI_CCXXX0_TXFIFO. . . . . . . . . . . .    N NUMB   003FH   A   
TI_CCXXX0_VCO_VC_DAC. . . . . . . . . .    N NUMB   0039H   A   
TI_CCXXX0_VERSION . . . . . . . . . . .    N NUMB   0031H   A   
TI_CCXXX0_WORCTRL . . . . . . . . . . .    N NUMB   0020H   A   
TI_CCXXX0_WOREVT0 . . . . . . . . . . .    N NUMB   001FH   A   
TI_CCXXX0_WOREVT1 . . . . . . . . . . .    N NUMB   001EH   A   
TI_CCXXX0_WORTIME0. . . . . . . . . . .    N NUMB   0037H   A   
TI_CCXXX0_WORTIME1. . . . . . . . . . .    N NUMB   0036H   A   
WAKE_CLKO . . . . . . . . . . . . . . .    N NUMB   008FH   A   
WKO_BK. . . . . . . . . . . . . . . . .    B ADDR   00B0H.2 A   
XDATA_54. . . . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_CELLID. . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_FIX . . . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_HOLD. . . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_ISSUECMD. . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_RTCMODE . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_RTCTIME . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_SOFTFIRSTSCANTIME . . . . . . . .    X ADDR   -----       EXT
XDATA_TXBUF . . . . . . . . . . . . . .    X ADDR   -----       EXT
XDATA_UNIXTIME. . . . . . . . . . . . .    X ADDR   -----       EXT
_ERASEFLASH . . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUNC_LCD_INIT. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READBINARY02 . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_READRECORD . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_SELECTFILE . . . . . . . .    C ADDR   -----       EXT
_FUN_CARDAPP_UPDATEBINARY . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_IDLE. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_INIT. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RESET . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVOFF . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVON. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_RVWR. . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SETWAKEUPTIME . . . . . . .    C ADDR   -----       EXT
_FUN_CC1101_SPIOSOFTRXCC1101RXCC1101. .    C ADDR   -----       EXT
_FUN_CC1101_WAKEUP. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_INIT. . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RELEASE . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RX. . . . . . . . . .    C ADDR   -----       EXT
_FUN_CONTACTISSUE_RX02. . . . . . . . .    C ADDR   -----       EXT
A51 MACRO ASSEMBLER  GSM                                                                  10/09/2016 12:08:02 PAGE    76

_FUN_CONTACTISSUE_RX03. . . . . . . . .    C ADDR   -----       EXT
_FUN_GSM_AUDIO. . . . . . . . . . . . .    C ADDR   0B40H   R   SEG=?PR?GSM?MATER
_FUN_GSM_COMPAREUNIXTIME. . . . . . . .    C ADDR   015BH   R   SEG=?PR?GSM?MATER
_FUN_GSM_COMPAREUNIXTIME2 . . . . . . .    C ADDR   01A2H   R   SEG=?PR?GSM?MATER
_FUN_GSM_ESAMQY . . . . . . . . . . . .    C ADDR   02B2H   R   SEG=?PR?GSM?MATER
_FUN_GSM_ESAMTOUSERCARD . . . . . . . .    C ADDR   0610H   R   SEG=?PR?GSM?MATER
_FUN_GSM_GETCELLIDEN. . . . . . . . . .    C ADDR   0B3FH   R   SEG=?PR?GSM?MATER
_FUN_GSM_GETOFFSET. . . . . . . . . . .    C ADDR   06DEH   R   SEG=?PR?GSM?MATER
_FUN_GSM_GETOFFSET02. . . . . . . . . .    C ADDR   06FFH   R   SEG=?PR?GSM?MATER
_FUN_GSM_GETRECORDCODE. . . . . . . . .    C ADDR   01C6H   R   SEG=?PR?GSM?MATER
_FUN_GSM_INSERT . . . . . . . . . . . .    C ADDR   0000H   R   SEG=?PR?GSM?MATER
_FUN_GSM_JSUNIXTIMEOFF. . . . . . . . .    C ADDR   0B41H   R   SEG=?PR?GSM?MATER
_FUN_GSM_REPORTMSG. . . . . . . . . . .    C ADDR   0A84H   R   SEG=?PR?GSM?MATER
_FUN_GSM_RTCDIS . . . . . . . . . . . .    C ADDR   0B13H   R   SEG=?PR?GSM?MATER
_FUN_GSM_RTCEN. . . . . . . . . . . . .    C ADDR   0AC2H   R   SEG=?PR?GSM?MATER
_FUN_GSM_RTCOFF . . . . . . . . . . . .    C ADDR   0B38H   R   SEG=?PR?GSM?MATER
_FUN_GSM_RTCON. . . . . . . . . . . . .    C ADDR   0B31H   R   SEG=?PR?GSM?MATER
_FUN_GSM_SERIALINTRX. . . . . . . . . .    C ADDR   0751H   R   SEG=?PR?GSM?MATER
_FUN_LCD_DISPLAYEXCHINA . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_BEEP . . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DATATOXDATA. . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_DELAY. . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_FLASHTOXDATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_GETBCC . . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_XDATATODATA. . . . . . . . . .    C ADDR   -----       EXT
_FUN_LIB_XDATATOXDATA . . . . . . . . .    C ADDR   -----       EXT
_FUN_OBUMAIN_BASEINIT . . . . . . . . .    C ADDR   -----       EXT
_FUN_OBUMAIN_INITSYS. . . . . . . . . .    C ADDR   -----       EXT
_FUN_OBUMAIN_SYSUNSLEEP . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_AUDIOTXSOFT . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXHARD. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXHARD03. . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_RXHBYTE . . . . . . . . . .    C ADDR   -----       EXT
_FUN_SERIAL_TXHARD. . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_DISPLAY . . . . . . . . . . .    C ADDR   -----       EXT
_FUN_TEST_UARTDISPLAY . . . . . . . . .    C ADDR   -----       EXT
_RDFLASH. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_RDFLASHXR. . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASH. . . . . . . . . . . . . . . .    C ADDR   -----       EXT
_WRFLASHXR. . . . . . . . . . . . . . .    C ADDR   -----       EXT


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
